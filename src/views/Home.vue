<template>
  <div class="home-container">
    <!-- éšè—å¼æ¨¡å—é€‰æ‹©å™¨ -->
    <div class="module-selector-container" @mouseenter="showModuleSelector = true" @mouseleave="showModuleSelector = false">
      <div class="module-selector-trigger"></div>
      <div class="module-selector" :class="{ expanded: showModuleSelector }">
        <div class="module-tabs-compact">
          <div 
            class="tab-item-compact" 
            :class="{ active: activeModule === 'welcome' }"
            @click="setActiveModule('welcome')"
          >
            <div class="tab-icon">ğŸ </div>
            <span class="tab-text">é¦–é¡µ</span>
          </div>
          <div 
            class="tab-item-compact" 
            :class="{ active: activeModule === 'consultation' }"
            @click="setActiveModule('consultation')"
          >
            <div class="tab-icon">ğŸ§ </div>
            <span class="tab-text">AIå¤§çˆ†ç‚¸</span>
          </div>
          <div 
            class="tab-item-compact" 
            :class="{ active: activeModule === 'notes' }"
            @click="setActiveModule('notes')"
          >
            <div class="tab-icon">ğŸ“</div>
            <span class="tab-text">AIè®°äº‹æœ¬</span>
          </div>
          <div 
            class="tab-item-compact" 
            :class="{ active: activeModule === 'chat' }"
            @click="setActiveModule('chat')"
          >
            <div class="tab-icon">ğŸ¤–</div>
            <span class="tab-text">æ™ºèƒ½å¯¹è¯</span>
          </div>
          <div 
            class="tab-item-compact" 
            :class="{ active: activeModule === 'todos' }"
            @click="setActiveModule('todos')"
          >
            <div class="tab-icon">âœ…</div>
            <span class="tab-text">å¾…åŠæ¸…å•</span>
          </div>
          
          <!-- ç•ªèŒ„é’Ÿæ¨¡å— -->
          <div 
            class="tab-item-compact" 
            :class="{ active: activeModule === 'pomodoro' }"
            @click="setActiveModule('pomodoro')"
          >
            <div class="tab-icon">ğŸ…</div>
            <span class="tab-text">ç•ªèŒ„é’Ÿ</span>
          </div>
          
          <!-- é¡¹ç›®ç®¡ç†æ¨¡å— -->
          <div 
            class="tab-item-compact" 
            :class="{ active: activeModule === 'project' }"
            @click="setActiveModule('project')"
          >
            <div class="tab-icon">ğŸ“Š</div>
            <span class="tab-text">é¡¹ç›®ç®¡ç†</span>
          </div>
          
          <!-- æ—¥å†æ¨¡å— -->
          <div 
            class="tab-item-compact" 
            :class="{ active: activeModule === 'calendar' }"
            @click="setActiveModule('calendar')"
          >
            <div class="tab-icon">ğŸ“…</div>
            <span class="tab-text">æ—¥å†</span>
          </div>
          
          <!-- åˆ†éš”çº¿ -->
          <div class="tab-divider"></div>
          
          <div class="right-controls">
            <!-- ä¸»é¢˜åˆ‡æ¢ -->
            <div class="control-button" @click="toggleTheme" :title="theme === 'light' ? 'æ·±è‰²æ¨¡å¼' : 'æµ…è‰²æ¨¡å¼'">
              <div class="control-icon">{{ theme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸' }}</div>
            </div>
            
            <!-- è®¾ç½® -->
            <div class="control-button" @click="showSettings = true" title="è®¾ç½®">
              <div class="control-icon">âš™ï¸</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ç®€åŒ–çš„é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="top-nav-compact">
      <div class="nav-left">
        <div class="logo-section-compact">
          <div class="logo-icon">
            <svg viewBox="0 0 40 40" class="logo-svg">
              <!-- AI å¤§è„‘å›¾æ ‡ -->
              <defs>
                <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#6c5ce7;stop-opacity:1" />
                </linearGradient>
              </defs>
              <!-- å¤§è„‘è½®å»“ -->
              <path d="M20 5C15 5 11 9 11 14C11 16 12 18 13 19C12 20 11 22 11 24C11 28 14 31 18 31H22C26 31 29 28 29 24C29 22 28 20 27 19C28 18 29 16 29 14C29 9 25 5 20 5Z" fill="url(#logoGradient)" opacity="0.9"/>
              <!-- ç¥ç»ç½‘ç»œèŠ‚ç‚¹ -->
              <circle cx="16" cy="12" r="1.5" fill="#ffffff" opacity="0.8"/>
              <circle cx="24" cy="12" r="1.5" fill="#ffffff" opacity="0.8"/>
              <circle cx="20" cy="16" r="1.5" fill="#ffffff" opacity="0.8"/>
              <circle cx="18" cy="22" r="1.5" fill="#ffffff" opacity="0.8"/>
              <circle cx="22" cy="22" r="1.5" fill="#ffffff" opacity="0.8"/>
              <!-- è¿æ¥çº¿ -->
              <line x1="16" y1="12" x2="20" y2="16" stroke="#ffffff" stroke-width="0.8" opacity="0.6"/>
              <line x1="24" y1="12" x2="20" y2="16" stroke="#ffffff" stroke-width="0.8" opacity="0.6"/>
              <line x1="20" y1="16" x2="18" y2="22" stroke="#ffffff" stroke-width="0.8" opacity="0.6"/>
              <line x1="20" y1="16" x2="22" y2="22" stroke="#ffffff" stroke-width="0.8" opacity="0.6"/>
            </svg>
          </div>
          <h1 class="app-title glow-text">AIæ™ºèƒ½å·¥ä½œå°</h1>
        </div>
      </div>
      
      <div class="nav-right">
        <!-- ç¼©å°çš„ä¸»é¢˜å’Œè®¾ç½®æŒ‰é’® -->
        <div class="compact-controls">
          <el-button 
            class="theme-btn" 
            circle 
            size="small" 
            @click="toggleTheme"
          >
            <el-icon><component :is="theme === 'light' ? 'Moon' : 'Sunny'" /></el-icon>
          </el-button>
          <el-button 
            class="settings-btn" 
            circle 
            size="small" 
            @click="showSettings = true"
          >
            <el-icon><Setting /></el-icon>
          </el-button>
        </div>
      </div>
    </header>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="content-area">
      <!-- æ¬¢è¿é¡µé¢ -->
      <div v-if="activeModule === 'welcome'" class="welcome-screen animate-fade-in">
        <div class="welcome-hero">
          <div class="hero-background"></div>
          <div class="hero-content">

            
            <!-- æ™ºèƒ½æœç´¢ï¼ˆç®€åŒ–ç‰ˆï¼Œä»…ä¿ç•™æœç´¢ä¸å¿«æ·å…¥å£ï¼‰ -->
            <div class="enhanced-search-section">
              <div class="search-header">
                <h3 class="search-title">
                  <el-icon class="search-title-icon"><Search /></el-icon>
                  æ™ºèƒ½æœç´¢
                </h3>
                <p class="search-subtitle">å¿«é€Ÿæ‰¾åˆ°æ‚¨éœ€è¦çš„åŠŸèƒ½å’Œå†…å®¹</p>
              </div>
              
              <div class="enhanced-search-container glass-card search-with-iching">
                <!-- å¦è±¡å°åŒºåŸŸï¼ˆå·¦ä¾§ç¾åŒ–ï¼‰ -->
                <div class="iching-mini" aria-label="å¦è±¡é¢„è§ˆ">
                  <div class="hex-line yin"></div>
                  <div class="hex-line yang"></div>
                  <div class="hex-line yin"></div>
                  <div class="hex-line yang"></div>
                  <div class="hex-line yang"></div>
                  <div class="hex-line yin"></div>
                </div>
                
                <!-- æœç´¢è¾“å…¥æ¡† -->
                <el-input
                  v-model="searchQuery"
                  placeholder="è¾“å…¥å…³é”®è¯ï¼Œæ™ºèƒ½è¯†åˆ«æ‚¨çš„éœ€æ±‚..."
                  class="enhanced-search-input"
                  @keyup.enter="handleSmartSearch"
                  @input="handleSearchInput"
                  size="large"
                >
                  <template #prefix>
                    <el-icon class="search-prefix-icon"><Search /></el-icon>
                  </template>
                  <template #suffix>
                    <el-button 
                      type="primary" 
                      @click="handleSmartSearch"
                      class="search-button"
                      :disabled="!searchQuery.trim()"
                    >
                      æœç´¢
                    </el-button>
                  </template>
                </el-input>
              </div>

              <!-- å¿«æ·è·³è½¬é“¾æ¥ -->
              <div class="quick-links">
                <router-link to="/ai-consultation"><el-button text>AI å’¨è¯¢</el-button></router-link>
                <router-link to="/chat"><el-button text>æ™ºèƒ½å¯¹è¯</el-button></router-link>
                <router-link to="/notes"><el-button text>è®°äº‹æœ¬</el-button></router-link>
                <router-link to="/todos"><el-button text>å¾…åŠæ¸…å•</el-button></router-link>
                <router-link to="/aurora-test"><el-button text>Aurora æµ‹è¯•</el-button></router-link>
              </div>
            </div>
            
            <!-- æ•´åˆçš„æ—¥æœŸè¿åŠ¿å¡ç‰‡ï¼ˆå·²éšè—ï¼‰ -->
            <div class="integrated-date-fortune-card glass-card" v-if="false">
              <div class="card-header">
                <div class="date-display">
                  <div class="date-number">{{ currentDate.day }}</div>
                  <div class="date-details">
                    <div class="month-year">{{ currentDate.monthYear }}</div>
                    <div class="weekday">{{ currentDate.weekday }}</div>
                    <div class="lunar-date">{{ currentDate.lunar }}</div>
                  </div>
                </div>
                <div class="fortune-summary">
                  <div class="fortune-icon-large">{{ todayFortune.icon }}</div>
                  <div class="fortune-info">
                    <div class="fortune-text" :class="`fortune-${todayFortune.level}`">{{ todayFortune.text }}</div>
                    <div class="fortune-desc">{{ todayFortune.description }}</div>
                  </div>
                </div>
              </div>
              
              <div class="card-content" v-if="todayFortune.huangliInfo">
                <div class="fortune-grid">
                  <div class="fortune-column">
                    <h4 class="fortune-title suitable">âœ… ä»Šæ—¥å®œ</h4>
                    <div class="fortune-tags">
                      <span v-for="item in todayFortune.huangliInfo.suitable" :key="item" class="fortune-tag suitable">{{ item }}</span>
                    </div>
                  </div>
                  <div class="fortune-column">
                    <h4 class="fortune-title avoid">âŒ ä»Šæ—¥å¿Œ</h4>
                    <div class="fortune-tags">
                      <span v-for="item in todayFortune.huangliInfo.avoid" :key="item" class="fortune-tag avoid">{{ item }}</span>
                    </div>
                  </div>
                </div>
                <div class="fortune-tips-integrated">
                  <h4 class="tips-title">ğŸ’¡ ä»Šæ—¥å»ºè®®</h4>
                  <p class="tips-content">{{ todayFortune.huangliInfo.tips }}</p>
                </div>
              </div>
            </div>

            <!-- ç•ªèŒ„é’ŸåŠŸèƒ½å·²ç§»è‡³éšè—æ  -->

            <!-- å åœç®—å¦åŠŸèƒ½ï¼ˆç‹¬ç«‹åŒºåŸŸï¼Œå·²éšè—ï¼‰ -->
            <div class="divination-main-section glass-card" v-if="false">
              <div class="section-header">
                <h3 class="section-title">ğŸ”® å åœç®—å¦</h3>
                <div class="divination-controls">
                  <el-button type="primary" @click="performDivination" :loading="divinationLoading">
                    {{ divinationLoading ? 'å åœä¸­...' : 'å¼€å§‹å åœ' }}
                  </el-button>
                  <el-button text @click="showDivinationHistory = !showDivinationHistory">
                    å†å²è®°å½•
                  </el-button>
                </div>
              </div>
              
              <div class="divination-content">
                <div class="divination-input" v-if="!currentDivination && !divinationLoading">
                  <div class="divination-prompt">
                    <p>è¯·åœ¨å¿ƒä¸­é»˜å¿µæ‚¨æƒ³è¦å åœçš„é—®é¢˜ï¼Œç„¶åç‚¹å‡»"å¼€å§‹å åœ"</p>
                    <div class="divination-types">
                      <div 
                        v-for="type in divinationTypes" 
                        :key="type.id"
                        class="divination-type"
                        :class="{ active: selectedDivinationType === type.id }"
                        @click="selectedDivinationType = type.id"
                      >
                        <div class="type-icon">{{ type.icon }}</div>
                        <div class="type-name">{{ type.name }}</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- æ‘‡é“œé’±åŠ¨ç”» -->
                <div class="coin-animation" v-if="divinationLoading">
                  <div class="animation-container">
                    <div class="coins-wrapper">
                      <div class="coin" v-for="n in 3" :key="n" :style="{ animationDelay: (n-1) * 0.2 + 's' }">
                        <div class="coin-face coin-front">ä¹¾</div>
                        <div class="coin-face coin-back">å¤</div>
                      </div>
                    </div>
                    <div class="divination-text">
                      <div class="text-line">ğŸ”® æ­£åœ¨è¿›è¡Œå…­çˆ»å åœ...</div>
                      <div class="text-line">ğŸª™ æŠ•æ·é“œé’±ï¼Œç”Ÿæˆçˆ»è±¡</div>
                      <div class="progress-dots">
                        <span class="dot"></span>
                        <span class="dot"></span>
                        <span class="dot"></span>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="divination-result-enhanced" v-if="currentDivination">
                   <!-- æŠ•æ·é“œé’±ç»“æœå±•ç¤º -->
                   <div class="coin-results-section" v-if="currentDivination.liuyao">
                     <div class="section-title">ğŸª™ æŠ•æ·é“œé’±ç»“æœ</div>
                     <div class="coin-results-grid">
                       <div 
                         v-for="(coinResult, index) in currentDivination.liuyao.coinResults" 
                         :key="index"
                         class="coin-result-item"
                       >
                         <div class="yao-position-label">{{ ['ä¸Šçˆ»', 'äº”çˆ»', 'å››çˆ»', 'ä¸‰çˆ»', 'äºŒçˆ»', 'åˆçˆ»'][index] }}</div>
                         <div class="coins-display">
                           <div 
                             v-for="(coin, coinIndex) in coinResult.coins" 
                             :key="coinIndex"
                             class="coin-mini"
                             :class="{ 'coin-front': coin === 'æ­£', 'coin-back': coin === 'å' }"
                           >
                             {{ coin === 'æ­£' ? 'ä¹¾' : 'å¤' }}
                           </div>
                         </div>
                         <div class="coin-sum">{{ coinResult.sum }}åˆ†</div>
                       </div>
                     </div>
                   </div>
                   
                   <!-- å…­çˆ»å¦è±¡è¯¦ç»†æ˜¾ç¤º -->
                   <div class="liuyao-detailed" v-if="currentDivination.liuyao">
                     <div class="hexagram-header">
                       <div class="hexagram-title">{{ currentDivination.originalHexagram.name }}</div>
                       <div class="hexagram-nature">{{ currentDivination.originalHexagram.nature }}å¦ Â· {{ currentDivination.originalHexagram.element }}</div>
                     </div>
                     
                     <!-- å…­çˆ»æ’åˆ—ï¼ˆè¯¦ç»†ç‰ˆï¼‰ -->
                     <div class="yao-lines-detailed">
                       <div 
                         v-for="(yao, index) in currentDivination.liuyao.yaoLines" 
                         :key="index"
                         class="yao-line-detailed"
                         :class="{ 'changing': yao.isChanging }"
                       >
                         <div class="yao-position">{{ ['ä¸Š', 'äº”', 'å››', 'ä¸‰', 'äºŒ', 'åˆ'][index] }}</div>
                         <div class="yao-symbol-large">{{ yao.symbol }}</div>
                         <div class="yao-info">
                           <div class="yao-type">{{ yao.type }}</div>
                           <div class="yao-coins">{{ yao.coins }} ({{ yao.sum }}åˆ†)</div>
                           <div class="yao-change" v-if="yao.isChanging">å˜çˆ»</div>
                         </div>
                       </div>
                     </div>
                     
                     <!-- å˜å¦æ˜¾ç¤ºï¼ˆå¦‚æœæœ‰å˜çˆ»ï¼‰ -->
                     <div class="changed-hexagram-detailed" v-if="currentDivination.changedHexagram && currentDivination.liuyao.hasChangingLines">
                       <div class="change-arrow">â¬‡ï¸ å˜å¦ â¬‡ï¸</div>
                       <div class="changed-hexagram-info">
                         <div class="changed-hexagram-title">{{ currentDivination.changedHexagram.name }}</div>
                         <div class="changed-hexagram-nature">{{ currentDivination.changedHexagram.nature }}å¦ Â· {{ currentDivination.changedHexagram.element }}</div>
                       </div>
                     </div>
                     
                     <!-- å¦è±¡è§£é‡Š -->
                     <div class="hexagram-explanation">
                       <div class="explanation-title">ğŸ“– å¦è±¡è§£é‡Š</div>
                       <div class="explanation-content">
                         <div class="original-meaning">
                           <strong>{{ currentDivination.originalHexagram.name }}ï¼š</strong>
                           {{ currentDivination.originalHexagram.meaning }}
                         </div>
                         <div class="changed-meaning" v-if="currentDivination.changedHexagram && currentDivination.liuyao.hasChangingLines">
                           <strong>{{ currentDivination.changedHexagram.name }}ï¼š</strong>
                           {{ currentDivination.changedHexagram.meaning }}
                         </div>
                       </div>
                     </div>
                   </div>
                   
                   <!-- ä¼ ç»Ÿå¦è±¡æ˜¾ç¤ºï¼ˆå‘åå…¼å®¹ï¼‰ -->
                   <div class="hexagram-display" v-else>
                     <div class="hexagram-glow"></div>
                     <div class="hexagram-symbol">{{ currentDivination.hexagram.symbol }}</div>
                     <div class="hexagram-name">{{ currentDivination.hexagram.name }}</div>
                     <div class="hexagram-meaning">{{ currentDivination.hexagram.meaning }}</div>
                     <div class="result-coins">
                       <div class="result-coin" v-for="n in 3" :key="n">
                         <div class="coin-face">{{ n % 2 === 0 ? 'ä¹¾' : 'å¤' }}</div>
                       </div>
                     </div>
                   </div>
                   <div class="divination-interpretation-compact">
                     <div class="interpretation-content-compact">
                       <div class="content-section">
                         <span class="section-icon">ğŸ“œ</span>
                         <span class="section-text">{{ currentDivination.interpretation }}</span>
                       </div>
                       <div class="advice-section">
                         <span class="section-icon">ğŸ’¡</span>
                         <span class="section-text">{{ currentDivination.advice }}</span>
                       </div>
                     </div>
                     <div class="divination-meta-compact">
                       <span class="meta-compact">{{ getDivinationTypeName(currentDivination.type) }} Â· {{ formatTime(currentDivination.timestamp) }}</span>
                     </div>
                   </div>
                 </div>
                
                <div class="divination-history" v-if="showDivinationHistory && divinationHistory.length > 0">
                  <div class="history-title">å åœå†å²</div>
                  <div class="history-list">
                    <div 
                      v-for="record in divinationHistory.slice(0, 3)" 
                      :key="record.id"
                      class="history-item"
                      @click="viewDivinationRecord(record)"
                    >
                      <div class="history-hexagram">{{ record.hexagram.symbol }}</div>
                      <div class="history-info">
                        <div class="history-name">{{ record.hexagram.name }}</div>
                        <div class="history-time">{{ formatTime(record.timestamp) }}</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ç»Ÿä¸€ä¿¡æ¯æµ -->
            <div class="unified-info-stream glass-card">
              <div class="section-header">
                <h3 class="section-title">é‡è¦ä¿¡æ¯</h3>
                <div class="stream-controls">
                  <el-button text type="primary" @click="setActiveModule('todos')" class="view-more-btn">
                    å¾…åŠ <el-icon><ArrowRight /></el-icon>
                  </el-button>
                  <el-button text type="primary" @click="router.push('/ai-consultation')" class="view-more-btn">
                    AIå¤§çˆ†ç‚¸ <el-icon><ArrowRight /></el-icon>
                  </el-button>
                </div>
              </div>
              <div class="info-stream-container">
                <div class="stream-item" v-if="currentStreamItem">
                  <div class="stream-icon">{{ currentStreamItem?.icon || 'ğŸ“‹' }}</div>
                  <div class="stream-content">
                    <div class="stream-type">{{ currentStreamItem?.type || 'ä¿¡æ¯' }}</div>
                    <div class="stream-title">{{ currentStreamItem?.title || 'æ— æ ‡é¢˜' }}</div>
                    <div class="stream-description">{{ currentStreamItem?.description || 'æš‚æ— æè¿°' }}</div>
                    <div class="stream-meta">
                      <span class="stream-priority" v-if="currentStreamItem?.priority" :class="`priority-${currentStreamItem.priority}`">
                        {{ getPriorityText(currentStreamItem.priority) }}
                      </span>
                      <span class="stream-time" v-if="currentStreamItem?.time">
                        {{ currentStreamItem.time }}
                      </span>
                    </div>
                  </div>
                  <div class="stream-action">
                    <el-button 
                      type="primary" 
                      size="small" 
                      @click="handleStreamItemClick(currentStreamItem)"
                      v-if="currentStreamItem"
                    >
                      {{ currentStreamItem?.actionText || 'æŸ¥çœ‹è¯¦æƒ…' }}
                    </el-button>
                  </div>
                </div>
                <div v-if="!currentStreamItem" class="empty-stream">
                  <el-icon><List /></el-icon>
                  <p>æš‚æ— é‡è¦ä¿¡æ¯</p>
                </div>
              </div>
              <div class="stream-indicators" v-if="streamItems.length > 1">
                <div 
                  v-for="(item, index) in streamItems" 
                  :key="index"
                  class="indicator" 
                  :class="{ active: index === currentStreamIndex }"
                  @click="setCurrentStreamIndex(index)"
                ></div>
              </div>
            </div>
            
            <!-- åŠŸèƒ½æ¨¡å—å¡ç‰‡åŒºåŸŸ -->
            <div class="feature-modules-section">
              <div class="section-header">
                <h3 class="section-title">åŠŸèƒ½æ¨¡å—</h3>
                <p class="section-subtitle">å¿«é€Ÿè®¿é—®å„ç§å·¥å…·å’ŒåŠŸèƒ½</p>
              </div>
              
              <div class="modules-grid">
                <!-- æ—¥å†æ¨¡å—å¡ç‰‡ -->
                <div class="module-card glass-card" @click="setActiveModule('calendar')">
                  <div class="module-icon">ğŸ“…</div>
                  <div class="module-content">
                    <h4 class="module-title">æ—¥å†</h4>
                    <p class="module-description">ç®¡ç†æ—¥ç¨‹å®‰æ’ï¼ŒæŸ¥çœ‹é‡è¦äº‹ä»¶</p>
                  </div>
                  <div class="module-arrow">â†’</div>
                </div>
                
                <!-- AIè®°äº‹æœ¬æ¨¡å—å¡ç‰‡ -->
                <div class="module-card glass-card" @click="setActiveModule('notes')">
                  <div class="module-icon">ğŸ“</div>
                  <div class="module-content">
                    <h4 class="module-title">AIè®°äº‹æœ¬</h4>
                    <p class="module-description">æ™ºèƒ½ç¬”è®°ç®¡ç†ï¼ŒAIè¾…åŠ©å†™ä½œ</p>
                  </div>
                  <div class="module-arrow">â†’</div>
                </div>
                
                <!-- å¾…åŠæ¸…å•æ¨¡å—å¡ç‰‡ -->
                <div class="module-card glass-card" @click="setActiveModule('todos')">
                  <div class="module-icon">âœ…</div>
                  <div class="module-content">
                    <h4 class="module-title">å¾…åŠæ¸…å•</h4>
                    <p class="module-description">ä»»åŠ¡ç®¡ç†ï¼Œæå‡å·¥ä½œæ•ˆç‡</p>
                  </div>
                  <div class="module-arrow">â†’</div>
                </div>
                
                <!-- ç•ªèŒ„é’Ÿæ¨¡å—å¡ç‰‡ -->
                <div class="module-card glass-card" @click="setActiveModule('pomodoro')">
                  <div class="module-icon">ğŸ…</div>
                  <div class="module-content">
                    <h4 class="module-title">ç•ªèŒ„é’Ÿ</h4>
                    <p class="module-description">ä¸“æ³¨å·¥ä½œï¼Œåˆç†å®‰æ’ä¼‘æ¯æ—¶é—´</p>
                  </div>
                  <div class="module-arrow">â†’</div>
                </div>
                
                <!-- é¡¹ç›®ç®¡ç†æ¨¡å—å¡ç‰‡ -->
                <div class="module-card glass-card" @click="setActiveModule('project')">
                  <div class="module-icon">ğŸ“Š</div>
                  <div class="module-content">
                    <h4 class="module-title">é¡¹ç›®ç®¡ç†</h4>
                    <p class="module-description">é¡¹ç›®è¿›åº¦è·Ÿè¸ªï¼Œå›¢é˜Ÿåä½œ</p>
                  </div>
                  <div class="module-arrow">â†’</div>
                </div>
                
                <!-- æ™ºèƒ½å¯¹è¯æ¨¡å—å¡ç‰‡ -->
                <div class="module-card glass-card" @click="setActiveModule('chat')">
                  <div class="module-icon">ğŸ¤–</div>
                  <div class="module-content">
                    <h4 class="module-title">æ™ºèƒ½å¯¹è¯</h4>
                    <p class="module-description">AIåŠ©æ‰‹å¯¹è¯ï¼Œè·å–æ™ºèƒ½å»ºè®®</p>
                  </div>
                  <div class="module-arrow">â†’</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        

      </div>

      <!-- AIå¤§çˆ†ç‚¸æ¨¡å— -->
      <AIConsultation v-if="activeModule === 'consultation'" />
      
      <!-- è®°äº‹æœ¬æ¨¡å— -->
      <NotesModule v-if="activeModule === 'notes'" />
      
      <!-- æ™ºèƒ½ä½“å¯¹è¯æ¨¡å— -->
      <ChatModule v-if="activeModule === 'chat'" />
      
      <!-- å¾…åŠæ¸…å•æ¨¡å— -->
      <TodosModule v-if="activeModule === 'todos'" />
      
      <!-- ç•ªèŒ„é’Ÿæ¨¡å— -->
      <div v-if="activeModule === 'pomodoro'" class="module-container">
        <PomodoroModule />
      </div>
      
      <!-- é¡¹ç›®ç®¡ç†æ¨¡å— -->
      <div v-if="activeModule === 'project'" class="module-container">
        <ProjectManagement />
      </div>
      
      <!-- æ—¥å†æ¨¡å— -->
      <div v-if="activeModule === 'calendar'" class="module-container">
        <CalendarModule />
      </div>
    </main>

    <!-- è®¾ç½®å¯¹è¯æ¡† -->
    <Settings v-model="showSettings" />
    
    <!-- æ•™ç¨‹ç»„ä»¶ -->
    <Tutorial v-if="showTutorial" @close="showTutorial = false" />
    

  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted, watch } from 'vue'
import { useRouter } from 'vue-router'
import { useAppStore } from '@/stores/app'
import { Search, Document, ChatDotRound, List, Moon, Sunny, Setting, ArrowRight } from '@element-plus/icons-vue'
import { ElDialog, ElForm, ElFormItem, ElInput, ElButton, ElMessage, ElMessageBox } from 'element-plus'
import AIConsultation from '@/views/AIConsultation.vue'
import NotesModule from '@/components/modules/NotesModule.vue'
import ChatModule from '@/components/modules/ChatModule.vue'
import TodosModule from '@/components/modules/TodosModule.vue'
import CalendarModule from '@/components/modules/CalendarModule.vue'
import PomodoroModule from '@/components/PomodoroModule.vue'
import ProjectManagement from '@/components/ProjectManagement.vue'
import Settings from '@/components/Settings.vue'
import Tutorial from '@/components/Tutorial.vue'
import DatabaseManager from '@/utils/database'

const appStore = useAppStore()
const router = useRouter()

// å“åº”å¼æ•°æ®
const searchQuery = ref('')
const activeModule = ref<'welcome' | 'consultation' | 'notes' | 'chat' | 'todos' | 'pomodoro' | 'project' | 'calendar'>('welcome')
const showSettings = ref(false)
const logoClickCount = ref(0)
const showTutorial = ref(false)
const searchSuggestions = ref([])
const importantTodos = ref([])
const aiNews = ref([])
const aiConsultations = ref([])
const showModuleSelector = ref(false)
const streamItems = ref([])
    const currentStreamIndex = ref(0)
    const streamTimer = ref(null)
    
    // å åœåŠŸèƒ½æ•°æ®
    const divinationLoading = ref(false)
    const currentDivination = ref(null)
    const showDivinationHistory = ref(false)
    const selectedDivinationType = ref('general')
    const divinationHistory = ref([])
    const divinationTypes = ref([
      { id: 'general', name: 'ç»¼åˆè¿åŠ¿', icon: 'ğŸŒŸ' },
      { id: 'love', name: 'æ„Ÿæƒ…å§»ç¼˜', icon: 'ğŸ’•' },
      { id: 'career', name: 'äº‹ä¸šè´¢è¿', icon: 'ğŸ’¼' },
      { id: 'health', name: 'å¥åº·å¹³å®‰', icon: 'ğŸƒ' },
      { id: 'study', name: 'å­¦ä¸šè€ƒè¯•', icon: 'ğŸ“š' },
      { id: 'travel', name: 'å‡ºè¡Œæ—…æ¸¸', icon: 'âœˆï¸' }
    ])
const currentDate = ref({})
const todayFortune = ref({})

// ç•ªèŒ„é’ŸåŠŸèƒ½æ•°æ®
const timerStatus = ref('idle') // 'idle', 'running', 'paused'
const workDuration = ref(25) // å·¥ä½œæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
const breakDuration = ref(5) // ä¼‘æ¯æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
const currentTime = ref(0) // å½“å‰å‰©ä½™æ—¶é—´ï¼ˆç§’ï¼‰
const totalTime = ref(0) // æ€»æ—¶é—´ï¼ˆç§’ï¼‰
const isWorkMode = ref(true) // æ˜¯å¦ä¸ºå·¥ä½œæ¨¡å¼
const completedCycles = ref(0) // å·²å®Œæˆè½®æ•°
const targetCycles = ref(4) // ç›®æ ‡è½®æ•°
const timerInterval = ref(null) // å®šæ—¶å™¨å¼•ç”¨

// è®¡ç®—å±æ€§
const theme = computed(() => appStore.theme)
const sidebarCollapsed = computed(() => appStore.sidebarCollapsed)
const currentStreamItem = computed(() => {
  if (streamItems.value.length === 0) return null
  const index = currentStreamIndex.value
  if (index < 0 || index >= streamItems.value.length) return null
  return streamItems.value[index] || null
})

// ç•ªèŒ„é’Ÿè®¡ç®—å±æ€§
const formattedTime = computed(() => {
  const minutes = Math.floor(currentTime.value / 60)
  const seconds = currentTime.value % 60
  return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`
})

const currentMode = computed(() => {
  return isWorkMode.value ? 'å·¥ä½œæ—¶é—´' : 'ä¼‘æ¯æ—¶é—´'
})

const circumference = computed(() => {
  return 2 * Math.PI * 90 // åŠå¾„ä¸º90çš„åœ†å‘¨é•¿
})

const strokeDashoffset = computed(() => {
  if (totalTime.value === 0) return circumference.value
  const progress = (totalTime.value - currentTime.value) / totalTime.value
  return circumference.value * (1 - progress)
})

// æ¨¡æ‹Ÿç»Ÿè®¡æ•°æ®
const stats = ref({
  totalNotes: 0,
  totalTasks: 0,
  totalChats: 0,
  aiCalls: 0
})

// æ–¹æ³•
const toggleTheme = () => {
  appStore.toggleTheme()
}

const toggleSidebar = () => {
  appStore.toggleSidebar()
}

const setActiveModule = (module: 'welcome' | 'consultation' | 'notes' | 'chat' | 'todos' | 'pomodoro' | 'project' | 'calendar') => {
  activeModule.value = module
}

const handleSearch = (query: string) => {
  // TODO: å®ç°å…¨å±€æœç´¢åŠŸèƒ½
  console.log('æœç´¢:', query)
}

// ç•ªèŒ„é’Ÿç›¸å…³æ–¹æ³•
const toggleTimer = () => {
  if (timerStatus.value === 'idle') {
    startTimer()
  } else if (timerStatus.value === 'running') {
    pauseTimer()
  } else if (timerStatus.value === 'paused') {
    resumeTimer()
  }
}

const startTimer = () => {
  const duration = isWorkMode.value ? workDuration.value : breakDuration.value
  currentTime.value = duration * 60
  totalTime.value = duration * 60
  timerStatus.value = 'running'
  
  timerInterval.value = setInterval(() => {
    if (currentTime.value > 0) {
      currentTime.value--
    } else {
      completeTimer()
    }
  }, 1000)
}

const pauseTimer = () => {
  timerStatus.value = 'paused'
  if (timerInterval.value) {
    clearInterval(timerInterval.value)
    timerInterval.value = null
  }
}

const resumeTimer = () => {
  timerStatus.value = 'running'
  timerInterval.value = setInterval(() => {
    if (currentTime.value > 0) {
      currentTime.value--
    } else {
      completeTimer()
    }
  }, 1000)
}

const resetTimer = () => {
  timerStatus.value = 'idle'
  currentTime.value = 0
  totalTime.value = 0
  if (timerInterval.value) {
    clearInterval(timerInterval.value)
    timerInterval.value = null
  }
}

const completeTimer = () => {
  timerStatus.value = 'idle'
  if (timerInterval.value) {
    clearInterval(timerInterval.value)
    timerInterval.value = null
  }
  
  // æ’­æ”¾æç¤ºéŸ³ï¼ˆå¯é€‰ï¼‰
  try {
    const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT')
    audio.play().catch(() => {})
  } catch (e) {}
  
  // æ˜¾ç¤ºå®Œæˆé€šçŸ¥
  ElMessage({
    message: isWorkMode.value ? 'å·¥ä½œæ—¶é—´ç»“æŸï¼Œå¼€å§‹ä¼‘æ¯ï¼' : 'ä¼‘æ¯æ—¶é—´ç»“æŸï¼Œå¼€å§‹å·¥ä½œï¼',
    type: 'success',
    duration: 3000
  })
  
  if (isWorkMode.value) {
    completedCycles.value++
  }
  
  // åˆ‡æ¢æ¨¡å¼
  isWorkMode.value = !isWorkMode.value
  
  // è‡ªåŠ¨å¼€å§‹ä¸‹ä¸€ä¸ªå‘¨æœŸï¼ˆå¯é€‰ï¼‰
  // startTimer()
}

// æ™ºèƒ½æœç´¢ç›¸å…³æ–¹æ³•
const handleSearchInput = (value: string) => {
  const query = value.toLowerCase().trim()
  searchSuggestions.value = []
  
  if (!query) return
  
  // ç¬”è®°ç›¸å…³å…³é”®è¯æ£€æµ‹
  const noteKeywords = ['ç¬”è®°', 'è®°äº‹', 'note', 'è®°å½•', 'å¤‡å¿˜', 'æ–‡æ¡£']
  if (noteKeywords.some(keyword => query.includes(keyword))) {
    const content = query.replace(new RegExp(noteKeywords.join('|'), 'gi'), '').trim()
    searchSuggestions.value.push({
      type: 'notes',
      icon: 'ğŸ“',
      text: content ? `åˆ›å»ºç¬”è®°: ${content}` : 'æ‰“å¼€ç¬”è®°æ¨¡å—',
      action: content ? 'create' : 'open'
    })
  }
  
  // AIå¯¹è¯ç›¸å…³å…³é”®è¯æ£€æµ‹
  const aiKeywords = ['ai', 'å¯¹è¯', 'èŠå¤©', 'chat', 'é—®ç­”', 'åŠ©æ‰‹', 'gpt']
  if (aiKeywords.some(keyword => query.includes(keyword))) {
    const content = query.replace(new RegExp(aiKeywords.join('|'), 'gi'), '').trim()
    searchSuggestions.value.push({
      type: 'chat',
      icon: 'ğŸ¤–',
      text: content ? `AIå¯¹è¯: ${content}` : 'å¼€å§‹AIå¯¹è¯',
      action: content ? 'chat' : 'open'
    })
  }
  
  // å¾…åŠäº‹é¡¹ç›¸å…³å…³é”®è¯æ£€æµ‹
  const todoKeywords = ['å¾…åŠ', 'ä»»åŠ¡', 'todo', 'æ¸…å•', 'è®¡åˆ’', 'æé†’']
  if (todoKeywords.some(keyword => query.includes(keyword))) {
    const content = query.replace(new RegExp(todoKeywords.join('|'), 'gi'), '').trim()
    searchSuggestions.value.push({
      type: 'todos',
      icon: 'âœ…',
      text: content ? `åˆ›å»ºä»»åŠ¡: ${content}` : 'ç®¡ç†å¾…åŠäº‹é¡¹',
      action: content ? 'create' : 'open'
    })
  }
  
  // è®¾ç½®ç›¸å…³å…³é”®è¯æ£€æµ‹
  const settingsKeywords = ['è®¾ç½®', 'é…ç½®', 'settings', 'åå¥½', 'é€‰é¡¹']
  if (settingsKeywords.some(keyword => query.includes(keyword))) {
    searchSuggestions.value.push({
      type: 'settings',
      icon: 'âš™ï¸',
      text: 'æ‰“å¼€è®¾ç½®',
      action: 'open'
    })
  }
  
  // æœç´¢ç›¸å…³å…³é”®è¯æ£€æµ‹
  const searchKeywords = ['æœç´¢', 'search', 'æŸ¥æ‰¾', 'å¯»æ‰¾']
  if (searchKeywords.some(keyword => query.includes(keyword))) {
    const content = query.replace(new RegExp(searchKeywords.join('|'), 'gi'), '').trim()
    if (content) {
      searchSuggestions.value.push({
        type: 'search',
        icon: 'ğŸ”',
        text: `å…¨å±€æœç´¢: ${content}`,
        action: 'search'
      })
    }
  }
  
  // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ç‰¹å®šå…³é”®è¯ï¼Œæä¾›é€šç”¨æœç´¢å»ºè®®
  if (searchSuggestions.value.length === 0 && query.length > 1) {
    searchSuggestions.value.push(
      {
        type: 'search',
        icon: 'ğŸ”',
        text: `æœç´¢ "${query}"`,
        action: 'search'
      },
      {
        type: 'notes',
        icon: 'ğŸ“',
        text: `åˆ›å»ºç¬”è®° "${query}"`,
        action: 'create'
      },
      {
        type: 'chat',
        icon: 'ğŸ¤–',
        text: `è¯¢é—®AI "${query}"`,
        action: 'chat'
      }
    )
  }
}

const handleSmartSearch = async () => {
  const query = searchQuery.value.trim()
  const lowerQuery = query.toLowerCase()
  
  if (!query) return
  
  // æ™ºèƒ½è¯†åˆ«å’Œå¤„ç†ä¸åŒç±»å‹çš„è¾“å…¥
  const result = await processSmartQuery(query)
  
  if (result.success) {
    searchQuery.value = ''
    searchSuggestions.value = []
  }
}

// æ™ºèƒ½æŸ¥è¯¢å¤„ç†å‡½æ•°
const processSmartQuery = async (query: string) => {
  const lowerQuery = query.toLowerCase()
  
  // ç¬”è®°ç›¸å…³å¤„ç†
  const noteKeywords = ['ç¬”è®°', 'è®°äº‹', 'note', 'è®°å½•', 'å¤‡å¿˜', 'æ–‡æ¡£']
  if (noteKeywords.some(keyword => lowerQuery.includes(keyword))) {
    const content = query.replace(new RegExp(noteKeywords.join('|'), 'gi'), '').trim()
    
    if (content) {
      return await createNote(content)
    } else {
      setActiveModule('notes')
      return { success: true, message: 'å·²æ‰“å¼€ç¬”è®°æ¨¡å—' }
    }
  }
  
  // AIå¯¹è¯ç›¸å…³å¤„ç†
  const aiKeywords = ['ai', 'å¯¹è¯', 'èŠå¤©', 'chat', 'é—®ç­”', 'åŠ©æ‰‹', 'gpt']
  if (aiKeywords.some(keyword => lowerQuery.includes(keyword))) {
    const content = query.replace(new RegExp(aiKeywords.join('|'), 'gi'), '').trim()
    
    setActiveModule('chat')
    if (content) {
      // TODO: ä¼ é€’åˆå§‹æ¶ˆæ¯åˆ°èŠå¤©æ¨¡å—
      ElMessage.success(`æ­£åœ¨ä¸ºæ‚¨å‡†å¤‡AIå¯¹è¯: ${content}`)
    }
    return { success: true, message: 'å·²æ‰“å¼€AIå¯¹è¯' }
  }
  
  // AIå¤§çˆ†ç‚¸ç›¸å…³å¤„ç†
  const consultationKeywords = ['å’¨è¯¢', 'é¡¾é—®', 'ä¸“å®¶', 'å»ºè®®', 'æ–¹æ¡ˆ', 'ç­–ç•¥', 'åˆ†æ', 'æŒ‡å¯¼', 'æ–°é—»', 'åŠ¨æ€']
  if (consultationKeywords.some(keyword => lowerQuery.includes(keyword))) {
    setActiveModule('consultation')
    ElMessage.success('å·²æ‰“å¼€AIå¤§çˆ†ç‚¸æœåŠ¡')
    return { success: true, message: 'å·²æ‰“å¼€AIå¤§çˆ†ç‚¸' }
  }
  
  // å¾…åŠäº‹é¡¹ç›¸å…³å¤„ç†
  const todoKeywords = ['å¾…åŠ', 'ä»»åŠ¡', 'todo', 'æ¸…å•', 'è®¡åˆ’', 'æé†’']
  if (todoKeywords.some(keyword => lowerQuery.includes(keyword))) {
    const content = query.replace(new RegExp(todoKeywords.join('|'), 'gi'), '').trim()
    
    if (content) {
      return await createTodo(content)
    } else {
      setActiveModule('todos')
      return { success: true, message: 'å·²æ‰“å¼€å¾…åŠäº‹é¡¹' }
    }
  }
  
  // è®¾ç½®ç›¸å…³å¤„ç†
  const settingsKeywords = ['è®¾ç½®', 'é…ç½®', 'settings', 'åå¥½', 'é€‰é¡¹']
  if (settingsKeywords.some(keyword => lowerQuery.includes(keyword))) {
    showSettings.value = true
    return { success: true, message: 'å·²æ‰“å¼€è®¾ç½®' }
  }
  
  // æœç´¢ç›¸å…³å¤„ç†
  const searchKeywords = ['æœç´¢', 'search', 'æŸ¥æ‰¾', 'å¯»æ‰¾']
  if (searchKeywords.some(keyword => lowerQuery.includes(keyword))) {
    const content = query.replace(new RegExp(searchKeywords.join('|'), 'gi'), '').trim()
    if (content) {
      handleSearch(content)
      return { success: true, message: `æ­£åœ¨æœç´¢: ${content}` }
    }
  }
  
  // é»˜è®¤å¤„ç†ï¼šå…¨å±€æœç´¢
  handleSearch(query)
  return { success: true, message: `æ­£åœ¨æœç´¢: ${query}` }
}

// åˆ›å»ºç¬”è®°çš„è¾…åŠ©å‡½æ•°
const createNote = async (content: string) => {
  try {
    const newNote = {
      id: Date.now(),
      title: content.length > 20 ? content.substring(0, 20) + '...' : content,
      content: content,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
      tags: []
    }
    
    await DatabaseManager.saveNote(newNote)
    ElMessage.success('ç¬”è®°åˆ›å»ºæˆåŠŸï¼')
    setActiveModule('notes')
    return { success: true, message: 'ç¬”è®°åˆ›å»ºæˆåŠŸ' }
  } catch (error) {
    console.error('åˆ›å»ºç¬”è®°å¤±è´¥:', error)
    ElMessage.error('åˆ›å»ºç¬”è®°å¤±è´¥ï¼Œè¯·é‡è¯•')
    return { success: false, message: 'åˆ›å»ºç¬”è®°å¤±è´¥' }
  }
}

// åˆ›å»ºå¾…åŠäº‹é¡¹çš„è¾…åŠ©å‡½æ•°
const createTodo = async (content: string) => {
  try {
    const newTodo = {
      id: Date.now(),
      title: content,
      completed: false,
      priority: 'medium' as const,
      dueDate: null,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    }
    
    await DatabaseManager.saveTask(newTodo)
    ElMessage.success('å¾…åŠäº‹é¡¹åˆ›å»ºæˆåŠŸï¼')
    setActiveModule('todos')
    return { success: true, message: 'å¾…åŠäº‹é¡¹åˆ›å»ºæˆåŠŸ' }
  } catch (error) {
    console.error('åˆ›å»ºå¾…åŠäº‹é¡¹å¤±è´¥:', error)
    ElMessage.error('åˆ›å»ºå¾…åŠäº‹é¡¹å¤±è´¥ï¼Œè¯·é‡è¯•')
    return { success: false, message: 'åˆ›å»ºå¾…åŠäº‹é¡¹å¤±è´¥' }
  }
}

const applySuggestion = async (suggestion: any) => {
  const query = searchQuery.value.trim()
  
  switch (suggestion.type) {
    case 'notes':
      if (suggestion.action === 'create' && query) {
        const content = query.replace(/ç¬”è®°|è®°äº‹|note|åˆ›å»ºç¬”è®°/gi, '').trim() || query
        await createNote(content)
      } else {
        setActiveModule('notes')
      }
      break
    case 'chat':
      setActiveModule('chat')
      if (suggestion.action === 'chat' && query) {
        const content = query.replace(/ai|å¯¹è¯|èŠå¤©|chat|è¯¢é—®AI/gi, '').trim()
        if (content) {
          ElMessage.success(`æ­£åœ¨ä¸ºæ‚¨å‡†å¤‡AIå¯¹è¯: ${content}`)
        }
      }
      break
    case 'todos':
      if (suggestion.action === 'create' && query) {
        const content = query.replace(/å¾…åŠ|ä»»åŠ¡|todo|åˆ›å»ºä»»åŠ¡/gi, '').trim() || query
        await createTodo(content)
      } else {
        setActiveModule('todos')
      }
      break
    case 'settings':
      showSettings.value = true
      break
    case 'search':
      const searchContent = query.replace(/æœç´¢|search|æŸ¥æ‰¾|å¯»æ‰¾/gi, '').trim() || query
      handleSearch(searchContent)
      break
  }
  
  searchQuery.value = ''
  searchSuggestions.value = []
}

// å¼€å§‹AIå¤§çˆ†ç‚¸
const startConsultation = (consultation: any) => {
  // è·³è½¬åˆ°AIå¤§çˆ†ç‚¸é¡µé¢
  router.push({
    path: '/ai-consultation',
    query: {
      service: consultation.service || 'writing'
    }
  })
  console.log('å¼€å§‹AIå¤§çˆ†ç‚¸:', consultation.title)
}

// ç»Ÿä¸€ä¿¡æ¯æµç›¸å…³æ–¹æ³•
const getPriorityText = (priority: string) => {
  const priorityMap = {
    urgent: 'ç´§æ€¥',
    high: 'é‡è¦',
    medium: 'æ™®é€š',
    low: 'ä½ä¼˜å…ˆçº§'
  }
  return priorityMap[priority] || priority
}

const handleStreamItemClick = (item: any) => {
  if (!item) {
    console.warn('ç‚¹å‡»çš„é¡¹ç›®ä¸ºç©º')
    return
  }
  
  try {
    if (item.originalType === 'todo') {
      setActiveModule('todos')
    } else if (item.originalType === 'consultation') {
      startAIConsultation(item.originalData)
    } else if (item.originalType === 'ai-news') {
      // å¤„ç†AIåŠ¨æ€ä¿¡æ¯ç‚¹å‡»ï¼Œæ˜¾ç¤ºè¯¦ç»†å†…å®¹
      if (item.originalData && item.originalData.fullContent) {
        showAINewsDetail(item)
      } else {
        ElMessage.warning('æš‚æ— è¯¦ç»†å†…å®¹')
      }
    } else {
      console.warn('æœªçŸ¥çš„é¡¹ç›®ç±»å‹:', item)
    }
  } catch (error) {
    console.error('å¤„ç†é¡¹ç›®ç‚¹å‡»å¤±è´¥:', error)
    ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•')
  }
}

// æ˜¾ç¤ºAIåŠ¨æ€è¯¦æƒ…
const showAINewsDetail = (item: any) => {
  ElMessageBox({
    title: item.title,
    message: h('div', {
      style: {
        maxHeight: '60vh',
        overflow: 'auto',
        padding: '10px 0',
        lineHeight: '1.6',
        fontSize: '14px'
      }
    }, [
      h('div', {
        style: {
          display: 'flex',
          alignItems: 'center',
          marginBottom: '15px',
          paddingBottom: '10px',
          borderBottom: '1px solid #eee'
        }
      }, [
        h('span', { style: { fontSize: '20px', marginRight: '8px' } }, item.icon),
        h('span', { style: { color: '#409eff', fontSize: '12px', fontWeight: 'bold' } }, item.type),
        h('span', { style: { marginLeft: 'auto', color: '#999', fontSize: '12px' } }, item.time)
      ]),
      h('div', {
        style: {
          whiteSpace: 'pre-line',
          color: '#333'
        }
      }, item.originalData.fullContent),
      h('div', {
        style: {
          marginTop: '20px',
          paddingTop: '15px',
          borderTop: '1px solid #eee',
          textAlign: 'center'
        }
      }, [
        h('a', {
          href: item.originalData.url,
          target: '_blank',
          style: {
            color: '#409eff',
            textDecoration: 'none',
            fontSize: '12px'
          }
        }, 'æŸ¥çœ‹åŸæ–‡é“¾æ¥ â†’')
      ])
    ]),
    showCancelButton: false,
    confirmButtonText: 'å…³é—­',
    customClass: 'ai-news-detail-dialog',
    dangerouslyUseHTMLString: false
  }).catch(() => {})
}

// å¯åŠ¨AIå’¨è¯¢
const startAIConsultation = (consultationData: any) => {
  try {
    // åˆ‡æ¢åˆ°AIå’¨è¯¢æ¨¡å—
    setActiveModule('ai-consultation')
    
    // å¦‚æœæœ‰å’¨è¯¢æ•°æ®ï¼Œå¯ä»¥åœ¨è¿™é‡Œå¤„ç†
    if (consultationData) {
      console.log('å¯åŠ¨AIå’¨è¯¢ï¼Œæ•°æ®:', consultationData)
      // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤šçš„å’¨è¯¢æ•°æ®å¤„ç†é€»è¾‘
      // æ¯”å¦‚è®¾ç½®åˆå§‹é—®é¢˜ã€å†å²è®°å½•ç­‰
    }
    
    ElMessage.success('å·²åˆ‡æ¢åˆ°AIå’¨è¯¢')
  } catch (error) {
    console.error('å¯åŠ¨AIå’¨è¯¢å¤±è´¥:', error)
    ElMessage.error('å¯åŠ¨AIå’¨è¯¢å¤±è´¥ï¼Œè¯·é‡è¯•')
  }
}

const setCurrentStreamIndex = (index: number) => {
  currentStreamIndex.value = index
  resetStreamTimer()
}

const startStreamRotation = () => {
  if (streamItems.value.length <= 1) return
  
  streamTimer.value = setInterval(() => {
    currentStreamIndex.value = (currentStreamIndex.value + 1) % streamItems.value.length
  }, 5000) // æ¯5ç§’åˆ‡æ¢ä¸€æ¬¡
}

const resetStreamTimer = () => {
  if (streamTimer.value) {
    clearInterval(streamTimer.value)
    streamTimer.value = null
  }
  startStreamRotation()
}

const buildStreamItems = () => {
  const items = []
  
  // å…ˆæ·»åŠ AIæœ€æ–°åŠ¨æ€ä¿¡æ¯ï¼ˆä¼˜å…ˆæ˜¾ç¤ºï¼Œä¸°å¯Œå†…å®¹ï¼‰
  const aiUpdates = [
    {
      icon: 'ğŸš€',
      type: 'AIåŠ¨æ€',
      title: 'OpenAI GPT-4o é‡å¤§æ›´æ–°',
      description: 'OpenAIå‘å¸ƒGPT-4oæœ€æ–°ç‰ˆæœ¬ï¼Œåœ¨å¤šæ¨¡æ€ç†è§£ã€ä»£ç ç”Ÿæˆå’Œåˆ›æ„å†™ä½œæ–¹é¢å®ç°é‡å¤§çªç ´ã€‚æ–°ç‰ˆæœ¬æ”¯æŒæ›´é•¿çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œå¤„ç†å¤æ‚ä»»åŠ¡çš„å‡†ç¡®æ€§æå‡40%ï¼ŒåŒæ—¶æ¨ç†é€Ÿåº¦æå‡2å€ã€‚ç‰¹åˆ«åœ¨å›¾åƒåˆ†æã€æ–‡æ¡£ç†è§£å’Œç¼–ç¨‹è¾…åŠ©æ–¹é¢è¡¨ç°å“è¶Šï¼Œä¸ºå¼€å‘è€…å’Œåˆ›ä½œè€…å¸¦æ¥å…¨æ–°ä½“éªŒã€‚',
      priority: 'high',
      time: '2å°æ—¶å‰',
      actionText: 'äº†è§£è¯¦æƒ…',
      originalType: 'ai-news',
      originalData: { 
        url: 'https://openai.com/gpt-4o',
        fullContent: 'OpenAIä»Šæ—¥æ­£å¼å‘å¸ƒGPT-4oçš„é‡å¤§æ›´æ–°ç‰ˆæœ¬ï¼Œè¿™æ˜¯ç»§GPT-4å‘å¸ƒä»¥æ¥æœ€é‡è¦çš„æŠ€æœ¯çªç ´ã€‚æ–°ç‰ˆæœ¬åœ¨å¤šä¸ªæ ¸å¿ƒèƒ½åŠ›ä¸Šå®ç°äº†æ˜¾è‘—æå‡ï¼š\n\n**å¤šæ¨¡æ€ç†è§£èƒ½åŠ›**ï¼šæ”¯æŒåŒæ—¶å¤„ç†æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘å’Œè§†é¢‘å†…å®¹ï¼Œèƒ½å¤Ÿç†è§£å¤æ‚çš„å¤šåª’ä½“ä¿¡æ¯å¹¶ç”Ÿæˆç›¸åº”çš„å›åº”ã€‚åœ¨å›¾åƒåˆ†æä»»åŠ¡ä¸­ï¼Œå‡†ç¡®ç‡æå‡äº†35%ï¼Œç‰¹åˆ«æ˜¯åœ¨åŒ»å­¦å½±åƒã€å·¥ç¨‹å›¾çº¸å’Œè‰ºæœ¯ä½œå“åˆ†ææ–¹é¢è¡¨ç°çªå‡ºã€‚\n\n**ä»£ç ç”Ÿæˆä¼˜åŒ–**ï¼šç¼–ç¨‹èƒ½åŠ›å¤§å¹…æå‡ï¼Œæ”¯æŒ50+ç¼–ç¨‹è¯­è¨€ï¼Œä»£ç è´¨é‡å’Œæ‰§è¡Œæ•ˆç‡æ˜¾è‘—æ”¹å–„ã€‚æ–°å¢äº†ä»£ç å®¡æŸ¥ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®å’Œå®‰å…¨æ¼æ´æ£€æµ‹åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…å†™å‡ºæ›´é«˜è´¨é‡çš„ä»£ç ã€‚\n\n**åˆ›æ„å†™ä½œå¢å¼º**ï¼šåœ¨æ–‡å­¦åˆ›ä½œã€è¥é”€æ–‡æ¡ˆã€å­¦æœ¯å†™ä½œç­‰é¢†åŸŸè¡¨ç°æ›´åŠ å‡ºè‰²ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·éœ€æ±‚è°ƒæ•´å†™ä½œé£æ ¼å’Œè¯­è°ƒï¼Œç”Ÿæˆæ›´å…·ä¸ªæ€§åŒ–çš„å†…å®¹ã€‚\n\n**ä¸Šä¸‹æ–‡çª—å£æ‰©å±•**ï¼šæ”¯æŒå¤„ç†æ›´é•¿çš„æ–‡æ¡£å’Œå¯¹è¯å†å²ï¼Œæœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦æå‡è‡³128K tokensï¼Œèƒ½å¤Ÿå¤„ç†å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£ã€å­¦æœ¯è®ºæ–‡å’Œé•¿ç¯‡å°è¯´ã€‚\n\n**æ¨ç†é€Ÿåº¦ä¼˜åŒ–**ï¼šé€šè¿‡ç®—æ³•ä¼˜åŒ–å’Œç¡¬ä»¶å‡çº§ï¼Œå“åº”é€Ÿåº¦æå‡2å€ï¼ŒåŒæ—¶ä¿æŒé«˜è´¨é‡è¾“å‡ºã€‚è¿™ä½¿å¾—å®æ—¶å¯¹è¯å’Œå¤§è§„æ¨¡åº”ç”¨æˆä¸ºå¯èƒ½ã€‚\n\nè¿™æ¬¡æ›´æ–°æ ‡å¿—ç€AIæŠ€æœ¯åœ¨å®ç”¨æ€§å’Œå¯é æ€§æ–¹é¢çš„é‡è¦è¿›æ­¥ï¼Œä¸ºå„è¡Œå„ä¸šçš„æ•°å­—åŒ–è½¬å‹æä¾›äº†å¼ºæœ‰åŠ›çš„æŠ€æœ¯æ”¯æ’‘ã€‚'
      }
    },
    {
      icon: 'âš¡',
      type: 'AIåŠ¨æ€',
      title: 'Claude 3.5 ç¼–ç¨‹èƒ½åŠ›çªç ´',
      description: 'Anthropicå‘å¸ƒClaude 3.5 Sonnetæœ€æ–°ç‰ˆæœ¬ï¼Œåœ¨å¤æ‚ç¼–ç¨‹ä»»åŠ¡ä¸­è¡¨ç°è¶…è¶ŠGPT-4ã€‚æ–°ç‰ˆæœ¬åœ¨ä»£ç ç†è§£ã€è°ƒè¯•å’Œé‡æ„æ–¹é¢å®ç°é‡å¤§çªç ´ï¼Œæ”¯æŒå…¨æ ˆå¼€å‘è¾…åŠ©ï¼Œèƒ½å¤Ÿå¤„ç†å¤§å‹é¡¹ç›®æ¶æ„è®¾è®¡ã€‚ç‰¹åˆ«åœ¨Pythonã€JavaScriptã€Goç­‰ä¸»æµè¯­è¨€çš„ä»£ç è´¨é‡è¯„ä¼°å’Œä¼˜åŒ–å»ºè®®æ–¹é¢è¡¨ç°å“è¶Šã€‚',
      priority: 'high',
      time: '6å°æ—¶å‰',
      actionText: 'æŸ¥çœ‹æ›´æ–°',
      originalType: 'ai-news',
      originalData: { 
        url: 'https://anthropic.com/claude-3-5',
        fullContent: 'Anthropicä»Šæ—¥å®£å¸ƒClaude 3.5 Sonnetçš„é‡å¤§æ›´æ–°ï¼Œè¿™æ˜¯è¯¥å…¬å¸åœ¨AIç¼–ç¨‹è¾…åŠ©é¢†åŸŸçš„é‡è¦é‡Œç¨‹ç¢‘ã€‚æ–°ç‰ˆæœ¬åœ¨å¤šä¸ªæŠ€æœ¯ç»´åº¦å®ç°äº†çªç ´æ€§è¿›å±•ï¼š\n\n**ä»£ç ç†è§£èƒ½åŠ›**ï¼šèƒ½å¤Ÿæ·±åº¦ç†è§£å¤æ‚çš„ä»£ç é€»è¾‘å’Œæ¶æ„è®¾è®¡ï¼Œå‡†ç¡®è¯†åˆ«ä»£ç ä¸­çš„è®¾è®¡æ¨¡å¼ã€ç®—æ³•å®ç°å’Œæ½œåœ¨é—®é¢˜ã€‚åœ¨ä»£ç å®¡æŸ¥ä»»åŠ¡ä¸­ï¼Œå‡†ç¡®ç‡è¾¾åˆ°95%ä»¥ä¸Šï¼Œè¶…è¶Šäº†äººç±»é«˜çº§å·¥ç¨‹å¸ˆçš„å¹³å‡æ°´å¹³ã€‚\n\n**è°ƒè¯•å’Œé”™è¯¯ä¿®å¤**ï¼šå…·å¤‡å¼ºå¤§çš„è°ƒè¯•èƒ½åŠ›ï¼Œèƒ½å¤Ÿå¿«é€Ÿå®šä½bugçš„æ ¹æœ¬åŸå› ï¼Œå¹¶æä¾›å¤šç§ä¿®å¤æ–¹æ¡ˆã€‚æ”¯æŒé™æ€ä»£ç åˆ†æã€è¿è¡Œæ—¶é”™è¯¯è¯Šæ–­å’Œæ€§èƒ½ç“¶é¢ˆè¯†åˆ«ã€‚\n\n**ä»£ç é‡æ„ä¼˜åŒ–**ï¼šèƒ½å¤Ÿåˆ†æç°æœ‰ä»£ç çš„ç»“æ„å’Œæ€§èƒ½ï¼Œæä¾›é‡æ„å»ºè®®ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§å’Œæ‰§è¡Œæ•ˆç‡ã€‚æ”¯æŒå¤§è§„æ¨¡ä»£ç åº“çš„é‡æ„è§„åˆ’å’Œå®æ–½æŒ‡å¯¼ã€‚\n\n**å…¨æ ˆå¼€å‘æ”¯æŒ**ï¼šä»å‰ç«¯UIè®¾è®¡åˆ°åç«¯APIå¼€å‘ï¼Œä»æ•°æ®åº“è®¾è®¡åˆ°éƒ¨ç½²é…ç½®ï¼Œæä¾›å…¨æ–¹ä½çš„å¼€å‘è¾…åŠ©ã€‚ç‰¹åˆ«åœ¨å¾®æœåŠ¡æ¶æ„ã€äº‘åŸç”Ÿåº”ç”¨å’ŒDevOpså®è·µæ–¹é¢è¡¨ç°çªå‡ºã€‚\n\n**å¤šè¯­è¨€ç²¾é€š**ï¼šæ·±åº¦æ”¯æŒPythonã€JavaScriptã€TypeScriptã€Goã€Rustã€Javaã€C++ç­‰ä¸»æµç¼–ç¨‹è¯­è¨€ï¼Œèƒ½å¤Ÿè¿›è¡Œè·¨è¯­è¨€çš„ä»£ç è½¬æ¢å’Œæœ€ä½³å®è·µå»ºè®®ã€‚\n\n**é¡¹ç›®æ¶æ„è®¾è®¡**ï¼šèƒ½å¤Ÿæ ¹æ®éœ€æ±‚åˆ†æï¼Œè®¾è®¡åˆç†çš„ç³»ç»Ÿæ¶æ„ï¼ŒåŒ…æ‹¬æŠ€æœ¯é€‰å‹ã€æ¨¡å—åˆ’åˆ†ã€æ¥å£è®¾è®¡ç­‰ï¼Œä¸ºå¤§å‹é¡¹ç›®æä¾›æŠ€æœ¯å†³ç­–æ”¯æŒã€‚\n\nè¿™æ¬¡æ›´æ–°ä½¿Claude 3.5æˆä¸ºå¼€å‘è€…çš„å¾—åŠ›åŠ©æ‰‹ï¼Œä¸ä»…èƒ½å¤Ÿæé«˜ç¼–ç¨‹æ•ˆç‡ï¼Œè¿˜èƒ½å¸®åŠ©å›¢é˜Ÿæå‡ä»£ç è´¨é‡å’Œé¡¹ç›®æˆåŠŸç‡ã€‚'
      }
    },
    {
      icon: 'ğŸ§ ',
      type: 'AIåŠ¨æ€',
      title: 'Gemini Ultra å¤šæ¨¡æ€å‡çº§',
      description: 'Googleæœ€æ–°å‘å¸ƒçš„Gemini Ultraåœ¨å›¾åƒç†è§£å’Œè§†é¢‘åˆ†æèƒ½åŠ›æ–¹é¢å®ç°å¤§å¹…æå‡ã€‚æ–°ç‰ˆæœ¬æ”¯æŒå®æ—¶è§†é¢‘æµåˆ†æï¼Œèƒ½å¤Ÿè¯†åˆ«å¤æ‚åœºæ™¯ä¸­çš„å¤šä¸ªå¯¹è±¡å’ŒåŠ¨ä½œï¼Œå‡†ç¡®ç‡æå‡50%ã€‚åœ¨åŒ»ç–—å½±åƒè¯Šæ–­ã€è‡ªåŠ¨é©¾é©¶è§†è§‰ç³»ç»Ÿå’Œæ™ºèƒ½ç›‘æ§ç­‰é¢†åŸŸå±•ç°å‡ºå·¨å¤§æ½œåŠ›ï¼Œä¸ºAIåœ¨å‚ç›´è¡Œä¸šçš„åº”ç”¨å¼€è¾Ÿäº†æ–°çš„å¯èƒ½æ€§ã€‚',
      priority: 'medium',
      time: '12å°æ—¶å‰',
      actionText: 'æ¢ç´¢åŠŸèƒ½',
      originalType: 'ai-news',
      originalData: { 
        url: 'https://deepmind.google/gemini-ultra',
        fullContent: 'Google DeepMindå›¢é˜Ÿä»Šæ—¥å‘å¸ƒGemini Ultraçš„é‡å¤§æ›´æ–°ï¼Œä¸“æ³¨äºå¤šæ¨¡æ€AIèƒ½åŠ›çš„å…¨é¢æå‡ã€‚è¿™æ¬¡æ›´æ–°åœ¨è§†è§‰ç†è§£å’Œåˆ†ææ–¹é¢å®ç°äº†é©å‘½æ€§çªç ´ï¼š\n\n**å›¾åƒç†è§£å¢å¼º**ï¼šæ–°ç‰ˆæœ¬èƒ½å¤Ÿç†è§£å¤æ‚çš„è§†è§‰åœºæ™¯ï¼ŒåŒ…æ‹¬è‰ºæœ¯ä½œå“åˆ†æã€æŠ€æœ¯å›¾è¡¨è§£è¯»ã€åŒ»å­¦å½±åƒè¯Šæ–­ç­‰ã€‚åœ¨å›¾åƒæè¿°ä»»åŠ¡ä¸­ï¼Œå‡†ç¡®æ€§å’Œè¯¦ç»†ç¨‹åº¦éƒ½æœ‰æ˜¾è‘—æå‡ï¼Œèƒ½å¤Ÿè¯†åˆ«ç»†å¾®çš„è§†è§‰å…ƒç´ å’Œä¸Šä¸‹æ–‡å…³ç³»ã€‚\n\n**å®æ—¶è§†é¢‘åˆ†æ**ï¼šæ”¯æŒå®æ—¶è§†é¢‘æµå¤„ç†ï¼Œèƒ½å¤Ÿè·Ÿè¸ªå¤šä¸ªå¯¹è±¡çš„è¿åŠ¨è½¨è¿¹ï¼Œç†è§£åŠ¨ä½œåºåˆ—å’Œè¡Œä¸ºæ¨¡å¼ã€‚è¿™é¡¹æŠ€æœ¯åœ¨ä½“è‚²åˆ†æã€å®‰å…¨ç›‘æ§å’Œè‡ªåŠ¨é©¾é©¶ç­‰é¢†åŸŸå…·æœ‰é‡è¦åº”ç”¨ä»·å€¼ã€‚\n\n**3Dç©ºé—´ç†è§£**ï¼šå…·å¤‡ä¸‰ç»´ç©ºé—´æ„ŸçŸ¥èƒ½åŠ›ï¼Œèƒ½å¤Ÿç†è§£ç‰©ä½“çš„ç©ºé—´å…³ç³»ã€æ·±åº¦ä¿¡æ¯å’Œå‡ ä½•ç»“æ„ã€‚è¿™ä¸ºAR/VRåº”ç”¨ã€æœºå™¨äººå¯¼èˆªå’Œå»ºç­‘è®¾è®¡ç­‰é¢†åŸŸæä¾›äº†å¼ºå¤§çš„æŠ€æœ¯æ”¯æ’‘ã€‚\n\n**è·¨æ¨¡æ€æ¨ç†**ï¼šèƒ½å¤Ÿç»“åˆæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§ä¿¡æ¯æºè¿›è¡Œç»¼åˆæ¨ç†ï¼Œæä¾›æ›´å‡†ç¡®å’Œå…¨é¢çš„åˆ†æç»“æœã€‚åœ¨å¤æ‚å†³ç­–ä»»åŠ¡ä¸­è¡¨ç°å‡ºè‰²ã€‚\n\n**è¡Œä¸šåº”ç”¨çªç ´**ï¼š\n- åŒ»ç–—é¢†åŸŸï¼šè¾…åŠ©åŒ»ç”Ÿè¿›è¡Œå½±åƒè¯Šæ–­ï¼Œæé«˜è¯Šæ–­å‡†ç¡®ç‡å’Œæ•ˆç‡\n- è‡ªåŠ¨é©¾é©¶ï¼šå¢å¼ºè½¦è¾†çš„ç¯å¢ƒæ„ŸçŸ¥å’Œå†³ç­–èƒ½åŠ›\n- æ™ºèƒ½åˆ¶é€ ï¼šå®ç°ç”Ÿäº§çº¿çš„æ™ºèƒ½ç›‘æ§å’Œè´¨é‡æ§åˆ¶\n- æ•™è‚²ç§‘ç ”ï¼šä¸ºç§‘å­¦ç ”ç©¶æä¾›å¼ºå¤§çš„æ•°æ®åˆ†æå·¥å…·\n\nè¿™æ¬¡æ›´æ–°æ ‡å¿—ç€AIæŠ€æœ¯åœ¨å¤šæ¨¡æ€ç†è§£æ–¹é¢çš„é‡è¦è¿›æ­¥ï¼Œä¸ºå„è¡Œå„ä¸šçš„æ™ºèƒ½åŒ–è½¬å‹æä¾›äº†æ–°çš„æŠ€æœ¯è·¯å¾„ã€‚'
      }
    },
    {
      icon: 'ğŸ”¬',
      type: 'AIåŠ¨æ€',
      title: 'Metaå‘å¸ƒCode Llama 2.0',
      description: 'Meta AIå›¢é˜Ÿå‘å¸ƒCode Llama 2.0ï¼Œè¿™æ˜¯ä¸“é—¨é’ˆå¯¹ä»£ç ç”Ÿæˆå’Œç†è§£ä¼˜åŒ–çš„å¤§è¯­è¨€æ¨¡å‹ã€‚æ–°ç‰ˆæœ¬åœ¨ä»£ç è¡¥å…¨ã€bugä¿®å¤å’Œä»£ç è§£é‡Šæ–¹é¢è¡¨ç°å“è¶Šï¼Œæ”¯æŒ100+ç¼–ç¨‹è¯­è¨€ã€‚æ¨¡å‹é‡‡ç”¨å…¨æ–°çš„è®­ç»ƒæ¶æ„ï¼Œåœ¨ä¿æŒé«˜è´¨é‡è¾“å‡ºçš„åŒæ—¶ï¼Œæ¨ç†é€Ÿåº¦æå‡3å€ï¼Œä¸ºå¼€å‘è€…æä¾›æ›´é«˜æ•ˆçš„ç¼–ç¨‹è¾…åŠ©ä½“éªŒã€‚',
      priority: 'medium',
      time: '1å¤©å‰',
      actionText: 'äº†è§£è¯¦æƒ…',
      originalType: 'ai-news',
      originalData: { 
        url: 'https://ai.meta.com/code-llama',
        fullContent: 'Meta AIå›¢é˜Ÿæ­£å¼å‘å¸ƒCode Llama 2.0ï¼Œè¿™æ˜¯ç»§ç¬¬ä¸€ä»£Code Llamaä¹‹åçš„é‡å¤§å‡çº§ç‰ˆæœ¬ã€‚æ–°ç‰ˆæœ¬ä¸“æ³¨äºæå‡ä»£ç ç›¸å…³ä»»åŠ¡çš„å¤„ç†èƒ½åŠ›ï¼š\n\n**ä»£ç ç”Ÿæˆä¼˜åŒ–**ï¼šæ”¯æŒ100+ç¼–ç¨‹è¯­è¨€çš„ä»£ç ç”Ÿæˆï¼ŒåŒ…æ‹¬ä¸»æµè¯­è¨€å¦‚Pythonã€JavaScriptã€Javaã€C++ï¼Œä»¥åŠæ–°å…´è¯­è¨€å¦‚Rustã€Goã€Swiftç­‰ã€‚ç”Ÿæˆçš„ä»£ç è´¨é‡æ›´é«˜ï¼Œè¯­æ³•é”™è¯¯ç‡é™ä½80%ã€‚\n\n**æ™ºèƒ½ä»£ç è¡¥å…¨**ï¼šæä¾›ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ä»£ç è¡¥å…¨åŠŸèƒ½ï¼Œèƒ½å¤Ÿç†è§£é¡¹ç›®ç»“æ„å’Œç¼–ç é£æ ¼ï¼Œç”Ÿæˆç¬¦åˆé¡¹ç›®è§„èŒƒçš„ä»£ç ç‰‡æ®µã€‚æ”¯æŒå‡½æ•°ã€ç±»ã€æ¨¡å—ç­‰ä¸åŒç²’åº¦çš„ä»£ç è¡¥å…¨ã€‚\n\n**Bugæ£€æµ‹ä¸ä¿®å¤**ï¼šå…·å¤‡å¼ºå¤§çš„ä»£ç åˆ†æèƒ½åŠ›ï¼Œèƒ½å¤Ÿè¯†åˆ«å¸¸è§çš„ç¼–ç¨‹é”™è¯¯ã€æ€§èƒ½é—®é¢˜å’Œå®‰å…¨æ¼æ´ï¼Œå¹¶æä¾›å…·ä½“çš„ä¿®å¤å»ºè®®å’Œä»£ç ç¤ºä¾‹ã€‚\n\n**ä»£ç è§£é‡Šä¸æ–‡æ¡£**ï¼šèƒ½å¤Ÿä¸ºå¤æ‚çš„ä»£ç é€»è¾‘ç”Ÿæˆæ¸…æ™°çš„æ³¨é‡Šå’Œæ–‡æ¡£ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£å’Œç»´æŠ¤ä»£ç ã€‚æ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼å’Œæ³¨é‡Šé£æ ¼ã€‚\n\n**æ€§èƒ½ä¼˜åŒ–**ï¼š\n- æ¨ç†é€Ÿåº¦æå‡3å€ï¼Œå“åº”æ›´åŠ è¿…é€Ÿ\n- å†…å­˜ä½¿ç”¨ä¼˜åŒ–ï¼Œæ”¯æŒåœ¨èµ„æºå—é™çš„ç¯å¢ƒä¸­è¿è¡Œ\n- æ”¯æŒæ‰¹é‡å¤„ç†ï¼Œæé«˜å¤§è§„æ¨¡ä»£ç åˆ†æçš„æ•ˆç‡\n\n**é›†æˆå‹å¥½**ï¼šæä¾›ä¸°å¯Œçš„APIæ¥å£å’ŒSDKï¼Œæ–¹ä¾¿é›†æˆåˆ°å„ç§å¼€å‘å·¥å…·å’ŒIDEä¸­ã€‚æ”¯æŒVS Codeã€IntelliJ IDEAã€Vimç­‰ä¸»æµç¼–è¾‘å™¨çš„æ’ä»¶å¼€å‘ã€‚\n\nCode Llama 2.0çš„å‘å¸ƒä¸ºå¼€å‘è€…ç¤¾åŒºå¸¦æ¥äº†æ›´å¼ºå¤§çš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Œæœ‰æœ›æ˜¾è‘—æå‡è½¯ä»¶å¼€å‘çš„æ•ˆç‡å’Œè´¨é‡ã€‚'
      }
    },
    {
      icon: 'ğŸ¨',
      type: 'AIåŠ¨æ€',
      title: 'Midjourney V6 è‰ºæœ¯åˆ›ä½œé©æ–°',
      description: 'Midjourneyå‘å¸ƒV6ç‰ˆæœ¬ï¼Œåœ¨è‰ºæœ¯åˆ›ä½œå’Œå›¾åƒç”Ÿæˆæ–¹é¢å®ç°é‡å¤§çªç ´ã€‚æ–°ç‰ˆæœ¬æ”¯æŒæ›´ç²¾ç¡®çš„æç¤ºè¯ç†è§£ï¼Œå›¾åƒè´¨é‡å’Œç»†èŠ‚è¡¨ç°åŠ›æ˜¾è‘—æå‡ã€‚å¢åŠ äº†é£æ ¼ä¸€è‡´æ€§æ§åˆ¶ã€äººç‰©é¢éƒ¨ä¼˜åŒ–å’Œå»ºç­‘è®¾è®¡ç­‰ä¸“ä¸šåŠŸèƒ½ï¼Œä¸ºè®¾è®¡å¸ˆã€è‰ºæœ¯å®¶å’Œåˆ›æ„å·¥ä½œè€…æä¾›æ›´å¼ºå¤§çš„åˆ›ä½œå·¥å…·ï¼Œå¼€å¯AIè¾…åŠ©åˆ›æ„è®¾è®¡çš„æ–°æ—¶ä»£ã€‚',
      priority: 'medium',
      time: '2å¤©å‰',
      actionText: 'æŸ¥çœ‹ä½œå“',
      originalType: 'ai-news',
      originalData: { 
        url: 'https://midjourney.com/v6',
        fullContent: 'Midjourneyå›¢é˜Ÿå‘å¸ƒäº†å¤‡å—æœŸå¾…çš„V6ç‰ˆæœ¬ï¼Œè¿™æ˜¯è¯¥å¹³å°åœ¨AIè‰ºæœ¯ç”Ÿæˆé¢†åŸŸçš„åˆä¸€é‡å¤§çªç ´ã€‚æ–°ç‰ˆæœ¬åœ¨å¤šä¸ªæ–¹é¢å®ç°äº†æ˜¾è‘—æ”¹è¿›ï¼š\n\n**æç¤ºè¯ç†è§£å‡çº§**ï¼šV6ç‰ˆæœ¬å¯¹è‡ªç„¶è¯­è¨€æç¤ºè¯çš„ç†è§£èƒ½åŠ›å¤§å¹…æå‡ï¼Œèƒ½å¤Ÿæ›´å‡†ç¡®åœ°æ•æ‰ç”¨æˆ·çš„åˆ›æ„æ„å›¾ã€‚æ”¯æŒå¤æ‚çš„åœºæ™¯æè¿°ã€æƒ…æ„Ÿè¡¨è¾¾å’Œè‰ºæœ¯é£æ ¼æŒ‡å®šã€‚\n\n**å›¾åƒè´¨é‡æå‡**ï¼šç”Ÿæˆå›¾åƒçš„åˆ†è¾¨ç‡ã€ç»†èŠ‚è¡¨ç°å’Œè‰²å½©è¿˜åŸåº¦éƒ½æœ‰æ˜¾è‘—æ”¹å–„ã€‚ç‰¹åˆ«åœ¨äººç‰©è‚–åƒã€è‡ªç„¶é£æ™¯å’Œå»ºç­‘è®¾è®¡æ–¹é¢ï¼Œè¾¾åˆ°äº†æ¥è¿‘ä¸“ä¸šæ‘„å½±çš„è´¨é‡æ°´å‡†ã€‚\n\n**é£æ ¼ä¸€è‡´æ€§æ§åˆ¶**ï¼šæ–°å¢é£æ ¼å‚è€ƒåŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ä¸Šä¼ å‚è€ƒå›¾åƒæ¥æŒ‡å¯¼ç”Ÿæˆé£æ ¼ï¼Œç¡®ä¿ç³»åˆ—ä½œå“çš„è§†è§‰ä¸€è‡´æ€§ã€‚è¿™å¯¹å“ç‰Œè®¾è®¡å’Œé¡¹ç›®åˆ›ä½œå…·æœ‰é‡è¦æ„ä¹‰ã€‚\n\n**ä¸“ä¸šåŠŸèƒ½å¢å¼º**ï¼š\n- äººç‰©é¢éƒ¨ä¼˜åŒ–ï¼šæ”¹å–„äººç‰©é¢éƒ¨ç‰¹å¾çš„ç”Ÿæˆè´¨é‡ï¼Œå‡å°‘å˜å½¢å’Œä¸è‡ªç„¶çš„è¡¨ç°\n- å»ºç­‘è®¾è®¡æ”¯æŒï¼šå¢å¼ºå¯¹å»ºç­‘ç»“æ„ã€ç©ºé—´å…³ç³»çš„ç†è§£å’Œè¡¨ç°èƒ½åŠ›\n- äº§å“è®¾è®¡è¾…åŠ©ï¼šæ”¯æŒå·¥ä¸šè®¾è®¡ã€åŒ…è£…è®¾è®¡ç­‰å•†ä¸šåº”ç”¨åœºæ™¯\n\n**åˆ›ä½œå·¥ä½œæµä¼˜åŒ–**ï¼š\n- æ‰¹é‡ç”ŸæˆåŠŸèƒ½ï¼Œæé«˜åˆ›ä½œæ•ˆç‡\n- ç‰ˆæœ¬å¯¹æ¯”å·¥å…·ï¼Œæ–¹ä¾¿é€‰æ‹©æœ€ä½³æ–¹æ¡ˆ\n- åä½œåŠŸèƒ½å¢å¼ºï¼Œæ”¯æŒå›¢é˜Ÿåˆ›ä½œé¡¹ç›®\n\n**åº”ç”¨é¢†åŸŸæ‹“å±•**ï¼š\n- å¹¿å‘Šè®¾è®¡ï¼šä¸ºè¥é”€æ´»åŠ¨æä¾›åˆ›æ„è§†è§‰ç´ æ\n- æ¸¸æˆå¼€å‘ï¼šè¾…åŠ©æ¦‚å¿µè®¾è®¡å’Œåœºæ™¯åˆ›ä½œ\n- å½±è§†åˆ¶ä½œï¼šæä¾›åˆ†é•œå¤´å’Œæ¦‚å¿µå›¾æ”¯æŒ\n- æ•™è‚²åŸ¹è®­ï¼šä¸ºè®¾è®¡æ•™å­¦æä¾›ä¸°å¯Œçš„æ¡ˆä¾‹ç´ æ\n\nMidjourney V6çš„å‘å¸ƒæ ‡å¿—ç€AIè‰ºæœ¯åˆ›ä½œå·¥å…·çš„æˆç†ŸåŒ–ï¼Œä¸ºåˆ›æ„äº§ä¸šå¸¦æ¥äº†æ–°çš„å¯èƒ½æ€§å’Œæœºé‡ã€‚'
      }
    }
  ]
  
  // æ·»åŠ AIå¤§çˆ†ç‚¸æœåŠ¡ï¼ˆä¸°å¯Œå†…å®¹ï¼‰
  const consultations = [
    {
      icon: 'âœï¸',
      type: 'AIå¤§çˆ†ç‚¸',
      title: 'æ™ºèƒ½å†™ä½œåŠ©æ‰‹',
      description: 'ä¸“ä¸šçš„AIå†™ä½œåŠ©æ‰‹ï¼Œæ”¯æŒå¤šç§æ–‡ä½“åˆ›ä½œåŒ…æ‹¬å•†åŠ¡é‚®ä»¶ã€å­¦æœ¯è®ºæ–‡ã€åˆ›æ„æ–‡æ¡ˆã€æŠ€æœ¯æ–‡æ¡£ç­‰ã€‚å…·å¤‡è¯­è¨€æ¶¦è‰²ã€ç»“æ„ä¼˜åŒ–ã€é£æ ¼è°ƒæ•´åŠŸèƒ½ï¼Œèƒ½å¤Ÿæ ¹æ®ç›®æ ‡å—ä¼—å’Œä½¿ç”¨åœºæ™¯ç”Ÿæˆé«˜è´¨é‡å†…å®¹ã€‚æ”¯æŒä¸­è‹±æ–‡å†™ä½œï¼Œæä¾›å®æ—¶è¯­æ³•æ£€æŸ¥å’Œæ”¹è¿›å»ºè®®ï¼Œè®©æ‚¨çš„æ–‡å­—è¡¨è¾¾æ›´åŠ ä¸“ä¸šå’Œæœ‰è¯´æœåŠ›ã€‚',
      priority: 'high',
      time: 'éšæ—¶å¯ç”¨',
      actionText: 'å¼€å§‹å†™ä½œ',
      originalType: 'consultation',
      originalData: { 
        id: '1', 
        service: 'writing',
        fullContent: 'æ™ºèƒ½å†™ä½œåŠ©æ‰‹æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„AIå†™ä½œå·¥å…·ï¼Œä¸ºç”¨æˆ·æä¾›å…¨æ–¹ä½çš„å†™ä½œæ”¯æŒå’Œä¼˜åŒ–æœåŠ¡ï¼š\n\n**å¤šæ–‡ä½“æ”¯æŒ**ï¼š\n- å•†åŠ¡å†™ä½œï¼šé‚®ä»¶ã€æŠ¥å‘Šã€ææ¡ˆã€åˆåŒç­‰å•†åŠ¡æ–‡æ¡£\n- å­¦æœ¯å†™ä½œï¼šè®ºæ–‡ã€ç ”ç©¶æŠ¥å‘Šã€æ–‡çŒ®ç»¼è¿°ã€å­¦æœ¯æ‘˜è¦\n- åˆ›æ„å†™ä½œï¼šå°è¯´ã€è¯—æ­Œã€å‰§æœ¬ã€å¹¿å‘Šæ–‡æ¡ˆ\n- æŠ€æœ¯å†™ä½œï¼šç”¨æˆ·æ‰‹å†Œã€APIæ–‡æ¡£ã€æŠ€æœ¯è§„èŒƒ\n- æ—¥å¸¸å†™ä½œï¼šæ—¥è®°ã€åšå®¢ã€ç¤¾äº¤åª’ä½“å†…å®¹\n\n**æ ¸å¿ƒåŠŸèƒ½**ï¼š\n- å†…å®¹ç”Ÿæˆï¼šæ ¹æ®ä¸»é¢˜å’Œè¦æ±‚ç”ŸæˆåŸåˆ›å†…å®¹\n- è¯­è¨€æ¶¦è‰²ï¼šæ”¹å–„è¯­æ³•ã€ç”¨è¯å’Œè¡¨è¾¾æ–¹å¼\n- ç»“æ„ä¼˜åŒ–ï¼šè°ƒæ•´æ–‡ç« é€»è¾‘ç»“æ„å’Œæ®µè½ç»„ç»‡\n- é£æ ¼è°ƒæ•´ï¼šé€‚åº”ä¸åŒçš„å†™ä½œé£æ ¼å’Œè¯­è°ƒ\n- å¤šè¯­è¨€æ”¯æŒï¼šä¸­æ–‡ã€è‹±æ–‡ç­‰å¤šç§è¯­è¨€å†™ä½œ\n\n**æ™ºèƒ½ç‰¹æ€§**ï¼š\n- ä¸Šä¸‹æ–‡ç†è§£ï¼šç†è§£å†™ä½œèƒŒæ™¯å’Œç›®æ ‡å—ä¼—\n- å®æ—¶å»ºè®®ï¼šæä¾›å³æ—¶çš„æ”¹è¿›å»ºè®®å’Œä¼˜åŒ–æ–¹æ¡ˆ\n- ç‰ˆæœ¬å¯¹æ¯”ï¼šå±•ç¤ºä¿®æ”¹å‰åçš„å¯¹æ¯”æ•ˆæœ\n- æ¨¡æ¿åº“ï¼šæä¾›ä¸°å¯Œçš„å†™ä½œæ¨¡æ¿å’ŒèŒƒä¾‹\n\n**åº”ç”¨åœºæ™¯**ï¼š\n- èŒåœºåŠå…¬ï¼šæå‡å•†åŠ¡æ²Ÿé€šæ•ˆç‡\n- å­¦æœ¯ç ”ç©¶ï¼šè¾…åŠ©å­¦æœ¯å†™ä½œå’Œå‘è¡¨\n- å†…å®¹åˆ›ä½œï¼šæ”¯æŒè‡ªåª’ä½“å’Œå†…å®¹è¥é”€\n- æ•™è‚²åŸ¹è®­ï¼šå¸®åŠ©å­¦ç”Ÿæé«˜å†™ä½œèƒ½åŠ›\n\nè®©AIæˆä¸ºæ‚¨çš„ä¸“ä¸šå†™ä½œä¼™ä¼´ï¼Œæå‡å†™ä½œæ•ˆç‡å’Œè´¨é‡ã€‚'
      }
    },
    {
      icon: 'ğŸ’»',
      type: 'AIå¤§çˆ†ç‚¸',
      title: 'ç¼–ç¨‹å¼€å‘é¡¾é—®',
      description: 'ä¸“ä¸šçš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Œæä¾›å…¨æ ˆå¼€å‘æ”¯æŒåŒ…æ‹¬å‰ç«¯ã€åç«¯ã€ç§»åŠ¨ç«¯å’Œæ¡Œé¢åº”ç”¨å¼€å‘ã€‚æ”¯æŒ50+ç¼–ç¨‹è¯­è¨€ï¼Œå…·å¤‡ä»£ç ç”Ÿæˆã€è°ƒè¯•ã€é‡æ„ã€æ€§èƒ½ä¼˜åŒ–ç­‰åŠŸèƒ½ã€‚èƒ½å¤Ÿè¿›è¡Œæ¶æ„è®¾è®¡å’¨è¯¢ã€æŠ€æœ¯é€‰å‹å»ºè®®ã€ä»£ç å®¡æŸ¥å’Œæœ€ä½³å®è·µæŒ‡å¯¼ï¼Œå¸®åŠ©å¼€å‘è€…æå‡ç¼–ç¨‹æŠ€èƒ½å’Œé¡¹ç›®è´¨é‡ã€‚',
      priority: 'high',
      time: 'éšæ—¶å¯ç”¨',
      actionText: 'å¼€å§‹ç¼–ç¨‹',
      originalType: 'consultation',
      originalData: { 
        id: '2', 
        service: 'coding',
        fullContent: 'ç¼–ç¨‹å¼€å‘é¡¾é—®æ˜¯ä¸“ä¸šçš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Œä¸ºå¼€å‘è€…æä¾›å…¨æ–¹ä½çš„æŠ€æœ¯æ”¯æŒå’Œå¼€å‘æŒ‡å¯¼ï¼š\n\n**æŠ€æœ¯æ ˆæ”¯æŒ**ï¼š\n- å‰ç«¯å¼€å‘ï¼šReactã€Vueã€Angularã€HTML/CSS/JavaScript\n- åç«¯å¼€å‘ï¼šNode.jsã€Pythonã€Javaã€Goã€C#ã€PHP\n- ç§»åŠ¨å¼€å‘ï¼šReact Nativeã€Flutterã€iOSã€Android\n- æ¡Œé¢åº”ç”¨ï¼šElectronã€Qtã€WPFã€Swing\n- æ•°æ®åº“ï¼šMySQLã€PostgreSQLã€MongoDBã€Redis\n- äº‘æœåŠ¡ï¼šAWSã€Azureã€Google Cloudã€é˜¿é‡Œäº‘\n\n**æ ¸å¿ƒæœåŠ¡**ï¼š\n- ä»£ç ç”Ÿæˆï¼šæ ¹æ®éœ€æ±‚ç”Ÿæˆé«˜è´¨é‡ä»£ç \n- ä»£ç å®¡æŸ¥ï¼šè¯†åˆ«æ½œåœ¨é—®é¢˜å’Œæ”¹è¿›æœºä¼š\n- è°ƒè¯•æ”¯æŒï¼šå¿«é€Ÿå®šä½å’Œè§£å†³bug\n- æ€§èƒ½ä¼˜åŒ–ï¼šæå‡åº”ç”¨æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ\n- é‡æ„æŒ‡å¯¼ï¼šæ”¹å–„ä»£ç ç»“æ„å’Œå¯ç»´æŠ¤æ€§\n\n**æ¶æ„å’¨è¯¢**ï¼š\n- ç³»ç»Ÿè®¾è®¡ï¼šå¾®æœåŠ¡ã€åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„\n- æŠ€æœ¯é€‰å‹ï¼šæ ¹æ®é¡¹ç›®éœ€æ±‚æ¨èæœ€ä½³æŠ€æœ¯æ ˆ\n- æ•°æ®åº“è®¾è®¡ï¼šä¼˜åŒ–æ•°æ®æ¨¡å‹å’ŒæŸ¥è¯¢æ€§èƒ½\n- å®‰å…¨å’¨è¯¢ï¼šä»£ç å®‰å…¨å’Œç³»ç»Ÿå®‰å…¨æœ€ä½³å®è·µ\n\n**å­¦ä¹ æ”¯æŒ**ï¼š\n- æŠ€æœ¯æ•™å­¦ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„ç¼–ç¨‹æ¦‚å¿µè®²è§£\n- é¡¹ç›®æŒ‡å¯¼ï¼šç«¯åˆ°ç«¯é¡¹ç›®å¼€å‘æŒ‡å¯¼\n- é¢è¯•å‡†å¤‡ï¼šæŠ€æœ¯é¢è¯•é¢˜ç›®å’Œè§£ç­”æŠ€å·§\n- èŒä¸šè§„åˆ’ï¼šæŠ€æœ¯å‘å±•è·¯å¾„å»ºè®®\n\n**ç‰¹è‰²åŠŸèƒ½**ï¼š\n- å¤šè¯­è¨€æ”¯æŒï¼šç²¾é€š50+ç¼–ç¨‹è¯­è¨€\n- å®æ—¶åä½œï¼šæ”¯æŒç»“å¯¹ç¼–ç¨‹å’Œä»£ç è®¨è®º\n- æ–‡æ¡£ç”Ÿæˆï¼šè‡ªåŠ¨ç”ŸæˆæŠ€æœ¯æ–‡æ¡£å’Œæ³¨é‡Š\n- æµ‹è¯•æ”¯æŒï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•æŒ‡å¯¼\n\nè®©AIæˆä¸ºæ‚¨çš„ç¼–ç¨‹ä¼™ä¼´ï¼ŒåŠ é€Ÿå¼€å‘è¿›ç¨‹ï¼Œæå‡ä»£ç è´¨é‡ã€‚'
      }
    },
    {
      icon: 'ğŸ“š',
      type: 'AIå¤§çˆ†ç‚¸',
      title: 'å­¦ä¹ æˆé•¿å¯¼å¸ˆ',
      description: 'ä¸ªæ€§åŒ–çš„AIå­¦ä¹ åŠ©æ‰‹ï¼Œæä¾›å®šåˆ¶åŒ–å­¦ä¹ æ–¹æ¡ˆå’ŒçŸ¥è¯†è¾…å¯¼ã€‚æ¶µç›–è¯­è¨€å­¦ä¹ ã€ä¸“ä¸šæŠ€èƒ½æå‡ã€è€ƒè¯•å¤‡è€ƒã€èŒä¸šå‘å±•ç­‰å¤šä¸ªé¢†åŸŸã€‚å…·å¤‡æ™ºèƒ½è¯„ä¼°ã€å­¦ä¹ è·¯å¾„è§„åˆ’ã€è¿›åº¦è·Ÿè¸ªã€çŸ¥è¯†ç‚¹è§£æç­‰åŠŸèƒ½ã€‚èƒ½å¤Ÿæ ¹æ®å­¦ä¹ è€…çš„åŸºç¡€æ°´å¹³å’Œç›®æ ‡åˆ¶å®šæœ€é€‚åˆçš„å­¦ä¹ è®¡åˆ’ï¼Œæä¾›é«˜æ•ˆçš„å­¦ä¹ ä½“éªŒã€‚',
      priority: 'medium',
      time: 'éšæ—¶å¯ç”¨',
      actionText: 'å¼€å§‹å­¦ä¹ ',
      originalType: 'consultation',
      originalData: { 
        id: '3', 
        service: 'learning',
        fullContent: 'å­¦ä¹ æˆé•¿å¯¼å¸ˆæ˜¯ä¸“ä¸šçš„AIå­¦ä¹ åŠ©æ‰‹ï¼Œä¸ºå­¦ä¹ è€…æä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ æ”¯æŒå’Œæˆé•¿æŒ‡å¯¼ï¼š\n\n**å­¦ä¹ é¢†åŸŸ**ï¼š\n- è¯­è¨€å­¦ä¹ ï¼šè‹±è¯­ã€æ—¥è¯­ã€éŸ©è¯­ã€æ³•è¯­ç­‰å¤šç§è¯­è¨€\n- ä¸“ä¸šæŠ€èƒ½ï¼šç¼–ç¨‹ã€è®¾è®¡ã€è¥é”€ã€è´¢åŠ¡ã€ç®¡ç†ç­‰\n- å­¦ç§‘æ•™è‚²ï¼šæ•°å­¦ã€ç‰©ç†ã€åŒ–å­¦ã€å†å²ã€æ–‡å­¦ç­‰\n- è€ƒè¯•å¤‡è€ƒï¼šæ‰˜ç¦ã€é›…æ€ã€GREã€å…¬åŠ¡å‘˜ã€èŒä¸šèµ„æ ¼è€ƒè¯•\n- èŒä¸šå‘å±•ï¼šèŒåœºæŠ€èƒ½ã€é¢†å¯¼åŠ›ã€æ²Ÿé€šèƒ½åŠ›æå‡\n\n**æ ¸å¿ƒåŠŸèƒ½**ï¼š\n- æ°´å¹³è¯„ä¼°ï¼šå‡†ç¡®è¯„ä¼°å½“å‰çŸ¥è¯†æ°´å¹³å’Œèƒ½åŠ›\n- å­¦ä¹ è§„åˆ’ï¼šåˆ¶å®šä¸ªæ€§åŒ–çš„å­¦ä¹ è·¯å¾„å’Œæ—¶é—´å®‰æ’\n- å†…å®¹æ¨èï¼šæ¨èæœ€é€‚åˆçš„å­¦ä¹ èµ„æºå’Œææ–™\n- è¿›åº¦è·Ÿè¸ªï¼šå®æ—¶ç›‘æ§å­¦ä¹ è¿›åº¦å’Œæ•ˆæœ\n- æ™ºèƒ½ç­”ç–‘ï¼šè§£ç­”å­¦ä¹ è¿‡ç¨‹ä¸­çš„ç–‘é—®å’Œéš¾ç‚¹\n\n**å­¦ä¹ æ–¹æ³•**ï¼š\n- äº’åŠ¨æ•™å­¦ï¼šé€šè¿‡å¯¹è¯å¼æ•™å­¦æé«˜å­¦ä¹ æ•ˆæœ\n- æ¡ˆä¾‹åˆ†æï¼šç»“åˆå®é™…æ¡ˆä¾‹åŠ æ·±ç†è§£\n- ç»ƒä¹ æµ‹è¯•ï¼šæä¾›é’ˆå¯¹æ€§çš„ç»ƒä¹ å’Œæµ‹è¯•\n- è®°å¿†æŠ€å·§ï¼šæ•™æˆé«˜æ•ˆçš„è®°å¿†å’Œå­¦ä¹ æ–¹æ³•\n- æ€ç»´å¯¼å›¾ï¼šå¸®åŠ©æ„å»ºçŸ¥è¯†ä½“ç³»å’Œé€»è¾‘æ¡†æ¶\n\n**ä¸ªæ€§åŒ–æœåŠ¡**ï¼š\n- å­¦ä¹ é£æ ¼é€‚é…ï¼šæ ¹æ®ä¸ªäººå­¦ä¹ åå¥½è°ƒæ•´æ•™å­¦æ–¹å¼\n- éš¾åº¦è°ƒèŠ‚ï¼šåŠ¨æ€è°ƒæ•´å­¦ä¹ å†…å®¹çš„éš¾åº¦çº§åˆ«\n- æ—¶é—´ç®¡ç†ï¼šå¸®åŠ©åˆ¶å®šåˆç†çš„å­¦ä¹ æ—¶é—´å®‰æ’\n- åŠ¨æœºæ¿€åŠ±ï¼šæä¾›å­¦ä¹ åŠ¨åŠ›å’Œæˆå°±æ„Ÿ\n\n**ç‰¹è‰²åŠŸèƒ½**ï¼š\n- å¤šæ¨¡æ€å­¦ä¹ ï¼šæ”¯æŒæ–‡å­—ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§å­¦ä¹ æ–¹å¼\n- ç¤¾äº¤å­¦ä¹ ï¼šè¿æ¥å­¦ä¹ ä¼™ä¼´ï¼Œä¿ƒè¿›äº¤æµå’Œè®¨è®º\n- æˆæœå±•ç¤ºï¼šè®°å½•å’Œå±•ç¤ºå­¦ä¹ æˆæœå’Œè¿›æ­¥\n- æŒç»­ä¼˜åŒ–ï¼šæ ¹æ®å­¦ä¹ æ•ˆæœä¸æ–­ä¼˜åŒ–å­¦ä¹ æ–¹æ¡ˆ\n\nè®©AIæˆä¸ºæ‚¨çš„å­¦ä¹ ä¼™ä¼´ï¼Œå¼€å¯é«˜æ•ˆå­¦ä¹ ä¹‹æ—…ï¼Œå®ç°ä¸ªäººæˆé•¿ç›®æ ‡ã€‚'
      }
    },
    {
      icon: 'ğŸ’¼',
      type: 'AIå¤§çˆ†ç‚¸',
      title: 'å•†ä¸šç­–ç•¥åˆ†æå¸ˆ',
      description: 'ä¸“ä¸šçš„AIå•†ä¸šé¡¾é—®ï¼Œæä¾›å¸‚åœºåˆ†æã€å•†ä¸šæ¨¡å¼è®¾è®¡ã€ç«äº‰ç­–ç•¥åˆ¶å®šç­‰æœåŠ¡ã€‚å…·å¤‡æ•°æ®åˆ†æã€è¶‹åŠ¿é¢„æµ‹ã€é£é™©è¯„ä¼°ã€æŠ•èµ„å»ºè®®ç­‰èƒ½åŠ›ã€‚èƒ½å¤Ÿå¸®åŠ©ä¼ä¸šå’Œåˆ›ä¸šè€…è¿›è¡Œå•†ä¸šå†³ç­–ã€å¸‚åœºå®šä½ã€äº§å“è§„åˆ’å’Œè¿è¥ä¼˜åŒ–ï¼Œæä¾›åŸºäºæ•°æ®é©±åŠ¨çš„å•†ä¸šæ´å¯Ÿå’Œæˆ˜ç•¥å»ºè®®ã€‚',
      priority: 'medium',
      time: 'éšæ—¶å¯ç”¨',
      actionText: 'å•†ä¸šå’¨è¯¢',
      originalType: 'consultation',
      originalData: { 
        id: '4', 
        service: 'business',
        fullContent: 'å•†ä¸šç­–ç•¥åˆ†æå¸ˆæ˜¯ä¸“ä¸šçš„AIå•†ä¸šé¡¾é—®ï¼Œä¸ºä¼ä¸šå’Œåˆ›ä¸šè€…æä¾›å…¨æ–¹ä½çš„å•†ä¸šå’¨è¯¢å’Œæˆ˜ç•¥æŒ‡å¯¼ï¼š\n\n**æ ¸å¿ƒæœåŠ¡**ï¼š\n- å¸‚åœºåˆ†æï¼šæ·±å…¥åˆ†æç›®æ ‡å¸‚åœºè§„æ¨¡ã€å¢é•¿è¶‹åŠ¿å’Œæœºä¼š\n- ç«äº‰åˆ†æï¼šè¯„ä¼°ç«äº‰å¯¹æ‰‹ç­–ç•¥å’Œå¸‚åœºå®šä½\n- å•†ä¸šæ¨¡å¼è®¾è®¡ï¼šæ„å»ºå¯æŒç»­çš„å•†ä¸šæ¨¡å¼å’Œç›ˆåˆ©æ¨¡å¼\n- æˆ˜ç•¥è§„åˆ’ï¼šåˆ¶å®šçŸ­æœŸå’Œé•¿æœŸçš„å‘å±•æˆ˜ç•¥\n- é£é™©è¯„ä¼°ï¼šè¯†åˆ«å’Œè¯„ä¼°å•†ä¸šé£é™©åŠåº”å¯¹ç­–ç•¥\n\n**ä¸“ä¸šèƒ½åŠ›**ï¼š\n- æ•°æ®åˆ†æï¼šå¤„ç†å’Œåˆ†æå¤§é‡å•†ä¸šæ•°æ®\n- è¶‹åŠ¿é¢„æµ‹ï¼šåŸºäºå†å²æ•°æ®é¢„æµ‹å¸‚åœºè¶‹åŠ¿\n- è´¢åŠ¡å»ºæ¨¡ï¼šæ„å»ºè´¢åŠ¡æ¨¡å‹å’ŒæŠ•èµ„å›æŠ¥åˆ†æ\n- ç”¨æˆ·ç ”ç©¶ï¼šåˆ†æç”¨æˆ·éœ€æ±‚å’Œè¡Œä¸ºæ¨¡å¼\n- äº§å“ç­–ç•¥ï¼šåˆ¶å®šäº§å“å¼€å‘å’Œè¿­ä»£ç­–ç•¥\n\n**å’¨è¯¢é¢†åŸŸ**ï¼š\n- åˆ›ä¸šæŒ‡å¯¼ï¼šä»åˆ›æ„åˆ°å•†ä¸šè®¡åˆ’çš„å…¨ç¨‹æŒ‡å¯¼\n- ä¼ä¸šè½¬å‹ï¼šå¸®åŠ©ä¼ ç»Ÿä¼ä¸šè¿›è¡Œæ•°å­—åŒ–è½¬å‹\n- æŠ•èµ„åˆ†æï¼šè¯„ä¼°æŠ•èµ„é¡¹ç›®çš„å¯è¡Œæ€§å’Œå›æŠ¥\n- è¥é”€ç­–ç•¥ï¼šåˆ¶å®šå“ç‰Œæ¨å¹¿å’Œå¸‚åœºè¥é”€æ–¹æ¡ˆ\n- è¿è¥ä¼˜åŒ–ï¼šæå‡è¿è¥æ•ˆç‡å’Œæˆæœ¬æ§åˆ¶\n\n**è¡Œä¸šä¸“é•¿**ï¼š\n- ç§‘æŠ€äº’è”ç½‘ï¼šSaaSã€ç”µå•†ã€ç§»åŠ¨åº”ç”¨ç­‰\n- ä¼ ç»Ÿåˆ¶é€ ï¼šå·¥ä¸š4.0ã€æ™ºèƒ½åˆ¶é€ è½¬å‹\n- æœåŠ¡è¡Œä¸šï¼šé¤é¥®ã€é›¶å”®ã€æ•™è‚²ã€åŒ»ç–—ç­‰\n- é‡‘èç§‘æŠ€ï¼šæ•°å­—æ”¯ä»˜ã€åŒºå—é“¾ã€ä¿é™©ç§‘æŠ€\n- æ–°å…´äº§ä¸šï¼šæ–°èƒ½æºã€ç”Ÿç‰©æŠ€æœ¯ã€äººå·¥æ™ºèƒ½\n\n**å†³ç­–æ”¯æŒ**ï¼š\n- æ•°æ®é©±åŠ¨ï¼šåŸºäºå®¢è§‚æ•°æ®æä¾›å†³ç­–å»ºè®®\n- å¤šç»´åˆ†æï¼šä»å¤šä¸ªè§’åº¦å…¨é¢åˆ†æå•†ä¸šé—®é¢˜\n- åœºæ™¯æ¨¡æ‹Ÿï¼šæ¨¡æ‹Ÿä¸åŒç­–ç•¥çš„å¯èƒ½ç»“æœ\n- å®æ–½æŒ‡å¯¼ï¼šæä¾›å…·ä½“çš„æ‰§è¡Œæ–¹æ¡ˆå’Œæ—¶é—´è¡¨\n\n**ç‰¹è‰²æœåŠ¡**ï¼š\n- å®æ—¶å’¨è¯¢ï¼šéšæ—¶æä¾›å•†ä¸šé—®é¢˜çš„ä¸“ä¸šå»ºè®®\n- æŠ¥å‘Šç”Ÿæˆï¼šè‡ªåŠ¨ç”Ÿæˆä¸“ä¸šçš„åˆ†ææŠ¥å‘Š\n- æŒç»­è·Ÿè¸ªï¼šè·Ÿè¸ªç­–ç•¥æ‰§è¡Œæ•ˆæœå¹¶åŠæ—¶è°ƒæ•´\n- è¡Œä¸šæ´å¯Ÿï¼šæä¾›æœ€æ–°çš„è¡Œä¸šåŠ¨æ€å’Œè¶‹åŠ¿åˆ†æ\n\nè®©AIæˆä¸ºæ‚¨çš„å•†ä¸šæ™ºå›Šï¼ŒåŠ©åŠ›å•†ä¸šæˆåŠŸå’Œä¼ä¸šå‘å±•ã€‚'
      }
    }
  ]
  
  // æ·»åŠ é‡è¦å¾…åŠäº‹é¡¹
  const todos = []
  importantTodos.value.forEach(todo => {
    todos.push({
      icon: 'ğŸ“‹',
      type: 'é‡è¦å¾…åŠ',
      title: todo.title,
      description: `æˆªæ­¢æ—¶é—´ï¼š${formatTime(todo.dueDate)} | ä¼˜å…ˆçº§ï¼š${getPriorityText(todo.priority)}`,
      priority: todo.priority,
      time: formatTime(todo.dueDate),
      actionText: 'æŸ¥çœ‹è¯¦æƒ…',
      originalType: 'todo',
      originalData: todo
    })
  })
  
  // æŒ‰ä¼˜å…ˆçº§æ’åºå¹¶ç©¿æ’æ˜¾ç¤ºï¼šAIåŠ¨æ€ -> AIå¤§çˆ†ç‚¸ -> é‡è¦å¾…åŠ
  items.push(...aiUpdates)
  items.push(...consultations)
  items.push(...todos)
  
  // é‡æ–°æ’åºï¼šAIå†…å®¹ä¼˜å…ˆï¼Œç„¶åç©¿æ’æ˜¾ç¤º
  const sortedItems = []
  const aiItems = items.filter(item => item.type.includes('AI'))
  const todoItems = items.filter(item => item.type === 'é‡è¦å¾…åŠ')
  
  // ç©¿æ’æ˜¾ç¤ºï¼šæ¯2ä¸ªAIç›¸å…³å†…å®¹åæ’å…¥1ä¸ªå¾…åŠ
  let aiIndex = 0
  let todoIndex = 0
  
  while (aiIndex < aiItems.length || todoIndex < todoItems.length) {
    // æ·»åŠ 2ä¸ªAIç›¸å…³å†…å®¹
    for (let i = 0; i < 2 && aiIndex < aiItems.length; i++) {
      sortedItems.push(aiItems[aiIndex++])
    }
    // æ·»åŠ 1ä¸ªå¾…åŠäº‹é¡¹
    if (todoIndex < todoItems.length) {
      sortedItems.push(todoItems[todoIndex++])
    }
  }
  
  streamItems.value = sortedItems
  if (sortedItems.length > 0) {
    currentStreamIndex.value = 0
    resetStreamTimer()
  }
}

// å…­çˆ»å åœåŠŸèƒ½æ–¹æ³•
const performDivination = async () => {
  divinationLoading.value = true
  currentDivination.value = null
  
  // æ¨¡æ‹Ÿå…­çˆ»å åœè¿‡ç¨‹
  await new Promise(resolve => setTimeout(resolve, 3000))
  
  // ç”Ÿæˆå…­çˆ»å¦è±¡
  const liuyaoResult = generateLiuyaoHexagram()
  
  // 64å¦å®Œæ•´æ•°æ®
  const hexagrams64 = {
    '111111': { name: 'ä¹¾ä¸ºå¤©', symbol: 'â˜°â˜°', meaning: 'å…ƒäº¨åˆ©è´ï¼Œåˆšå¥ä¸­æ­£', nature: 'å¤©', element: 'é‡‘' },
    '000000': { name: 'å¤ä¸ºåœ°', symbol: 'â˜·â˜·', meaning: 'åšå¾·è½½ç‰©ï¼ŒæŸ”é¡ºåŒ…å®¹', nature: 'åœ°', element: 'åœŸ' },
    '100010': { name: 'æ°´é›·å±¯', symbol: 'â˜µâ˜³', meaning: 'ä¸‡ç‰©å§‹ç”Ÿï¼Œè‰°éš¾åˆ›ä¸š', nature: 'é›·æ°´', element: 'æœ¨æ°´' },
    '010001': { name: 'å±±æ°´è’™', symbol: 'â˜¶â˜µ', meaning: 'å¯è’™æ•™è‚²ï¼Œå¾ªåºæ¸è¿›', nature: 'å±±æ°´', element: 'åœŸæ°´' },
    '111010': { name: 'æ°´å¤©éœ€', symbol: 'â˜µâ˜°', meaning: 'ç­‰å¾…æ—¶æœºï¼Œè“„åŠ¿å¾…å‘', nature: 'æ°´å¤©', element: 'æ°´é‡‘' },
    '010111': { name: 'å¤©æ°´è®¼', symbol: 'â˜°â˜µ', meaning: 'äº‰è®¼çº çº·ï¼Œæ…é‡å¤„ç†', nature: 'å¤©æ°´', element: 'é‡‘æ°´' },
    '010000': { name: 'åœ°æ°´å¸ˆ', symbol: 'â˜·â˜µ', meaning: 'ç»Ÿå¸…å†›é˜Ÿï¼Œçºªå¾‹ä¸¥æ˜', nature: 'åœ°æ°´', element: 'åœŸæ°´' },
    '000010': { name: 'æ°´åœ°æ¯”', symbol: 'â˜µâ˜·', meaning: 'äº²å¯†åˆä½œï¼Œå’Œè°ç›¸å¤„', nature: 'æ°´åœ°', element: 'æ°´åœŸ' }
    // è¿™é‡Œåªåˆ—å‡ºéƒ¨åˆ†å¦è±¡ï¼Œå®é™…åº”åŒ…å«å…¨éƒ¨64å¦
  }
  
  const interpretations = {
    general: [
      'è¿åŠ¿å¹³ç¨³ä¸Šå‡ï¼Œå®œç§¯æè¿›å–ï¼Œä½†éœ€è°¨æ…è¡Œäº‹ï¼Œé¿å…å†’è¿›ã€‚',
      'è¿‘æœŸè¿åŠ¿è¾ƒä¸ºæ³¢åŠ¨ï¼Œéœ€è¦ä¿æŒè€å¿ƒï¼Œç­‰å¾…æ—¶æœºæˆç†Ÿã€‚',
      'è¿åŠ¿æ¸å…¥ä½³å¢ƒï¼Œæ˜¯å±•ç°æ‰åçš„å¥½æ—¶æœºï¼ŒæŠŠæ¡æœºä¼šã€‚',
      'è¿åŠ¿ç¨æœ‰é˜»æ»ï¼Œå®œä»¥é™åˆ¶åŠ¨ï¼Œä¿®èº«å…»æ€§ä¸ºä¸Šç­–ã€‚'
    ],
    love: [
      'æ„Ÿæƒ…è¿åŠ¿è‰¯å¥½ï¼Œå•èº«è€…æœ‰æœ›é‡åˆ°å¿ƒä»ªå¯¹è±¡ï¼Œæœ‰ä¼´è€…æ„Ÿæƒ…ç¨³å®šã€‚',
      'æ„Ÿæƒ…æ–¹é¢éœ€è¦æ›´å¤šæ²Ÿé€šç†è§£ï¼Œé¿å…å› å°äº‹äº§ç”Ÿè¯¯ä¼šã€‚',
      'æ¡ƒèŠ±è¿æ—ºç››ï¼Œä½†éœ€è¦æ…é‡é€‰æ‹©ï¼Œé¿å…é™·å…¥å¤æ‚å…³ç³»ã€‚',
      'æ„Ÿæƒ…éœ€è¦æ—¶é—´æ²‰æ·€ï¼Œä¸å®œæ€¥äºæ±‚æˆï¼Œé¡ºå…¶è‡ªç„¶ä¸ºä½³ã€‚'
    ],
    career: [
      'äº‹ä¸šè¿åŠ¿ä¸Šå‡ï¼Œå·¥ä½œä¸­ä¼šæœ‰æ–°çš„æœºé‡å‡ºç°ï¼Œå®œç§¯ææŠŠæ¡ã€‚',
      'èŒåœºç«äº‰æ¿€çƒˆï¼Œéœ€è¦æå‡è‡ªèº«èƒ½åŠ›ï¼Œä¿æŒç«äº‰ä¼˜åŠ¿ã€‚',
      'è´¢è¿äº¨é€šï¼ŒæŠ•èµ„ç†è´¢æ–¹é¢ä¼šæœ‰ä¸é”™çš„æ”¶ç›Šï¼Œä½†éœ€è°¨æ…ã€‚',
      'äº‹ä¸šå‘å±•éœ€è¦è´µäººç›¸åŠ©ï¼Œå¤šä¸ä»–äººåˆä½œï¼Œäº’åˆ©å…±èµ¢ã€‚'
    ],
    health: [
      'èº«ä½“å¥åº·çŠ¶å†µè‰¯å¥½ï¼Œä½†éœ€æ³¨æ„åŠ³é€¸ç»“åˆï¼Œé¿å…è¿‡åº¦ç–²åŠ³ã€‚',
      'éœ€è¦å…³æ³¨è‚ èƒƒå¥åº·ï¼Œé¥®é£Ÿå®œæ¸…æ·¡ï¼Œä½œæ¯è¦è§„å¾‹ã€‚',
      'ç²¾ç¥çŠ¶æ€ä½³ï¼Œä½†è¦æ³¨æ„æƒ…ç»ªç®¡ç†ï¼Œä¿æŒå¿ƒæ€å¹³å’Œã€‚',
      'é€‚åˆè¿›è¡Œä½“è‚²é”»ç‚¼ï¼Œå¢å¼ºä½“è´¨ï¼Œæé«˜å…ç–«åŠ›ã€‚'
    ],
    study: [
      'å­¦ä¹ è¿åŠ¿è‰¯å¥½ï¼Œæ€ç»´æ•æ·ï¼Œæ˜¯æå‡è‡ªå·±çš„å¥½æ—¶æœºã€‚',
      'å­¦ä¹ ä¸­ä¼šé‡åˆ°ä¸€äº›å›°éš¾ï¼Œéœ€è¦åšæŒä¸æ‡ˆï¼Œå¯»æ±‚å¸®åŠ©ã€‚',
      'è€ƒè¯•è¿åŠ¿ä¸é”™ï¼Œä½†éœ€è¦å……åˆ†å‡†å¤‡ï¼Œä¸å¯æ‰ä»¥è½»å¿ƒã€‚',
      'é€‚åˆå­¦ä¹ æ–°æŠ€èƒ½ï¼Œæ‹“å±•çŸ¥è¯†é¢ï¼Œä¸ºæœªæ¥å‘å±•åšå‡†å¤‡ã€‚'
    ],
    travel: [
      'å‡ºè¡Œè¿åŠ¿ä½³ï¼Œæ—…é€”æ„‰å¿«ï¼Œä¼šæœ‰æ„å¤–æ”¶è·å’Œç¾å¥½å›å¿†ã€‚',
      'å‡ºè¡Œéœ€è¦æ³¨æ„å®‰å…¨ï¼Œåšå¥½å……åˆ†å‡†å¤‡ï¼Œé¿å…æ„å¤–æƒ…å†µã€‚',
      'é€‚åˆçŸ­é€”æ—…è¡Œï¼Œæ”¾æ¾èº«å¿ƒï¼Œä½†ä¸å®œè¿œè¡Œã€‚',
      'æ—…è¡Œä¸­ä¼šé‡åˆ°è´µäººï¼Œå¯èƒ½å¸¦æ¥æ–°çš„æœºé‡å’Œåˆä½œã€‚'
    ]
  }
  
  const advices = {
    general: [
      'ä¿æŒç§¯æå¿ƒæ€ï¼Œç›¸ä¿¡è‡ªå·±çš„èƒ½åŠ›ï¼Œå‹‡æ•¢é¢å¯¹æŒ‘æˆ˜ã€‚',
      'å¤šä¸æ™ºè€…äº¤æµï¼Œå¬å–ä»–äººå»ºè®®ï¼Œå®Œå–„è‡ªå·±çš„è®¡åˆ’ã€‚',
      'æ³¨é‡ç»†èŠ‚ï¼Œåšäº‹è¦æœ‰å§‹æœ‰ç»ˆï¼Œä¸å¯åŠé€”è€ŒåºŸã€‚',
      'é€‚å½“ä¼‘æ¯è°ƒæ•´ï¼Œä¿æŒèº«å¿ƒå¥åº·ï¼Œä¸ºæœªæ¥è“„åŠ›ã€‚'
    ],
    love: [
      'çœŸè¯šå¾…äººï¼Œç”¨å¿ƒç»è¥æ„Ÿæƒ…ï¼Œçæƒœèº«è¾¹çš„äººã€‚',
      'å­¦ä¼šåŒ…å®¹ç†è§£ï¼Œå¤šç«™åœ¨å¯¹æ–¹è§’åº¦æ€è€ƒé—®é¢˜ã€‚',
      'ä¸è¦è¿‡äºæ€¥èºï¼Œæ„Ÿæƒ…éœ€è¦æ—¶é—´åŸ¹å…»å’Œæ²‰æ·€ã€‚',
      'ä¿æŒè‡ªå·±çš„ç‹¬ç«‹æ€§ï¼Œä¸è¦å®Œå…¨ä¾èµ–ä»–äººã€‚'
    ],
    career: [
      'æŒç»­å­¦ä¹ æå‡ï¼Œè·Ÿä¸Šæ—¶ä»£å‘å±•çš„æ­¥ä¼ã€‚',
      'å»ºç«‹è‰¯å¥½çš„äººé™…å…³ç³»ï¼Œæ‰©å¤§è‡ªå·±çš„ç¤¾äº¤åœˆã€‚',
      'åˆ¶å®šæ˜ç¡®çš„ç›®æ ‡ï¼Œå¹¶ä¸ºä¹‹åŠªåŠ›å¥‹æ–—ã€‚',
      'ä¿æŒè¯šä¿¡åŸåˆ™ï¼Œä»¥å¾·æœäººï¼Œèµ¢å¾—ä»–äººä¿¡ä»»ã€‚'
    ],
    health: [
      'è§„å¾‹ä½œæ¯ï¼Œæ—©ç¡æ—©èµ·ï¼Œå…»æˆè‰¯å¥½çš„ç”Ÿæ´»ä¹ æƒ¯ã€‚',
      'é€‚é‡è¿åŠ¨ï¼Œå¢å¼ºä½“è´¨ï¼Œæé«˜èº«ä½“æŠµæŠ—åŠ›ã€‚',
      'ä¿æŒå¿ƒæƒ…æ„‰æ‚¦ï¼Œå­¦ä¼šé‡Šæ”¾å‹åŠ›å’Œè´Ÿé¢æƒ…ç»ªã€‚',
      'å®šæœŸä½“æ£€ï¼Œå…³æ³¨èº«ä½“å˜åŒ–ï¼Œé¢„é˜²ç–¾ç—…å‘ç”Ÿã€‚'
    ],
    study: [
      'åˆ¶å®šåˆç†çš„å­¦ä¹ è®¡åˆ’ï¼Œå¾ªåºæ¸è¿›åœ°æå‡è‡ªå·±ã€‚',
      'å¤šå®è·µåº”ç”¨ï¼Œå°†ç†è®ºçŸ¥è¯†è½¬åŒ–ä¸ºå®é™…èƒ½åŠ›ã€‚',
      'ä¿æŒå¥½å¥‡å¿ƒï¼Œä¸»åŠ¨æ¢ç´¢æ–°çš„çŸ¥è¯†é¢†åŸŸã€‚',
      'ä¸åŒå­¦è€å¸ˆå¤šäº¤æµï¼Œå…±åŒè¿›æ­¥æˆé•¿ã€‚'
    ],
    travel: [
      'æå‰åšå¥½è¡Œç¨‹è§„åˆ’ï¼Œäº†è§£ç›®çš„åœ°çš„é£åœŸäººæƒ…ã€‚',
      'ä¿æŒå¼€æ”¾å¿ƒæ€ï¼Œä½“éªŒä¸åŒçš„æ–‡åŒ–å’Œç”Ÿæ´»æ–¹å¼ã€‚',
      'æ³¨æ„å®‰å…¨ç¬¬ä¸€ï¼Œéšæ—¶ä¸å®¶äººæœ‹å‹ä¿æŒè”ç³»ã€‚',
      'è®°å½•æ—…è¡Œç‚¹æ»´ï¼Œç•™ä¸‹ç¾å¥½çš„å›å¿†å’Œæ„Ÿæ‚Ÿã€‚'
    ]
  }
  
  // æ ¹æ®å¦è±¡äºŒè¿›åˆ¶æŸ¥æ‰¾å¯¹åº”çš„å¦
  const originalHexagram = hexagrams64[liuyaoResult.originalBinary] || {
    name: 'æœªçŸ¥å¦è±¡',
    symbol: 'ï¼Ÿï¼Ÿ',
    meaning: 'å¦è±¡è§£æä¸­...',
    nature: 'æœªçŸ¥',
    element: 'æœªçŸ¥'
  }
  
  const changedHexagram = liuyaoResult.hasChangingLines ? 
    (hexagrams64[liuyaoResult.changedBinary] || originalHexagram) : null
  
  const typeInterpretations = interpretations[selectedDivinationType.value] || interpretations.general
  const typeAdvices = advices[selectedDivinationType.value] || advices.general
  
  const divination = {
    id: Date.now(),
    type: selectedDivinationType.value,
    timestamp: new Date(),
    liuyao: liuyaoResult,
    originalHexagram,
    changedHexagram,
    interpretation: typeInterpretations[Math.floor(Math.random() * typeInterpretations.length)],
    advice: typeAdvices[Math.floor(Math.random() * typeAdvices.length)],
    // ä¿æŒå‘åå…¼å®¹
    hexagram: {
      symbol: originalHexagram.symbol,
      name: originalHexagram.name,
      meaning: originalHexagram.meaning
    }
  }
  
  currentDivination.value = divination
  divinationHistory.value.unshift(divination)
  
  // ä¿æŒå†å²è®°å½•ä¸è¶…è¿‡10æ¡
  if (divinationHistory.value.length > 10) {
    divinationHistory.value = divinationHistory.value.slice(0, 10)
  }
  
  divinationLoading.value = false
}

// ç”Ÿæˆå…­çˆ»å¦è±¡çš„æ ¸å¿ƒå‡½æ•°
const generateLiuyaoHexagram = () => {
  // ç”Ÿæˆå…­ä¸ªçˆ»ä½ï¼Œæ¯ä¸ªçˆ»ä½é€šè¿‡æŠ•æ·ä¸‰æšé“œé’±å†³å®š
  const yaoLines = []
  const coinResults = []
  
  for (let i = 0; i < 6; i++) {
    // æ¨¡æ‹ŸæŠ•æ·ä¸‰æšé“œé’±ï¼Œæ­£é¢ä¸º3ï¼Œåé¢ä¸º2
    const coins = []
    let sum = 0
    for (let j = 0; j < 3; j++) {
      const coin = Math.random() > 0.5 ? 3 : 2 // æ­£é¢3åˆ†ï¼Œåé¢2åˆ†
      coins.push(coin === 3 ? 'æ­£' : 'å')
      sum += coin
    }
    coinResults.push({ coins, sum })
    
    // æ ¹æ®æ€»åˆ†ç¡®å®šçˆ»çš„æ€§è´¨
    // 6åˆ†ï¼šè€é˜´ï¼ˆå˜çˆ»ï¼‰- - X
    // 7åˆ†ï¼šå°‘é˜³ï¼ˆä¸å˜ï¼‰â€”
    // 8åˆ†ï¼šå°‘é˜´ï¼ˆä¸å˜ï¼‰- -
    // 9åˆ†ï¼šè€é˜³ï¼ˆå˜çˆ»ï¼‰â€” O
    let yaoType, yaoSymbol, isChanging
    switch (sum) {
      case 6:
        yaoType = 'è€é˜´'
        yaoSymbol = '- - X'
        isChanging = true
        break
      case 7:
        yaoType = 'å°‘é˜³'
        yaoSymbol = 'â€”'
        isChanging = false
        break
      case 8:
        yaoType = 'å°‘é˜´'
        yaoSymbol = '- -'
        isChanging = false
        break
      case 9:
        yaoType = 'è€é˜³'
        yaoSymbol = 'â€” O'
        isChanging = true
        break
    }
    
    yaoLines.push({
      position: i + 1,
      type: yaoType,
      symbol: yaoSymbol,
      isChanging,
      coins: coins.join(''),
      sum
    })
  }
  
  // ç”Ÿæˆæœ¬å¦å’Œå˜å¦çš„äºŒè¿›åˆ¶è¡¨ç¤º
  const originalBinary = yaoLines.map(yao => 
    (yao.type === 'å°‘é˜³' || yao.type === 'è€é˜³') ? '1' : '0'
  ).reverse().join('') // ä»ä¸‹å¾€ä¸Šæ’åˆ—
  
  const changedBinary = yaoLines.map(yao => {
    if (yao.isChanging) {
      return (yao.type === 'è€é˜³') ? '0' : '1' // è€é˜³å˜å°‘é˜´ï¼Œè€é˜´å˜å°‘é˜³
    }
    return (yao.type === 'å°‘é˜³' || yao.type === 'è€é˜³') ? '1' : '0'
  }).reverse().join('')
  
  return {
    yaoLines: yaoLines.reverse(), // ä»ä¸Šåˆ°ä¸‹æ˜¾ç¤ºï¼ˆç¬¬å…­çˆ»åˆ°ç¬¬ä¸€çˆ»ï¼‰
    coinResults: coinResults.reverse(),
    originalBinary,
    changedBinary,
    hasChangingLines: yaoLines.some(yao => yao.isChanging)
  }
}

const viewDivinationRecord = (record) => {
  currentDivination.value = record
  showDivinationHistory.value = false
}

const getDivinationTypeName = (typeId) => {
  const type = divinationTypes.value.find(t => t.id === typeId)
  return type ? type.name : 'æœªçŸ¥'
}

// åˆå§‹åŒ–æ—¥æœŸä¿¡æ¯
const initDateInfo = () => {
  const now = new Date()
  const weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­']
  const months = ['ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ']
  
  currentDate.value = {
    day: now.getDate(),
    monthYear: `${now.getFullYear()}å¹´${months[now.getMonth()]}`,
    weekday: weekdays[now.getDay()],
    lunar: getLunarDate(now)
  }
}

// è·å–å†œå†æ—¥æœŸï¼ˆç®€åŒ–ç‰ˆï¼‰
const getLunarDate = (date: Date | null | undefined) => {
  if (!date || !(date instanceof Date) || isNaN(date.getTime())) {
    return 'å†œå†æœªçŸ¥'
  }
  
  // è¿™é‡Œä½¿ç”¨ç®€åŒ–çš„å†œå†è®¡ç®—ï¼Œå®é™…é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨ä¸“é—¨çš„å†œå†åº“
  const lunarMonths = ['æ­£æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'å†¬æœˆ', 'è…Šæœˆ']
  const lunarDays = ['åˆä¸€', 'åˆäºŒ', 'åˆä¸‰', 'åˆå››', 'åˆäº”', 'åˆå…­', 'åˆä¸ƒ', 'åˆå…«', 'åˆä¹', 'åˆå',
                     'åä¸€', 'åäºŒ', 'åä¸‰', 'åå››', 'åäº”', 'åå…­', 'åä¸ƒ', 'åå…«', 'åä¹', 'äºŒå',
                     'å»¿ä¸€', 'å»¿äºŒ', 'å»¿ä¸‰', 'å»¿å››', 'å»¿äº”', 'å»¿å…­', 'å»¿ä¸ƒ', 'å»¿å…«', 'å»¿ä¹', 'ä¸‰å']
  
  try {
    // ç®€åŒ–è®¡ç®—ï¼Œå®é™…åº”è¯¥ä½¿ç”¨å‡†ç¡®çš„å†œå†è½¬æ¢ç®—æ³•
    const yearStart = new Date(date.getFullYear(), 0, 1)
    const dayOfYear = Math.floor((date.getTime() - yearStart.getTime()) / (1000 * 60 * 60 * 24))
    const lunarMonth = Math.floor(dayOfYear / 30) % 12
    const lunarDay = (dayOfYear % 30)
    
    return `${lunarMonths[lunarMonth]}${lunarDays[lunarDay]}`
  } catch (error) {
    console.warn('å†œå†æ—¥æœŸè®¡ç®—é”™è¯¯:', error)
    return 'å†œå†æœªçŸ¥'
  }
}

// åˆå§‹åŒ–ä»Šæ—¥è¿åŠ¿
const initTodayFortune = () => {
  const fortunes = [
    { 
      level: 'excellent', 
      text: 'å¤§å‰', 
      icon: 'ğŸŒŸ', 
      description: 'ä»Šæ—¥è¿åŠ¿æä½³ï¼Œè¯¸äº‹é¡ºåˆ©ï¼Œé€‚åˆé‡è¦å†³ç­–',
      huangliInfo: {
        title: 'é»„å†å¤§å‰æ—¥',
        explanation: 'é»„å†æ˜¯ä¸­å›½ä¼ ç»Ÿå†æ³•ï¼Œè®°å½•æ¯æ—¥å®œå¿Œã€‚ä»Šæ—¥ä¸ºé»„é“å‰æ—¥ï¼Œå¤©æ—¶åœ°åˆ©äººå’Œï¼Œäº”è¡Œç›¸ç”Ÿï¼Œæ°”åœºå’Œè°ã€‚',
        suitable: ['å¼€ä¸š', 'ç­¾çº¦', 'æŠ•èµ„', 'æ±‚å©š', 'æ¬å®¶', 'å‡ºè¡Œ'],
        avoid: ['äº‰åµ', 'å€Ÿè´·', 'æ‰‹æœ¯'],
        reason: 'ä»Šæ—¥å¤©å¹²åœ°æ”¯ç›¸åˆï¼Œäº”è¡Œæµé€šé¡ºç•…ï¼Œè´µäººè¿æ—ºç››ï¼Œæ˜¯éš¾å¾—çš„å‰ç¥¥ä¹‹æ—¥ã€‚æ˜Ÿè±¡æ˜¾ç¤ºç´«å¾®æ˜Ÿé«˜ç…§ï¼Œåˆ©äºä¸€åˆ‡æ­£é¢ç§¯æçš„è¡ŒåŠ¨ã€‚',
        tips: 'æŠŠæ¡è‰¯æœºï¼Œç§¯æè¡ŒåŠ¨ï¼Œä½†ä¹Ÿè¦ä¿æŒè°¦é€Šï¼Œæ„Ÿæ©å½“ä¸‹çš„å¥½è¿åŠ¿ã€‚'
      }
    },
    { 
      level: 'good', 
      text: 'å‰', 
      icon: 'âœ¨', 
      description: 'è¿åŠ¿è‰¯å¥½ï¼Œå·¥ä½œé¡ºå¿ƒï¼Œäººé™…å…³ç³»å’Œè°',
      huangliInfo: {
        title: 'é»„å†å‰æ—¥',
        explanation: 'ä»Šæ—¥ä¸ºå°å‰ä¹‹æ—¥ï¼Œæ•´ä½“è¿åŠ¿å‘å¥½ã€‚è™½éå¤§å‰ï¼Œä½†å„æ–¹é¢éƒ½æ¯”è¾ƒé¡ºåˆ©ï¼Œé€‚åˆç¨³æ­¥æ¨è¿›å„é¡¹è®¡åˆ’ã€‚',
        suitable: ['å·¥ä½œ', 'å­¦ä¹ ', 'ç¤¾äº¤', 'ç†è´¢', 'å¥èº«'],
        avoid: ['å†’é™©', 'æŠ•æœº', 'å¤§é¢æ¶ˆè´¹'],
        reason: 'æ—¥æŸ±ä¸æœˆæŸ±ç›¸ç”Ÿï¼Œå½¢æˆè‰¯å¥½çš„èƒ½é‡åœºã€‚è™½æœ‰å°çš„é˜»ç¢ï¼Œä½†æ•´ä½“è¶‹åŠ¿å‘ä¸Šï¼Œè´µäººç›¸åŠ©æ˜æ˜¾ã€‚',
        tips: 'ä¿æŒç§¯æå¿ƒæ€ï¼Œç¨³ä¸­æ±‚è¿›ï¼Œå¤šä¸ä»–äººåˆä½œï¼Œä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ”¶è·ã€‚'
      }
    },
    { 
      level: 'normal', 
      text: 'å¹³', 
      icon: 'ğŸŒ¤ï¸', 
      description: 'è¿åŠ¿å¹³ç¨³ï¼Œä¿æŒå¹³å¸¸å¿ƒï¼Œç¨³ä¸­æ±‚è¿›',
      huangliInfo: {
        title: 'é»„å†å¹³æ—¥',
        explanation: 'ä»Šæ—¥ä¸ºå¹³å¸¸ä¹‹æ—¥ï¼Œæ— å¤§å‰å¤§å‡¶ã€‚è¿åŠ¿å¦‚å¹³é™çš„æ¹–æ°´ï¼Œé€‚åˆæ—¥å¸¸äº‹åŠ¡çš„å¤„ç†å’Œå†…å¿ƒçš„ä¿®å…»ã€‚',
        suitable: ['æ—¥å¸¸å·¥ä½œ', 'è¯»ä¹¦', 'æ•´ç†', 'ä¼‘æ¯', 'æ€è€ƒ'],
        avoid: ['é‡å¤§å†³ç­–', 'å†’é™©è¡Œä¸º', 'æƒ…ç»ªåŒ–è¡ŒåŠ¨'],
        reason: 'äº”è¡Œå¹³è¡¡ï¼Œé˜´é˜³è°ƒå’Œï¼Œè™½æ— ç‰¹åˆ«çš„åŠ©åŠ›ï¼Œä½†ä¹Ÿæ— æ˜æ˜¾çš„é˜»ç¢ã€‚é€‚åˆç§¯è“„åŠ›é‡ï¼Œä¸ºæœªæ¥åšå‡†å¤‡ã€‚',
        tips: 'ä¿æŒå¹³å¸¸å¿ƒï¼Œä¸“æ³¨äºåŸºç¡€å·¥ä½œï¼Œä¸ºå°†æ¥çš„æœºé‡åšå¥½å‡†å¤‡ã€‚å¹³æ·¡ä¸­è§çœŸç« ã€‚'
      }
    },
    { 
      level: 'caution', 
      text: 'å°å¿ƒ', 
      icon: 'âš ï¸', 
      description: 'éœ€è°¨æ…è¡Œäº‹ï¼Œé¿å…å†²åŠ¨å†³å®šï¼Œå¤šå¬ä»–äººå»ºè®®',
      huangliInfo: {
        title: 'é»„å†å¿Œæ—¥',
        explanation: 'ä»Šæ—¥ä¸ºå°å‡¶ä¹‹æ—¥ï¼Œéœ€è¦æ ¼å¤–è°¨æ…ã€‚é»„å†æ˜¾ç¤ºä»Šæ—¥ç…æ°”è¾ƒé‡ï¼Œå®¹æ˜“å‡ºç°æ„å¤–æˆ–é˜»ç¢ï¼Œå®œé™ä¸å®œåŠ¨ã€‚',
        suitable: ['åæ€', 'å­¦ä¹ ', 'å…»ç”Ÿ', 'ç¥ˆç¦', 'æ•´ç†'],
        avoid: ['ç­¾çº¦', 'å¼€ä¸š', 'æŠ•èµ„', 'äº‰æ‰§', 'è¿œè¡Œ'],
        reason: 'æ—¥æŸ±ä¸æµå¹´ç›¸å†²ï¼Œå½¢æˆä¸åˆ©çš„ç£åœºã€‚å°äººè¿è¾ƒæ—ºï¼Œå®¹æ˜“é‡åˆ°é˜»ç¢å’Œè¯¯è§£ï¼Œéœ€è¦ä½è°ƒè¡Œäº‹ã€‚',
        tips: 'è°¨è¨€æ…è¡Œï¼Œå¤šå¬å°‘è¯´ï¼Œé¿å…ä¸äººå‘ç”Ÿå†²çªã€‚å›°éš¾æ˜¯æš‚æ—¶çš„ï¼Œä¿æŒè€å¿ƒç­‰å¾…è½¬æœºã€‚'
      }
    },
    { 
      level: 'poor', 
      text: 'å‡¶', 
      icon: 'ğŸŒ§ï¸', 
      description: 'è¿åŠ¿è¾ƒå·®ï¼Œå®œé™ä¸å®œåŠ¨ï¼Œé€‚åˆåæ€æ€»ç»“',
      huangliInfo: {
        title: 'é»„å†å‡¶æ—¥',
        explanation: 'ä»Šæ—¥ä¸ºå¤§å‡¶ä¹‹æ—¥ï¼Œè¯¸äº‹ä¸å®œã€‚é»„å†è®°è½½ä»Šæ—¥ä¸ºç ´æ—¥æˆ–ç»æ—¥ï¼Œäº”è¡Œç›¸å…‹ä¸¥é‡ï¼Œæ˜“ç”Ÿç¾ç¥¸ï¼Œåº”å½“é¿å‡¶è¶‹å‰ã€‚',
        suitable: ['ä¼‘æ¯', 'åçœ', 'å¿µç»', 'æ¸…ç†', 'é™ä¿®'],
        avoid: ['é‡è¦å†³ç­–', 'ç­¾çº¦', 'å¼€ä¸š', 'æ¬å®¶', 'æ‰‹æœ¯', 'æŠ•èµ„'],
        reason: 'å¤©å…‹åœ°å†²ï¼Œäº”è¡Œå¤±è¡¡ï¼Œè´Ÿèƒ½é‡èšé›†ã€‚æ­¤æ—¥æ˜“é‡å°äººï¼Œäº‹ä¸šå—é˜»ï¼Œæ„Ÿæƒ…ä¸é¡ºï¼Œå¥åº·éœ€è¦å…³æ³¨ã€‚',
        tips: 'ä»¥é™åˆ¶åŠ¨ï¼Œå¤šåšå–„äº‹ç§¯å¾·ã€‚å›°å¢ƒæ˜¯æˆé•¿çš„æœºä¼šï¼Œä¿æŒä¿¡å¿ƒï¼Œç­‰å¾…ä¹Œäº‘æ•£å»è§å½©è™¹ã€‚'
      }
    }
  ]
  
  // åŸºäºæ—¥æœŸç”Ÿæˆå›ºå®šçš„è¿åŠ¿ï¼ˆç¡®ä¿åŒä¸€å¤©çš„è¿åŠ¿ç›¸åŒï¼‰
  const today = new Date()
  const seed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate()
  const fortuneIndex = seed % fortunes.length
  
  todayFortune.value = fortunes[fortuneIndex]
}

// æ ¼å¼åŒ–æ—¶é—´
const formatTime = (date: string | Date | null | undefined) => {
  if (!date) return ''
  
  try {
    const d = new Date(date)
    if (isNaN(d.getTime())) return 'æ—¶é—´æœªçŸ¥'
    
    const now = new Date()
    const diff = now.getTime() - d.getTime()
    const days = Math.floor(diff / (1000 * 60 * 60 * 24))
  
    if (days === 0) {
      return 'ä»Šå¤©'
    } else if (days === 1) {
      return 'æ˜¨å¤©'
    } else if (days < 7) {
      return `${days}å¤©å‰`
    } else {
      return d.toLocaleDateString()
    }
  } catch (error) {
    console.warn('æ—¶é—´æ ¼å¼åŒ–é”™è¯¯:', error)
    return 'æ—¶é—´æœªçŸ¥'
  }
 }

// æ‰“å¼€æ–°é—»é“¾æ¥
const openNewsLink = (url: string) => {
  window.open(url, '_blank')
}

// æ˜¾ç¤ºè¯¦ç»†è¿åŠ¿ä¿¡æ¯
const showFortuneDetail = () => {
  const fortune = todayFortune.value
  if (!fortune || !fortune.huangliInfo) return
  
  const info = fortune.huangliInfo
  
  ElMessageBox({
    title: info.title,
    message: h('div', { class: 'fortune-detail-content' }, [
      h('div', { class: 'fortune-explanation' }, [
        h('h4', 'ğŸ“œ é»„å†è¯´æ˜'),
        h('p', info.explanation)
      ]),
      h('div', { class: 'fortune-suitable' }, [
        h('h4', 'âœ… ä»Šæ—¥å®œ'),
        h('div', { class: 'fortune-tags' }, info.suitable.map(item => 
          h('span', { class: 'fortune-tag suitable' }, item)
        ))
      ]),
      h('div', { class: 'fortune-avoid' }, [
        h('h4', 'âŒ ä»Šæ—¥å¿Œ'),
        h('div', { class: 'fortune-tags' }, info.avoid.map(item => 
          h('span', { class: 'fortune-tag avoid' }, item)
        ))
      ]),
      h('div', { class: 'fortune-reason' }, [
        h('h4', 'ğŸ” è¿åŠ¿åŸå› '),
        h('p', info.reason)
      ]),
      h('div', { class: 'fortune-tips' }, [
        h('h4', 'ğŸ’¡ å»ºè®®'),
        h('p', info.tips)
      ])
    ]),
    showCancelButton: false,
    confirmButtonText: 'çŸ¥é“äº†',
    customClass: 'fortune-detail-dialog'
  })
}



const handleLogoClick = () => {
  logoClickCount.value++
  
  // è¿ç»­ç‚¹å‡»5æ¬¡æ˜¾ç¤ºè®¾ç½®
  if (logoClickCount.value >= 5) {
    showSettings.value = true
    logoClickCount.value = 0
  }
  
  // 2ç§’åé‡ç½®è®¡æ•°
  setTimeout(() => {
    logoClickCount.value = 0
  }, 2000)
}

// ç”Ÿå‘½å‘¨æœŸ
onMounted(async () => {
  // åˆå§‹åŒ–æ—¥æœŸå’Œè¿åŠ¿
  initDateInfo()
  initTodayFortune()
  // åŠ è½½ç»Ÿè®¡æ•°æ®
  await loadStats()
  // åŠ è½½é‡è¦å¾…åŠäº‹é¡¹
  await loadImportantTodos()
  // åŠ è½½AIæ–°é—»
  loadAINews()
  // åŠ è½½AIå¤§çˆ†ç‚¸
  loadAIConsultations()
  // æ„å»ºç»Ÿä¸€ä¿¡æ¯æµ
  buildStreamItems()
})

// ç»„ä»¶å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨
onUnmounted(() => {
  if (streamTimer.value) {
    clearInterval(streamTimer.value)
  }
  // æ¸…ç†ç•ªèŒ„é’Ÿå®šæ—¶å™¨
  if (timerInterval.value) {
    clearInterval(timerInterval.value)
  }
})

const loadStats = async () => {
  try {
    const notes = await DatabaseManager.getNotes()
    const chatSessions = await DatabaseManager.getChatSessions()
    const tasks = await DatabaseManager.getTasks()
    
    stats.value = {
      totalNotes: notes.length,
      totalTasks: tasks.length,
      totalChats: chatSessions.length,
      aiCalls: 156
    }
  } catch (error) {
    console.error('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error)
    // ä½¿ç”¨é»˜è®¤æ•°æ®
    stats.value = {
      totalNotes: 12,
      totalTasks: 8,
      totalChats: 5,
      aiCalls: 156
    }
  }
}

// åŠ è½½é‡è¦å¾…åŠäº‹é¡¹
const loadImportantTodos = async () => {
  try {
    const tasks = await DatabaseManager.getTasks()
    // ç­›é€‰é‡è¦ä¸”æœªå®Œæˆçš„ä»»åŠ¡ï¼ŒæŒ‰ä¼˜å…ˆçº§å’Œæˆªæ­¢æ—¶é—´æ’åº
    importantTodos.value = tasks
      .filter(task => !task.completed && (task.priority === 'high' || task.priority === 'urgent'))
      .sort((a, b) => {
        // ä¼˜å…ˆçº§æ’åºï¼šurgent > high
        if (a.priority !== b.priority) {
          return a.priority === 'urgent' ? -1 : 1
        }
        // æˆªæ­¢æ—¶é—´æ’åº
        const dateA = a.dueDate ? new Date(a.dueDate) : new Date(0)
        const dateB = b.dueDate ? new Date(b.dueDate) : new Date(0)
        
        if (isNaN(dateA.getTime()) || isNaN(dateB.getTime())) {
          return 0 // å¦‚æœæ—¥æœŸæ— æ•ˆï¼Œä¿æŒåŸé¡ºåº
        }
        
        return dateA.getTime() - dateB.getTime()
      })
      .slice(0, 5) // åªæ˜¾ç¤ºå‰5ä¸ª
  } catch (error) {
    console.error('åŠ è½½é‡è¦å¾…åŠäº‹é¡¹å¤±è´¥:', error)
    // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
    importantTodos.value = [
      {
        id: '1',
        title: 'å®Œæˆé¡¹ç›®æŠ¥å‘Š',
        priority: 'urgent',
        dueDate: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()
      },
      {
        id: '2',
        title: 'å‡†å¤‡ä¼šè®®ææ–™',
        priority: 'high',
        dueDate: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString()
      }
    ]
  }
}

// åŠ è½½AIæ–°é—»
const loadAINews = () => {
  // æ¨¡æ‹ŸAIæ–°é—»æ•°æ®
  aiNews.value = [
    {
      id: '1',
      title: 'OpenAIå‘å¸ƒGPT-4 Turboæ–°ç‰ˆæœ¬',
      summary: 'æ–°ç‰ˆæœ¬åœ¨æ¨ç†èƒ½åŠ›å’Œä¸Šä¸‹æ–‡é•¿åº¦æ–¹é¢æœ‰æ˜¾è‘—æå‡ï¼Œæ”¯æŒæ›´å¤æ‚çš„ä»»åŠ¡å¤„ç†ã€‚',
      source: 'OpenAIå®˜æ–¹',
      publishTime: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
      url: 'https://openai.com'
    },
    {
      id: '2',
      title: 'Google Gemini Ultraåœ¨å¤šé¡¹åŸºå‡†æµ‹è¯•ä¸­è¶…è¶ŠGPT-4',
      summary: 'Gemini Ultraåœ¨æ•°å­¦ã€æ¨ç†å’Œä»£ç ç”Ÿæˆç­‰å¤šä¸ªé¢†åŸŸå±•ç°å‡ºå“è¶Šæ€§èƒ½ã€‚',
      source: 'Google DeepMind',
      publishTime: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),
      url: 'https://deepmind.google'
    },
    {
      id: '3',
      title: 'Claude 3.5 Sonnetå‘å¸ƒï¼Œç¼–ç¨‹èƒ½åŠ›å¤§å¹…æå‡',
      summary: 'Anthropicæœ€æ–°å‘å¸ƒçš„Claude 3.5 Sonnetåœ¨ä»£ç ç†è§£å’Œç”Ÿæˆæ–¹é¢è¡¨ç°ä¼˜å¼‚ã€‚',
      source: 'Anthropic',
      publishTime: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),
      url: 'https://anthropic.com'
    }
  ]
}

// åŠ è½½AIå¤§çˆ†ç‚¸
const loadAIConsultations = () => {
  // AIå¤§çˆ†ç‚¸æ•°æ®
  aiConsultations.value = [
    {
      id: '1',
      title: 'æ™ºèƒ½å†™ä½œåŠ©æ‰‹',
      icon: 'âœï¸',
      description: 'å¸®åŠ©æ‚¨æ’°å†™å„ç±»æ–‡æ¡£å’ŒæŠ¥å‘Š'
    },
    {
      id: '2',
      title: 'ä»£ç åˆ†æä¼˜åŒ–',
      icon: 'ğŸ”§',
      description: 'åˆ†æä»£ç è´¨é‡å¹¶æä¾›ä¼˜åŒ–å»ºè®®'
    },
    {
      id: '3',
      title: 'å­¦ä¹ è§„åˆ’å¸ˆ',
      icon: 'ğŸ¯',
      description: 'åˆ¶å®šä¸ªæ€§åŒ–å­¦ä¹ è®¡åˆ’å’Œç›®æ ‡'
    },
    {
      id: '4',
      title: 'æ•°æ®æ´å¯Ÿåˆ†æ',
      icon: 'ğŸ“ˆ',
      description: 'æ·±åº¦åˆ†ææ•°æ®å¹¶æä¾›è§è§£'
    }
  ]
}


</script>

<style scoped>
/* CSSå˜é‡å®šä¹‰ */
:root {
  --bg-gradient: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
  --gradient-primary: linear-gradient(45deg, #00d4ff, #a29bfe);
  --gradient-secondary: linear-gradient(45deg, #fd79a8, #fdcb6e);
  --gradient-neon: linear-gradient(45deg, #00d4ff, #4ecdc4, #00d4ff);
  --gradient-cyber: linear-gradient(135deg, #00d4ff 0%, #0099cc 25%, #4ecdc4 50%, #00d4ff 100%);
  --text-inverse: #ffffff;
  --text-tertiary: rgba(255, 255, 255, 0.7);
  --text-glow: rgba(0, 212, 255, 0.8);
  --bg-glass: rgba(255, 255, 255, 0.1);
  --bg-dark-glass: rgba(255, 255, 255, 0.15);
  --bg-cyber: rgba(0, 212, 255, 0.05);
  --border-color: rgba(255, 255, 255, 0.2);
  --border-neon: rgba(0, 212, 255, 0.6);
  --primary-color: #00d4ff;
  --secondary-color: #4ecdc4;
  --accent-color: #a29bfe;
  --shadow-glow: 0 8px 32px rgba(0, 212, 255, 0.3);
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.3);
  --shadow-neon: 0 0 20px rgba(0, 212, 255, 0.5), 0 0 40px rgba(0, 212, 255, 0.3), 0 0 60px rgba(0, 212, 255, 0.1);
  --transition-base: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 0.75rem;
  --spacing-lg: 1rem;
  --spacing-xl: 2rem;
  --radius-md: 12px;
  --radius-lg: 16px;
}

.home-container {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: var(--bg-gradient);
  color: var(--text-inverse);
  overflow: hidden;
  position: relative;
}

.home-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle at 20% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
              radial-gradient(circle at 80% 20%, rgba(108, 92, 231, 0.1) 0%, transparent 50%);
  pointer-events: none;
  animation: backgroundPulse 8s ease-in-out infinite;
}

.home-container::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    linear-gradient(45deg, transparent 48%, rgba(0, 212, 255, 0.03) 49%, rgba(0, 212, 255, 0.03) 51%, transparent 52%),
    linear-gradient(-45deg, transparent 48%, rgba(76, 205, 196, 0.03) 49%, rgba(76, 205, 196, 0.03) 51%, transparent 52%);
  background-size: 60px 60px;
  animation: gridMove 20s linear infinite;
  pointer-events: none;
  opacity: 0.5;
}

@keyframes backgroundPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

@keyframes gridMove {
  0% {
    transform: translate(0, 0);
  }
  100% {
    transform: translate(60px, 60px);
  }
}

/* åŠŸèƒ½æ¨¡å—å¡ç‰‡åŒºåŸŸ */
.feature-modules-section {
  margin-top: var(--spacing-xl);
  padding: var(--spacing-lg) 0;
}

.feature-modules-section .section-header {
  text-align: center;
  margin-bottom: var(--spacing-xl);
}

.feature-modules-section .section-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: var(--spacing-sm);
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.feature-modules-section .section-subtitle {
  color: var(--text-tertiary);
  font-size: 0.9rem;
  opacity: 0.8;
}

.modules-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--spacing-lg);
  max-width: 1200px;
  margin: 0 auto;
}

.module-card {
  padding: var(--spacing-lg);
  cursor: pointer;
  transition: var(--transition-base);
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  min-height: 80px;
}

.module-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-neon);
}

.module-icon {
  font-size: 2rem;
  flex-shrink: 0;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-glass);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-color);
}

.module-content {
  flex: 1;
}

.module-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 var(--spacing-xs) 0;
}

.module-description {
  font-size: 0.85rem;
  color: var(--text-tertiary);
  margin: 0;
  opacity: 0.8;
  line-height: 1.4;
}

.module-arrow {
  font-size: 1.2rem;
  color: var(--primary-color);
  opacity: 0.6;
  transition: var(--transition-base);
  flex-shrink: 0;
}

.module-card:hover .module-arrow {
  opacity: 1;
  transform: translateX(4px);
}

.module-card:hover .module-icon {
  background: var(--bg-cyber);
  border-color: var(--border-neon);
  box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
}

/* ç»ç’ƒæ€æ•ˆæœ */
.glass-card {
  background: var(--bg-glass);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-card);
  position: relative;
  overflow: hidden;
  transition: var(--transition-base);
}

.glass-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.1), transparent);
  transition: left 0.6s ease;
  z-index: 1;
}

.glass-card:hover::before {
  left: 100%;
}

.glass-card:hover {
  border-color: var(--border-neon);
  box-shadow: var(--shadow-neon);
  transform: translateY(-2px);
  background: var(--bg-cyber);
}

.glass-card > * {
  position: relative;
  z-index: 2;
}

/* ç§‘æŠ€æ„ŸæŒ‰é’® */
.cyber-btn {
  position: relative;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--bg-glass);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-inverse);
  cursor: pointer;
  transition: var(--transition-base);
  font-weight: 600;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-sm);
  overflow: hidden;
}

.cyber-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  transition: var(--transition-base);
}

.cyber-btn:hover::before {
  left: 100%;
}

.cyber-btn:hover {
  background: var(--bg-dark-glass);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
  border-color: var(--primary-color);
}

.cyber-btn-primary {
  background: var(--gradient-primary);
  border-color: transparent;
  box-shadow: var(--shadow-glow);
}

.cyber-btn-secondary {
  background: var(--gradient-secondary);
  border-color: transparent;
}

/* å‘å…‰æ–‡å­—æ•ˆæœ */
.glow-text {
  text-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
               0 0 40px rgba(0, 212, 255, 0.3),
               0 0 60px rgba(0, 212, 255, 0.2);
  animation: textGlow 2s ease-in-out infinite alternate;
}

@keyframes textGlow {
  from {
    text-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
                 0 0 40px rgba(0, 212, 255, 0.3),
                 0 0 60px rgba(0, 212, 255, 0.2);
  }
  to {
    text-shadow: 0 0 30px rgba(0, 212, 255, 0.8),
                 0 0 60px rgba(0, 212, 255, 0.5),
                 0 0 90px rgba(0, 212, 255, 0.3);
  }
}

/* è„‰å†²å‘å…‰æ•ˆæœ */
.pulse-glow {
  animation: pulseGlow 3s ease-in-out infinite;
}

@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
  }
  50% {
    box-shadow: 0 0 40px rgba(0, 212, 255, 0.6), 0 0 80px rgba(0, 212, 255, 0.3);
  }
}

/* æ‚¬æµ®å‘å…‰æ•ˆæœ */
.glow-hover {
  transition: var(--transition-base);
}

.glow-hover:hover {
  box-shadow: 0 8px 32px rgba(0, 212, 255, 0.4),
              0 0 60px rgba(0, 212, 255, 0.2);
  transform: translateY(-4px);
}

/* ç§‘æŠ€æ„Ÿå›¾æ ‡ */
.cyber-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2.5rem;
  height: 2.5rem;
  background: var(--gradient-primary);
  border-radius: 50%;
  font-size: 1.25rem;
  box-shadow: var(--shadow-glow);
}

/* åŠ¨ç”»æ•ˆæœ */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.6s ease-out;
}

/* éšè—å¼æ¨¡å—é€‰æ‹©å™¨ */
.module-selector-container {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  height: 60px;
}

.module-selector-trigger {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 8px;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  opacity: 0.3;
  transition: var(--transition-base);
}

.module-selector-container:hover .module-selector-trigger {
  opacity: 0.8;
  height: 12px;
}

.module-selector {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.95);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-color);
  transform: translateY(-100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: var(--shadow-glow);
}

.module-selector.expanded {
  transform: translateY(0);
}

.module-tabs-compact {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: var(--spacing-lg) var(--spacing-xl);
  gap: var(--spacing-lg);
}

.tab-item-compact {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid transparent;
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: var(--transition-base);
  color: var(--text-secondary);
}

.tab-item-compact:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: var(--primary-color);
  color: var(--text-inverse);
}

/* å³ä¾§æ§åˆ¶æŒ‰é’® */
.right-controls {
  display: flex;
  margin-left: auto;
  gap: var(--spacing-sm);
}

.control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid transparent;
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: var(--transition-base);
}

.control-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: var(--primary-color);
  transform: translateY(-2px);
}

.control-icon {
  font-size: 18px;
}

.tab-item-compact.active {
  background: var(--gradient-primary);
  border-color: var(--primary-color);
  color: var(--text-inverse);
  box-shadow: var(--shadow-glow);
}

.tab-item-compact .tab-icon {
  font-size: 1.2rem;
}

.tab-item-compact .tab-text {
  font-weight: 500;
  white-space: nowrap;
}

.tab-divider {
  width: 1px;
  height: 30px;
  background: rgba(255, 255, 255, 0.2);
  margin: 0 var(--spacing-md);
  flex-shrink: 0;
}

/* ç®€åŒ–çš„é¡¶éƒ¨å¯¼èˆªæ  */
.top-nav-compact {
  position: sticky;
  top: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-sm) var(--spacing-xl);
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-color);
  margin-top: 4px;
}

.nav-left {
  flex: 0 0 auto;
}

.logo-section-compact {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.logo-section {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.logo-icon {
  width: 40px;
  height: 40px;
  background: var(--gradient-primary);
  border-radius: 8px;
  margin-bottom: var(--spacing-sm);
  box-shadow: var(--shadow-glow);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}

.logo-svg {
  width: 32px;
  height: 32px;
  filter: drop-shadow(0 0 8px rgba(0, 212, 255, 0.3));
}

.app-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 0;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
}

.brand-title {
  font-size: 2rem;
  font-weight: 700;
  margin: 0;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
}

.brand-subtitle {
  font-size: 1rem;
  opacity: 0.8;
  margin: var(--spacing-xs) 0 0 0;
  color: var(--text-tertiary);
}

/* æ¨¡å—æ ‡ç­¾ */
.nav-center {
  flex: 1;
  display: flex;
  justify-content: center;
}

.module-tabs {
  display: flex;
  gap: var(--spacing-sm);
}

.tab-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--bg-glass);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-base);
  font-size: 0.875rem;
  font-weight: 600;
  backdrop-filter: blur(10px);
  position: relative;
  overflow: hidden;
}

.tab-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  transition: var(--transition-base);
}

.tab-item:hover::before {
  left: 100%;
}

.tab-item:hover {
  background: var(--bg-dark-glass);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
  border-color: var(--primary-color);
}

.tab-item.active {
  background: var(--gradient-primary);
  border-color: transparent;
  box-shadow: var(--shadow-glow);
  color: var(--text-inverse);
}

.tab-icon {
  font-size: 1.125rem;
}

/* å³ä¾§å¯¼èˆª */
.nav-right {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.search-input {
  width: 300px;
}

.theme-btn,
.settings-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--bg-glass);
  border: 1px solid var(--border-color);
  color: var(--text-inverse);
  transition: var(--transition-base);
}

.theme-btn:hover,
.settings-btn:hover {
  background: var(--bg-dark-glass);
  box-shadow: var(--shadow-glow);
  transform: translateY(-2px);
}

/* ä¸»å†…å®¹åŒºåŸŸ */
.content-area {
  flex: 1;
  overflow: hidden;
  padding: var(--spacing-lg);
  position: relative;
  z-index: 1;
}

.content-area-new {
  flex: 1;
  padding: var(--spacing-lg);
  overflow-y: auto;
  background: var(--bg-primary);
  margin-top: 8px;
}

.dashboard-layout {
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--spacing-lg);
}

.search-section {
  margin-bottom: var(--spacing-xl);
}

/* æ¬¢è¿é¡µé¢ */
.welcome-screen {
  height: 100%;
  overflow-y: auto;
  padding: var(--spacing-md) var(--spacing-xl) var(--spacing-xl);
}

.welcome-hero {
  position: relative;
  text-align: center;
  margin-bottom: var(--spacing-lg);
  padding-top: var(--spacing-sm);
}

.hero-background {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
  animation: rotate 20s linear infinite;
  pointer-events: none;
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.hero-content {
  position: relative;
  z-index: 2;
}

.hero-title {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: var(--spacing-sm);
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hero-subtitle {
  font-size: 1.1rem;
  opacity: 0.8;
  margin-bottom: var(--spacing-md);
  color: var(--text-tertiary);
}

/* æ™ºèƒ½æœç´¢åŒºåŸŸ */
.smart-search-section {
  max-width: 800px;
  margin: 0 auto var(--spacing-xl);
  padding: var(--spacing-xl);
}

/* æ—¥æœŸè¿åŠ¿å’Œå åœä¸€è¡Œå¸ƒå±€ */
.date-divination-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-6);
  margin-bottom: var(--space-4);
  align-items: start;
}

/* æ—¥æœŸå’Œè¿åŠ¿æ˜¾ç¤º */
.date-fortune-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.date-display {
  padding: var(--space-4);
  text-align: center;
}

.date-main {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-3);
  margin-bottom: var(--space-2);
}

.date-number {
  font-size: 4rem;
  font-weight: 700;
  color: var(--primary-color);
  line-height: 1;
  text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
}

.date-info {
  text-align: left;
}

.date-month-year {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-inverse);
  margin-bottom: var(--space-1);
}

.date-weekday {
  font-size: 1rem;
  color: var(--text-tertiary);
}

.lunar-date {
  font-size: 0.9rem;
  color: var(--text-tertiary);
  font-style: italic;
}

.fortune-display {
  padding: var(--space-5);
  text-align: center;
}

.fortune-header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  margin-bottom: var(--space-3);
}

.fortune-icon {
  font-size: 2rem;
}

.fortune-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-inverse);
}

.fortune-level {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: var(--space-3);
  text-shadow: 0 0 15px currentColor;
}

.fortune-excellent {
  color: #ffd700;
}

.fortune-good {
  color: #00ff88;
}

.fortune-normal {
  color: #00d4ff;
}

.fortune-caution {
  color: #ffa502;
}

.fortune-poor {
  color: #ff4757;
}

.fortune-desc {
  font-size: 0.9rem;
  color: var(--text-tertiary);
  line-height: 1.5;
}

/* å åœç®—å¦åŠŸèƒ½ */
.divination-section {
  margin-top: var(--space-4);
  margin-bottom: var(--space-4);
  padding: var(--space-6);
}

.divination-controls {
  display: flex;
  gap: var(--space-2);
}

.divination-content {
  margin-top: var(--space-4);
}

/* å åœç»“æœå¢å¼ºæ˜¾ç¤ºæ ·å¼ */
.divination-result-enhanced {
  margin-top: var(--spacing-lg);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

/* æŠ•æ·é“œé’±ç»“æœå±•ç¤º */
.coin-results-section {
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.section-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-inverse);
  margin-bottom: var(--spacing-md);
  text-align: center;
}

.coin-results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: var(--spacing-md);
}

.coin-result-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  background: rgba(255, 255, 255, 0.03);
  border-radius: var(--radius-md);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.yao-position-label {
  font-size: 0.85rem;
  color: var(--text-tertiary);
  font-weight: 500;
}

.coins-display {
  display: flex;
  gap: var(--spacing-xs);
}

.coin-mini {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  font-weight: 600;
  border: 2px solid;
  transition: var(--transition-base);
}

.coin-mini.coin-front {
  background: linear-gradient(135deg, #ffd700, #ffed4e);
  color: #8b4513;
  border-color: #ffa500;
  box-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
}

.coin-mini.coin-back {
  background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
  color: #2c3e50;
  border-color: #a0a0a0;
  box-shadow: 0 0 8px rgba(192, 192, 192, 0.4);
}

.coin-sum {
  font-size: 0.8rem;
  color: var(--primary-color);
  font-weight: 600;
}

/* å…­çˆ»å¦è±¡è¯¦ç»†æ˜¾ç¤º */
.liuyao-detailed {
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.hexagram-header {
  text-align: center;
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.hexagram-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-bottom: var(--spacing-xs);
  text-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
}

.hexagram-nature {
  font-size: 0.9rem;
  color: var(--text-tertiary);
  font-style: italic;
}

/* å…­çˆ»æ’åˆ—è¯¦ç»†ç‰ˆ */
.yao-lines-detailed {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

.yao-line-detailed {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-md);
  background: rgba(255, 255, 255, 0.03);
  border-radius: var(--radius-md);
  border: 1px solid rgba(255, 255, 255, 0.05);
  transition: var(--transition-base);
}

.yao-line-detailed.changing {
  background: rgba(255, 107, 107, 0.1);
  border-color: rgba(255, 107, 107, 0.3);
  box-shadow: 0 0 15px rgba(255, 107, 107, 0.2);
}

.yao-line-detailed:hover {
  background: rgba(255, 255, 255, 0.08);
  transform: translateX(5px);
}

.yao-position {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-inverse);
  min-width: 30px;
  text-align: center;
}

.yao-symbol-large {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--primary-color);
  min-width: 80px;
  text-align: center;
  text-shadow: 0 0 10px currentColor;
}

.yao-info {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  flex: 1;
}

.yao-type {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-inverse);
}

.yao-coins {
  font-size: 0.8rem;
  color: var(--text-tertiary);
  font-family: monospace;
}

.yao-change {
  font-size: 0.75rem;
  color: var(--primary-color);
  font-weight: 600;
  background: rgba(255, 107, 107, 0.2);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  align-self: flex-start;
}

/* å˜å¦æ˜¾ç¤º */
.changed-hexagram-detailed {
  text-align: center;
  margin: var(--spacing-lg) 0;
  padding: var(--spacing-md);
  background: rgba(255, 107, 107, 0.1);
  border-radius: var(--radius-md);
  border: 1px solid rgba(255, 107, 107, 0.3);
}

.change-arrow {
  font-size: 1.2rem;
  color: var(--primary-color);
  margin-bottom: var(--spacing-sm);
  font-weight: 600;
}

.changed-hexagram-title {
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-bottom: var(--spacing-xs);
}

.changed-hexagram-nature {
  font-size: 0.85rem;
  color: var(--text-tertiary);
  font-style: italic;
}

/* å¦è±¡è§£é‡Š */
.hexagram-explanation {
  background: rgba(255, 255, 255, 0.03);
  border-radius: var(--radius-md);
  padding: var(--spacing-lg);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.explanation-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-inverse);
  margin-bottom: var(--spacing-md);
  text-align: center;
}

.explanation-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.original-meaning,
.changed-meaning {
  font-size: 0.9rem;
  line-height: 1.6;
  color: var(--text-secondary);
  padding: var(--spacing-md);
  background: rgba(255, 255, 255, 0.02);
  border-radius: var(--radius-sm);
  border-left: 3px solid var(--primary-color);
}

.changed-meaning {
  border-left-color: #00d4ff;
}

/* å…­çˆ»å¦ç›˜æ ·å¼ */
.liuyao-display {
  width: 100%;
  padding: 1rem;
}

.hexagram-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 1rem 0;
}

.hexagram-info {
  text-align: center;
  margin-bottom: 1.5rem;
}

.hexagram-name {
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--color-primary);
  margin-bottom: 0.5rem;
}

.hexagram-nature {
  font-size: 1rem;
  color: var(--text-secondary);
  margin-bottom: 0.3rem;
}

.hexagram-element {
  font-size: 0.9rem;
  color: var(--text-muted);
}

.yao-lines {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  width: 100%;
  max-width: 400px;
}

.yao-line {
  display: grid;
  grid-template-columns: 60px 1fr 80px 80px;
  align-items: center;
  padding: 0.5rem;
  background: var(--bg-secondary);
  border-radius: 8px;
  border: 1px solid var(--border-color);
  transition: all 0.3s ease;
}

.yao-line.changing {
  background: linear-gradient(45deg, var(--color-warning), var(--color-primary));
  color: white;
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  animation: changingGlow 2s infinite alternate;
}

.yao-position {
  font-size: 0.8rem;
  font-weight: bold;
  color: var(--text-secondary);
}

.yao-symbol {
  font-size: 1.2rem;
  font-family: monospace;
  text-align: center;
  font-weight: bold;
}

.yao-type {
  font-size: 0.8rem;
  text-align: center;
  color: var(--text-muted);
}

.yao-coins {
  font-size: 0.7rem;
  text-align: center;
  color: var(--text-muted);
}

.changed-hexagram {
  margin-top: 2rem;
  text-align: center;
}

.change-arrow {
  font-size: 1.2rem;
  color: var(--color-primary);
  margin-bottom: 1rem;
  font-weight: bold;
}

.hexagram-meaning-section {
  margin-top: 1.5rem;
  padding: 1rem;
  background: var(--bg-tertiary);
  border-radius: 8px;
  border-left: 4px solid var(--color-primary);
}

.meaning-title {
  font-size: 1rem;
  font-weight: bold;
  color: var(--color-primary);
  margin-bottom: 0.5rem;
}

.meaning-content {
  font-size: 0.9rem;
  line-height: 1.6;
  color: var(--text-primary);
}

@keyframes changingGlow {
  0% {
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  }
  100% {
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.3);
  }
}

.divination-prompt {
  text-align: center;
  margin-bottom: var(--space-4);
}

.divination-prompt p {
  color: var(--text-tertiary);
  margin-bottom: var(--space-4);
  font-size: 0.95rem;
}

.divination-types {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: var(--space-3);
  margin-top: var(--space-4);
}

.divination-type {
  padding: var(--space-3);
  border: 1px solid rgba(0, 212, 255, 0.2);
  border-radius: var(--radius-md);
  text-align: center;
  cursor: pointer;
  transition: var(--transition-bounce);
  background: var(--bg-cyber);
  position: relative;
  overflow: hidden;
}

.divination-type::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: var(--gradient-neon);
  opacity: 0;
  transition: all 0.3s ease;
}

.divination-type:hover {
  border-color: var(--border-neon);
  background: rgba(0, 212, 255, 0.1);
  transform: translateY(-2px) scale(1.02);
  box-shadow: var(--shadow-glow);
}

.divination-type:hover::before {
  left: 0;
  opacity: 0.1;
}

.divination-type.active {
  border-color: var(--primary-color);
  background: rgba(0, 212, 255, 0.15);
  box-shadow: var(--shadow-neon);
  animation: activeGlow 2s ease-in-out infinite alternate;
}

@keyframes activeGlow {
  from {
    box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
  }
  to {
    box-shadow: 0 0 25px rgba(0, 212, 255, 0.6), 0 0 50px rgba(0, 212, 255, 0.3);
  }
}

.type-icon {
  font-size: 1.5rem;
  margin-bottom: var(--space-1);
}

.type-name {
  font-size: 0.85rem;
  color: var(--text-inverse);
  font-weight: 500;
}

.divination-result-compact {
  margin-top: var(--spacing-lg);
}

.liuyao-compact {
  background: var(--bg-glass);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid var(--border-color);
}

.hexagram-header {
  text-align: center;
  margin-bottom: var(--spacing-md);
}

.hexagram-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-bottom: var(--spacing-xs);
}

.hexagram-nature {
  font-size: 1rem;
  color: var(--text-tertiary);
}

.yao-lines-compact {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  margin: var(--spacing-md) 0;
}

.yao-line-compact {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-sm);
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
  transition: var(--transition-base);
}

.yao-line-compact.changing {
  background: linear-gradient(45deg, var(--warning-color), var(--primary-color));
  color: white;
  box-shadow: 0 0 10px rgba(255, 167, 38, 0.5);
  animation: changingGlow 2s infinite alternate;
}

.yao-line-compact .yao-position {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-secondary);
  min-width: 20px;
}

.yao-line-compact .yao-symbol {
  font-size: 1.2rem;
  font-family: monospace;
  font-weight: bold;
  flex: 1;
  text-align: center;
}

.yao-line-compact .yao-type {
  font-size: 0.8rem;
  color: var(--text-tertiary);
  min-width: 40px;
  text-align: right;
}

.changed-hexagram-compact {
  text-align: center;
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-md);
  border-top: 1px solid var(--border-light);
}

.change-indicator {
  font-size: 1rem;
  color: var(--secondary-color);
  font-weight: 600;
}

.divination-interpretation-compact {
  margin-top: var(--spacing-md);
  background: var(--bg-glass);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid var(--border-color);
}

.interpretation-content-compact {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.content-section,
.advice-section {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm);
  background: rgba(255, 255, 255, 0.03);
  border-radius: var(--radius-md);
  border-left: 3px solid var(--primary-color);
}

.advice-section {
  border-left-color: var(--secondary-color);
}

.section-icon {
  font-size: 1.2rem;
  flex-shrink: 0;
  margin-top: 2px;
}

.section-text {
  flex: 1;
  line-height: 1.6;
  color: var(--text-primary);
  font-size: 0.95rem;
}

.divination-meta-compact {
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-md);
  border-top: 1px solid var(--border-light);
  text-align: center;
}

.meta-compact {
  font-size: 0.85rem;
  color: var(--text-tertiary);
  font-weight: 500;
}

.divination-result {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--space-6);
  align-items: start;
}

.hexagram-display {
  text-align: center;
  padding: var(--space-4);
  border: 2px solid var(--border-neon);
  border-radius: var(--radius-lg);
  background: var(--bg-cyber);
  position: relative;
  overflow: hidden;
  animation: hexagramPulse 4s ease-in-out infinite;
}

.hexagram-display::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: conic-gradient(from 0deg, transparent, rgba(0, 212, 255, 0.1), transparent);
  animation: rotate 8s linear infinite;
}

.hexagram-display > * {
  position: relative;
  z-index: 2;
}

.hexagram-symbol {
  font-size: 4rem;
  line-height: 1;
  margin-bottom: var(--space-2);
  text-shadow: var(--shadow-neon);
  animation: symbolGlow 3s ease-in-out infinite alternate;
}

.hexagram-name {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--primary-color);
  text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
}

@keyframes hexagramPulse {
  0%, 100% {
    border-color: rgba(0, 212, 255, 0.3);
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
  }
  50% {
    border-color: rgba(0, 212, 255, 0.6);
    box-shadow: 0 0 40px rgba(0, 212, 255, 0.4);
  }
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes symbolGlow {
  from {
    text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
  }
  to {
    text-shadow: 0 0 30px rgba(0, 212, 255, 0.8), 0 0 60px rgba(0, 212, 255, 0.4);
  }
}

.hexagram-meaning {
  font-size: 0.85rem;
  color: var(--text-tertiary);
  margin-top: var(--space-2);
  font-style: italic;
}

.hexagram-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 120px;
  height: 120px;
  background: radial-gradient(circle, rgba(0, 212, 255, 0.3) 0%, transparent 70%);
  border-radius: 50%;
  animation: hexagramGlow 3s ease-in-out infinite;
  z-index: -1;
}

@keyframes hexagramGlow {
  0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
  50% { opacity: 0.6; transform: translate(-50%, -50%) scale(1.1); }
}

.result-coins {
  display: flex;
  justify-content: center;
  gap: var(--space-2);
  margin-top: var(--space-3);
}

.result-coin {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  font-weight: bold;
  animation: resultCoinSpin 2s ease-in-out;
}

.result-coin:nth-child(odd) {
  background: radial-gradient(circle, #ffd700 0%, #b8860b 100%);
  color: #8b4513;
  border: 2px solid #b8860b;
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
}

.result-coin:nth-child(even) {
  background: radial-gradient(circle, #c0c0c0 0%, #808080 100%);
  color: #2f2f2f;
  border: 2px solid #808080;
  box-shadow: 0 0 10px rgba(192, 192, 192, 0.4);
}

@keyframes resultCoinSpin {
  0% { transform: rotateY(0deg); }
  50% { transform: rotateY(180deg); }
  100% { transform: rotateY(360deg); }
}

/* é“œé’±åŠ¨ç”»æ ·å¼ */
.coin-animation {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  padding: 40px 20px;
}

.animation-container {
  text-align: center;
}

.coins-wrapper {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 30px;
  perspective: 1000px;
}

.coin {
  width: 60px;
  height: 60px;
  position: relative;
  transform-style: preserve-3d;
  animation: coinFlip 0.8s infinite ease-in-out;
}

@keyframes coinFlip {
  0% { transform: rotateY(0deg) rotateX(0deg) translateY(0px); }
  25% { transform: rotateY(90deg) rotateX(45deg) translateY(-10px); }
  50% { transform: rotateY(180deg) rotateX(90deg) translateY(-20px); }
  75% { transform: rotateY(270deg) rotateX(135deg) translateY(-10px); }
  100% { transform: rotateY(360deg) rotateX(180deg) translateY(0px); }
}

.coin-face {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: bold;
  text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  backface-visibility: hidden;
}

.coin-front {
  background: radial-gradient(circle, #ffd700 0%, #ffed4e 50%, #b8860b 100%);
  border: 3px solid #b8860b;
  color: #8b4513;
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.4), inset 0 0 10px rgba(255, 255, 255, 0.3);
}

.coin-back {
  background: radial-gradient(circle, #c0c0c0 0%, #e6e6e6 50%, #808080 100%);
  border: 3px solid #808080;
  color: #2f2f2f;
  transform: rotateY(180deg);
  box-shadow: 0 0 20px rgba(192, 192, 192, 0.4), inset 0 0 10px rgba(255, 255, 255, 0.3);
}

.divination-text {
  color: var(--text-inverse);
}

.text-line {
  font-size: 18px;
  margin-bottom: 10px;
  opacity: 0;
  animation: textFadeIn 1s ease-in-out forwards;
}

.text-line:nth-child(1) { animation-delay: 0.5s; }
.text-line:nth-child(2) { animation-delay: 1s; }

@keyframes textFadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.progress-dots {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 20px;
}

.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--primary-color);
  animation: dotPulse 1.5s infinite ease-in-out;
}

.dot:nth-child(1) { animation-delay: 0s; }
.dot:nth-child(2) { animation-delay: 0.3s; }
.dot:nth-child(3) { animation-delay: 0.6s; }

@keyframes dotPulse {
  0%, 60%, 100% { transform: scale(1); opacity: 0.7; }
  30% { transform: scale(1.3); opacity: 1; }
}

.divination-interpretation {
  padding: var(--space-4);
}

.interpretation-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-inverse);
  margin-bottom: var(--space-3);
  display: flex;
  align-items: center;
  gap: var(--space-2);
  position: relative;
}

.title-icon {
  font-size: 1.2rem;
}

.title-decoration {
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, var(--primary-color), transparent);
  margin-left: var(--space-2);
}

.interpretation-content {
  color: var(--text-inverse);
  line-height: 1.6;
  margin-bottom: var(--space-4);
  font-size: 1rem;
  background: rgba(0, 212, 255, 0.05);
  padding: var(--space-3);
  border-radius: var(--radius-md);
  border-left: 3px solid rgba(0, 212, 255, 0.3);
}

.divination-advice {
  padding: var(--space-3);
  background: rgba(255, 193, 7, 0.1);
  border-radius: var(--radius-md);
  border-left: 3px solid #ffc107;
  margin-bottom: var(--space-4);
}

.advice-title {
  font-size: 1rem;
  font-weight: 600;
  color: #ffc107;
  margin-bottom: var(--space-2);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.advice-icon {
  font-size: 1rem;
}

.advice-content {
  color: var(--text-inverse);
  line-height: 1.5;
  font-size: 0.95rem;
}

.divination-meta {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-3);
  padding: var(--space-3);
  background: rgba(0, 0, 0, 0.2);
  border-radius: var(--radius-md);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.meta-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.meta-label {
  font-size: 0.8rem;
  color: var(--text-tertiary);
  font-weight: 500;
}

.meta-value {
  font-size: 0.9rem;
  color: var(--text-inverse);
  font-weight: 600;
}

.divination-history {
  margin-top: var(--space-4);
  padding: var(--space-4);
  background: rgba(0, 0, 0, 0.2);
  border-radius: var(--radius-md);
}

.history-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-inverse);
  margin-bottom: var(--space-3);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.history-title::before {
  content: 'ğŸ“š';
  font-size: 1rem;
}

.history-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.history-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3);
  background: rgba(0, 212, 255, 0.05);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.3s ease;
}

.history-item:hover {
  background: rgba(0, 212, 255, 0.1);
  transform: translateX(5px);
}

.history-hexagram {
  font-size: 1.5rem;
  width: 40px;
  text-align: center;
}

.history-info {
  flex: 1;
}

.history-name {
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-inverse);
  margin-bottom: var(--space-1);
}

.history-time {
  font-size: 0.8rem;
  color: var(--text-tertiary);
}

@media (max-width: 768px) {
  .divination-result {
    grid-template-columns: 1fr;
    gap: var(--space-4);
  }
  
  .hexagram-display {
    margin: 0 auto;
    max-width: 200px;
  }
  
  .divination-types {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ç»Ÿä¸€ä¿¡æ¯æµ */
.unified-info-stream {
  margin-top: var(--space-4);
  padding: var(--space-6);
}

.stream-controls {
  display: flex;
  gap: var(--space-3);
}

.info-stream-container {
  margin-top: var(--space-4);
  min-height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.stream-item {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  width: 100%;
  padding: var(--space-4);
  background: var(--bg-dark-glass);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-color);
  transition: var(--transition-base);
}

.stream-item:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
}

.stream-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.stream-content {
  flex: 1;
  min-width: 0;
}

.stream-type {
  font-size: 12px;
  color: var(--primary-color);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: var(--space-1);
}

.stream-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-inverse);
  margin-bottom: var(--space-2);
  line-height: 1.3;
}

.stream-description {
  font-size: 14px;
  color: var(--text-tertiary);
  margin-bottom: var(--space-2);
  line-height: 1.4;
}

.stream-meta {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  font-size: 12px;
}

.stream-priority {
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  font-weight: 600;
  text-transform: uppercase;
}

.stream-priority.priority-urgent {
  background: #ff4757;
  color: white;
}

.stream-priority.priority-high {
  background: #ffa502;
  color: white;
}

.stream-priority.priority-medium {
  background: #3742fa;
  color: white;
}

.stream-time {
  color: var(--text-tertiary);
}

.stream-action {
  flex-shrink: 0;
}

.empty-stream {
  text-align: center;
  color: var(--text-tertiary);
  padding: var(--space-6);
}

.empty-stream .el-icon {
  font-size: 3rem;
  margin-bottom: var(--space-3);
  opacity: 0.5;
}

.stream-indicators {
  display: flex;
  justify-content: center;
  gap: var(--space-2);
  margin-top: var(--space-4);
}

.indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--text-tertiary);
  opacity: 0.3;
  cursor: pointer;
  transition: var(--transition-base);
}

.indicator.active {
  background: var(--primary-color);
  opacity: 1;
  transform: scale(1.2);
}

.indicator:hover {
  opacity: 0.7;
}

.content-card {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-xl);
  padding: var(--spacing-xl);
  box-shadow: var(--shadow-glow);
  transition: var(--transition-base);
}

.content-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px rgba(0, 212, 255, 0.2);
}

.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-lg);
}

.card-title {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-inverse);
  margin: 0;
}

.todos-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.todo-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-base);
}

.todo-item:hover {
  background: rgba(255, 255, 255, 0.08);
  transform: translateX(4px);
}

.todo-item.urgent {
  border-left: 3px solid #ff4757;
}

.todo-item.overdue {
  border-left: 3px solid #ff3838;
  background: rgba(255, 56, 56, 0.1);
}

.todo-content {
  flex: 1;
}

.todo-title {
  font-weight: 500;
  color: var(--text-inverse);
  margin-bottom: var(--spacing-xs);
  font-size: 0.95rem;
}

.todo-time {
  font-size: 0.85rem;
  color: var(--text-tertiary);
}

.consultations-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.news-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.news-item {
  padding: var(--spacing-md);
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-base);
}

.news-item:hover {
  background: rgba(255, 255, 255, 0.08);
  transform: translateX(4px);
}

.news-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.news-category {
  font-size: 0.8rem;
  color: var(--primary-color);
  font-weight: 500;
}

.news-title {
  font-weight: 500;
  color: var(--text-inverse);
  font-size: 0.95rem;
  line-height: 1.4;
}

.news-time {
  font-size: 0.8rem;
  color: var(--text-tertiary);
}

/* AIå¤§çˆ†ç‚¸åŒºåŸŸ */
.ai-consultations {
  padding: var(--spacing-xl);
}

.consultations-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.consultation-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-base);
}

.consultation-item:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
}

.consultation-icon {
  font-size: 1.5rem;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--gradient-primary);
  border-radius: 50%;
  flex-shrink: 0;
}

.consultation-content {
  flex: 1;
}

.consultation-title {
  font-weight: 600;
  margin-bottom: var(--spacing-xs);
  color: var(--text-inverse);
}

.consultation-desc {
  font-size: 0.9rem;
  color: var(--text-tertiary);
  line-height: 1.4;
}

.smart-search-input {
  margin-bottom: var(--spacing-md);
}

.smart-search-input :deep(.el-input__wrapper) {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  backdrop-filter: blur(10px);
}

.smart-search-input :deep(.el-input__inner) {
  color: var(--text-inverse);
  font-size: 1.1rem;
}

.smart-search-input :deep(.el-input__inner::placeholder) {
  color: var(--text-tertiary);
}

.search-suggestions {
  display: flex;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
  margin-top: var(--spacing-md);
}

.suggestion-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm) var(--spacing-md);
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-base);
  font-size: 0.9rem;
}

.suggestion-item:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
}

/* é‡è¦å¾…åŠäº‹é¡¹ */
.important-todos {
  padding: var(--spacing-xl);
}

.todo-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.todo-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-base);
}

.todo-item:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
}

.todo-priority {
  width: 4px;
  height: 40px;
  border-radius: 2px;
}

.priority-urgent {
  background: linear-gradient(45deg, #ff6b6b, #ee5a52);
}

.priority-high {
  background: linear-gradient(45deg, #ffa726, #ff9800);
}

.todo-content {
  flex: 1;
}

.todo-title {
  font-weight: 600;
  margin-bottom: var(--spacing-xs);
  color: var(--text-inverse);
}

.todo-time {
  font-size: 0.9rem;
  color: var(--text-tertiary);
}

.empty-state {
  text-align: center;
  padding: var(--spacing-xl);
  color: var(--text-tertiary);
}

.empty-state .el-icon {
  font-size: 3rem;
  margin-bottom: var(--spacing-md);
  opacity: 0.5;
}

.empty-state p {
  margin-bottom: var(--spacing-lg);
  font-size: 1.1rem;
}

/* AIæ–°é—» */
.ai-news {
  padding: var(--spacing-xl);
}

.news-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.news-item {
  padding: var(--spacing-lg);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-base);
}

.news-item:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
}

.news-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.news-title {
  font-weight: 600;
  font-size: 1.1rem;
  color: var(--text-inverse);
  line-height: 1.4;
}

.news-summary {
  color: var(--text-tertiary);
  line-height: 1.5;
  font-size: 0.95rem;
}

.news-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: var(--spacing-sm);
  font-size: 0.85rem;
  color: var(--text-tertiary);
}

.news-source {
  font-weight: 500;
  color: var(--primary-color);
}

.news-time {
  opacity: 0.7;
}

/* é€šç”¨æ ·å¼ */
.section-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: var(--spacing-lg);
  color: var(--text-inverse);
  text-align: center;
}

/* AIçŠ¶æ€å¡ç‰‡ */
.ai-status {
  max-width: 600px;
  margin: 0 auto var(--spacing-xl);
  padding: var(--spacing-xl);
}

.status-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
}

.status-icon {
  flex-shrink: 0;
}

.status-text {
  flex: 1;
  text-align: left;
}

.status-title {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: var(--spacing-xs);
}

.status-desc {
  opacity: 0.8;
}

.text-success {
  color: #00d4aa;
}

.text-warning {
  color: #fdcb6e;
}

/* å¿«é€Ÿå¼€å§‹ */
.quick-start {
  max-width: 800px;
  margin: 0 auto;
  padding: var(--spacing-xl);
}

.section-title {
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: var(--spacing-lg);
  text-align: center;
}

.start-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--spacing-lg);
}

.start-card {
  padding: var(--spacing-xl);
  text-align: center;
  cursor: pointer;
  transition: var(--transition-base);
}

.card-icon {
  margin: 0 auto var(--spacing-lg);
}

.card-title {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: var(--spacing-sm);
}

.card-desc {
  opacity: 0.8;
  font-size: 0.875rem;
}

/* ç»Ÿè®¡ä¿¡æ¯ */
.stats-section {
  margin-top: var(--spacing-xl);
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-lg);
  max-width: 800px;
  margin: 0 auto;
}

.stat-card {
  background: var(--bg-glass);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--spacing-xl);
  text-align: center;
  transition: var(--transition-base);
}

.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-glow);
}

.stat-icon {
  font-size: 2rem;
  margin-bottom: var(--spacing-md);
}

.stat-number {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-bottom: var(--spacing-xs);
}

.stat-label {
  opacity: 0.8;
  font-size: 0.875rem;
}

/* AIé…ç½®å¯¹è¯æ¡† */
.ai-config-dialog {
  padding: var(--spacing-lg);
}

.config-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-md);
  margin-top: var(--spacing-lg);
}

.quick-actions {
  display: flex;
  gap: var(--spacing-md);
  justify-content: center;
  margin-top: var(--spacing-lg);
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .top-nav {
    flex-direction: column;
    gap: var(--spacing-lg);
    padding: var(--spacing-lg);
  }
  
  .nav-center {
    order: 3;
  }
  
  .module-tabs {
    flex-wrap: wrap;
    justify-content: center;
  }
  
  .hero-title {
    font-size: 2.5rem;
  }
  
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .start-cards {
    grid-template-columns: 1fr;
  }
  
  .horizontal-content {
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
  }
  
  /* æ•´åˆçš„æ—¥æœŸè¿åŠ¿å¡ç‰‡æ ·å¼ */
.integrated-date-fortune-card {
  margin-top: var(--spacing-lg);
  padding: var(--spacing-xl);
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-lg);
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.date-display {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
}

.date-number {
  font-size: 4rem;
  font-weight: 700;
  color: var(--primary-color);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.date-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.month-year {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-inverse);
}

.weekday {
  font-size: 1rem;
  color: var(--text-secondary);
}

.lunar-date {
  font-size: 0.9rem;
  color: var(--accent-color);
  font-style: italic;
}

.fortune-summary {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.fortune-icon-large {
  font-size: 3rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.fortune-info {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.fortune-text {
  font-size: 1.3rem;
  font-weight: 600;
}

.fortune-desc {
  font-size: 1rem;
  color: var(--text-secondary);
  line-height: 1.5;
}

.card-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.fortune-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-lg);
}

.fortune-column {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.fortune-title {
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0;
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.fortune-title.suitable {
  color: var(--success-color);
}

.fortune-title.avoid {
  color: var(--error-color);
}

.fortune-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
}

.fortune-tag {
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: 12px;
  font-size: 0.85rem;
  font-weight: 500;
  border: 1px solid;
}

.fortune-tag.suitable {
  background: rgba(34, 197, 94, 0.2);
  border-color: var(--success-color);
  color: var(--success-color);
}

.fortune-tag.avoid {
  background: rgba(239, 68, 68, 0.2);
  border-color: var(--error-color);
  color: var(--error-color);
}

.fortune-tips-integrated {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: var(--spacing-md);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.tips-title {
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0 0 var(--spacing-sm) 0;
  color: var(--warning-color);
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.tips-content {
  margin: 0;
  line-height: 1.6;
  color: var(--text-secondary);
}
/* å¢å¼ºç‰ˆæ™ºèƒ½æœç´¢æ ·å¼ */
.enhanced-search-section {
  width: 100%;
  max-width: 800px;
  margin: 0 auto var(--spacing-xl) auto;
  padding: 0 var(--spacing-lg);
}

.search-header {
  text-align: center;
  margin-bottom: var(--spacing-lg);
}

.search-title {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  font-size: 1.8rem;
  font-weight: 600;
  color: var(--text-inverse);
  margin: 0 0 var(--spacing-sm) 0;
}

.search-title-icon {
  font-size: 2rem;
  color: var(--primary-color);
}

.search-subtitle {
  color: var(--text-secondary);
  font-size: 1rem;
  margin: 0;
  opacity: 0.8;
}

.enhanced-search-container {
  padding: var(--spacing-xl);
  border-radius: var(--radius-xl);
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.enhanced-search-input {
  width: 100%;
  margin-bottom: var(--spacing-lg);
}

.enhanced-search-input .el-input__wrapper {
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid transparent;
  border-radius: var(--radius-lg);
  padding: var(--spacing-md) var(--spacing-lg);
  font-size: 1.1rem;
  transition: all 0.3s ease;
}

.enhanced-search-input .el-input__wrapper:hover {
  border-color: var(--primary-color);
  background: rgba(255, 255, 255, 0.15);
}

.enhanced-search-input .el-input__wrapper.is-focus {
  border-color: var(--primary-color);
  background: rgba(255, 255, 255, 0.15);
  box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.2);
}

.search-prefix-icon {
  color: var(--primary-color);
  font-size: 1.2rem;
}

.search-button {
  margin-right: var(--spacing-sm);
  border-radius: var(--radius-md);
  font-weight: 500;
}

.search-suggestions-enhanced {
  margin-top: var(--spacing-lg);
}

.suggestions-header {
  margin-bottom: var(--spacing-md);
}

.suggestions-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-inverse);
  opacity: 0.9;
}

.suggestions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--spacing-sm);
}

.suggestion-item-enhanced {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  padding: var(--spacing-md) var(--spacing-lg);
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 0.95rem;
}

.suggestion-item-enhanced:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: var(--primary-color);
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 212, 255, 0.2);
}

.suggestion-icon-enhanced {
  font-size: 1.2rem;
  flex-shrink: 0;
}

.suggestion-text-enhanced {
  flex: 1;
  color: var(--text-inverse);
  font-weight: 500;
}



.left-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  width: 300px;
}

.compact-search {
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-sm);
}

.compact-search-input {
  width: 100%;
}

.search-suggestions-compact {
  margin-top: var(--spacing-sm);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.suggestion-item-compact {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs) var(--spacing-sm);
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-base);
  font-size: 0.85rem;
}

.suggestion-item-compact:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateX(2px);
}

.suggestion-icon {
  font-size: 0.9rem;
  flex-shrink: 0;
}

.suggestion-text {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text-secondary);
}

.compact-date-display {
  padding: var(--spacing-md);
  text-align: center;
}

.compact-date-main {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
}

.compact-date-number {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--primary-color);
  text-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
}

.compact-date-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.compact-month-year {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-inverse);
}

.compact-weekday {
  font-size: 0.85rem;
  color: var(--text-tertiary);
}

.compact-lunar {
  font-size: 0.8rem;
  color: var(--text-tertiary);
  margin-top: var(--spacing-xs);
  font-style: italic;
}

.compact-fortune {
  padding: var(--spacing-md);
  text-align: center;
  transition: var(--transition-base);
}

.compact-fortune:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
}

.compact-fortune-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

.fortune-icon {
  font-size: 1.5rem;
}

.fortune-text {
  font-size: 1.2rem;
  font-weight: 600;
  text-shadow: 0 0 10px currentColor;
}

.fortune-detail-hint {
  font-size: 0.75rem;
  color: var(--text-tertiary);
  opacity: 0.7;
  transition: var(--transition-base);
}

.compact-fortune:hover .fortune-detail-hint {
  opacity: 1;
  color: var(--primary-color);
}

/* è¿åŠ¿è¯¦æƒ…å¼¹çª—æ ·å¼ */
.fortune-detail-dialog {
  --el-messagebox-width: 500px;
}

.fortune-detail-content {
  text-align: left;
  line-height: 1.6;
}

.fortune-detail-content h4 {
  margin: var(--spacing-md) 0 var(--spacing-sm) 0;
  color: var(--primary-color);
  font-size: 1rem;
  font-weight: 600;
}

.fortune-detail-content h4:first-child {
  margin-top: 0;
}

.fortune-detail-content p {
  margin: 0 0 var(--spacing-md) 0;
  color: var(--text-secondary);
  font-size: 0.9rem;
}

.fortune-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
  margin-bottom: var(--spacing-md);
}

.fortune-tag {
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-sm);
  font-size: 0.8rem;
  font-weight: 500;
}

.fortune-tag.suitable {
  background: rgba(0, 255, 136, 0.1);
  color: #00ff88;
  border: 1px solid rgba(0, 255, 136, 0.3);
}

.fortune-tag.avoid {
  background: rgba(255, 71, 87, 0.1);
  color: #ff4757;
  border: 1px solid rgba(255, 71, 87, 0.3);
}

/* æ—¥æœŸè¿åŠ¿èåˆæ¨¡å—æ ·å¼ */
/* æ—¥æœŸæ—¥å†å¡ç‰‡ */
.date-calendar-card {
  padding: var(--spacing-lg);
  transition: var(--transition-base);
  min-height: 120px;
}

.date-calendar-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
}

/* è¯¦ç»†è¿åŠ¿å¡ç‰‡ */
.fortune-detail-card {
  padding: var(--spacing-lg);
  transition: var(--transition-base);
  min-height: 120px;
}

.fortune-detail-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-glow);
}

.date-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.date-main {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-sm);
}

.date-number {
  font-size: 3rem;
  font-weight: 700;
  color: var(--primary-color);
  text-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
  line-height: 1;
}

.date-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.month-year {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-inverse);
  margin-bottom: var(--spacing-xs);
}

.weekday {
  font-size: 0.9rem;
  color: var(--text-tertiary);
}

.lunar-date {
  font-size: 0.85rem;
  color: var(--text-tertiary);
  font-style: italic;
  opacity: 0.8;
}

.fortune-divider {
  width: 2px;
  height: 80px;
  background: linear-gradient(to bottom, transparent, var(--primary-color), transparent);
  border-radius: 1px;
  opacity: 0.3;
}

/* è¿åŠ¿å¤´éƒ¨ */
.fortune-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-md);
}

.fortune-icon {
  font-size: 1.8rem;
}

.fortune-text {
  font-size: 1.4rem;
  font-weight: 600;
  text-shadow: 0 0 10px currentColor;
}

/* è¿åŠ¿è¯¦æƒ… */
.fortune-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
}

.fortune-suitable,
.fortune-avoid,
.fortune-tips {
  padding: var(--spacing-sm);
  border-radius: var(--border-radius);
  background: rgba(255, 255, 255, 0.05);
}

.fortune-details h4 {
  margin: 0 0 var(--spacing-sm) 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-inverse);
}

.fortune-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-xs);
}

.fortune-tag {
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--border-radius-sm);
  font-size: 0.85rem;
  font-weight: 500;
  transition: var(--transition-base);
}

.fortune-tag.suitable {
  background: rgba(76, 175, 80, 0.2);
  color: #4CAF50;
  border: 1px solid rgba(76, 175, 80, 0.3);
}

.fortune-tag.avoid {
  background: rgba(244, 67, 54, 0.2);
  color: #F44336;
  border: 1px solid rgba(244, 67, 54, 0.3);
}

.fortune-tips p {
  margin: 0;
  color: var(--text-secondary);
  line-height: 1.5;
}

.fortune-desc {
  font-size: 0.9rem;
  color: var(--text-secondary);
  line-height: 1.4;
  margin-bottom: var(--spacing-xs);
}

.fortune-detail-hint {
  font-size: 0.75rem;
  color: var(--text-tertiary);
  opacity: 0.7;
  transition: var(--transition-base);
  text-align: center;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-sm);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.date-fortune-integrated:hover .fortune-detail-hint {
  opacity: 1;
  color: var(--primary-color);
  background: rgba(255, 107, 107, 0.1);
  border-color: rgba(255, 107, 107, 0.3);
}

.compact-lunar {
  font-size: 0.8rem;
  color: var(--text-tertiary);
  margin-top: var(--spacing-xs);
}

.compact-fortune {
  padding: var(--spacing-sm) var(--spacing-md);
}

.compact-fortune-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
}

.fortune-text {
  font-weight: 600;
  font-size: 0.9rem;
}

.divination-main-section {
  padding: var(--spacing-xl);
  min-height: 400px;
}

/* ç§»åŠ¨ç«¯å¸ƒå±€è°ƒæ•´ */
  .compact-layout-row {
    grid-template-columns: 1fr;
    gap: var(--spacing-md);
  }
  
  .left-section {
    order: 1;
    flex-direction: row;
    justify-content: space-between;
  }
  
  .divination-main-section {
    order: 2;
  }
  
  .date-number {
    font-size: 3rem;
  }
  
  .divination-result {
    grid-template-columns: 1fr;
    gap: var(--space-4);
  }
  
  .divination-meta {
    grid-template-columns: 1fr;
  }
}

/* æ–°å¢æ ·å¼ï¼šæ»šåŠ¨å¸ƒå±€å’Œæ›´å¤šæŒ‰é’® */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-md);
}

.section-header .section-title {
  margin-bottom: 0;
  text-align: left;
  font-size: 1.25rem;
}

.view-more-btn {
  font-size: 0.875rem;
  padding: 4px 8px;
  height: auto;
}

.view-more-btn .el-icon {
  margin-left: 4px;
  font-size: 12px;
}

.scrollable-content {
  max-height: 300px;
  overflow-y: auto;
  padding-right: 4px;
}

.scrollable-content::-webkit-scrollbar {
  width: 4px;
}

.scrollable-content::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
}

.scrollable-content::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 2px;
}

/* ç•ªèŒ„é’Ÿæ ·å¼ */
.pomodoro-timer-section {
  margin-top: var(--spacing-lg);
}

.timer-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-xl);
}

.timer-display {
  display: flex;
  justify-content: center;
  align-items: center;
}

.timer-circle {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.timer-circle.active {
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.progress-ring {
  transform: rotate(-90deg);
}

.progress-ring-background {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.progress-ring-progress {
  fill: none;
  stroke: var(--primary-color);
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dashoffset 0.3s ease;
}

.timer-text {
  position: absolute;
  text-align: center;
  color: var(--text-inverse);
}

.time-display {
  font-size: 2.5rem;
  font-weight: 700;
  font-family: 'Courier New', monospace;
  margin-bottom: var(--spacing-xs);
}

.timer-mode {
  font-size: 1rem;
  color: var(--text-secondary);
  font-weight: 500;
}

.timer-settings {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-lg);
  width: 100%;
  max-width: 600px;
}

.setting-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.setting-item label {
  font-weight: 500;
  color: var(--text-inverse);
  white-space: nowrap;
}

.cycle-count {
  font-weight: 600;
  color: var(--primary-color);
  font-size: 1.1rem;
}

.timer-controls {
  display: flex;
  gap: var(--spacing-sm);
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .timer-content {
    gap: var(--spacing-lg);
  }
  
  .timer-circle {
    transform: scale(0.8);
  }
  
  .time-display {
    font-size: 2rem;
  }
  
  .timer-settings {
    grid-template-columns: 1fr;
    gap: var(--spacing-md);
  }
}

/* æ¨¡å—å®¹å™¨æ ·å¼ */
.module-container {
  height: 100%;
  overflow-y: auto;
  padding: var(--spacing-md);
  display: flex;
  flex-direction: column;
}

.scrollable-content::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

  .search-with-iching {
    display: flex;
    align-items: center;
    gap: var(--space-4);
  }

  .iching-mini {
    width: 84px;
    min-width: 84px;
    height: 84px;
    padding: 8px;
    border-radius: var(--radius-md);
    background: var(--bg-glass);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-glow);
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 6px;
  }

  .hex-line {
    height: 8px;
    border-radius: 6px;
    position: relative;
    background: var(--primary-light);
    box-shadow: 0 1px 3px rgba(0,0,0,0.08);
  }

  .hex-line.yin::before {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 28%;
    height: 100%;
    background: var(--bg-card);
    border-radius: 6px;
  }

  .hex-line.yang {
    background: var(--primary-color);
  }

  .quick-links {
    margin-top: var(--space-4);
    display: flex;
    gap: var(--space-3);
  }

  .quick-links .el-button {
    color: var(--text-secondary);
  }
</style>